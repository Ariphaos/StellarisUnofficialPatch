############################################
#                                          #
#  Renowned leaders space, vip only        #
#  Written by: Marek Kozlowski             #
#                                   	   #
############################################

namespace = paragon

# Gateway dude

country_event = { #CHEAT EVENT for spawning Skrand near your capital planet
	id = paragon.3999
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		owner.capital_scope.solar_system = { save_event_target_as = gateway_system }
		owner.capital_scope.solar_system = { save_event_target_as = paragon_gateway_dude_homegate }
		owner.capital_scope.solar_system = { set_star_flag = sharpbeak_starsystem }
		set_global_flag = sharpbeak_recruit_phase
		country_event = {
			id = paragon.3001
		}	
	}
}

country_event = {
	id = paragon.3000
	title = "apoc.10.name"
	desc = "paragon.3000.desc"
	picture = GFX_evt_drifting_gateway
	show_sound = event_radio_chatter
	location = event_target:paragon_gateway_dude_homegate
	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		fromfromfrom = {
			has_megastructure_flag = paragon_gateway_dude_homegate_flag
		}
	}

	immediate = {
		from = { save_event_target_as = gateway_system }
	}

	option = {
		name = "paragon.3000.a"
		hidden_effect = {
			country_event = {
				id = paragon.3001 days = 10 random = 2
			}	
		}
	}
}

country_event = {
	id = paragon.3001
	title = "paragon.3001.name"
	desc = "paragon.3001.desc"
	picture = GFX_evt_skrand_ship
	show_sound = event_bad_omen
	location = event_target:paragon_gateway_dude_homegate
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = {
			trigger = { is_gestalt = no }
			text = "paragon.3001.a"
		}
		name = {
			trigger = { is_gestalt = yes }
			text = "paragon.3001.b"
		}
		hidden_effect = {
			create_country = {
				name = "NAME_Skrand_Sharpbeak"
				type = paragon_event_country
				auto_delete = yes
				flag = {
					icon = {
						category = "special"
						file = "unknown.dds"
					}
					background = {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors = {
						"red"
						"red"
						"null"
						"null"
					}
				}
				effect = {
					save_global_event_target_as = sharpbeak_country
				}
			}
			event_target:sharpbeak_country = {
				set_country_flag = sharpbeak_country_flag
				set_faction_hostility = {
					target = root.owner
					set_hostile = no
					set_neutral = yes
					set_friendly = no
				}
				create_species = {
					name = "NAME_Unknown"
					class = AVI
					portrait = paragon02 #sharpbeak_portrait
					namelist = "PRT1"
					traits = {
						trait = "trait_presapient_starborn"
						trait = "trait_survivor"
						trait = "trait_nomadic"
					}
					effect = {
						save_event_target_as = sharpbeak_species
					}
				}
				create_leader = {
					class = admiral
					species = event_target:sharpbeak_species
					name = "NAME_Skrand_Sharpbeak"
					skill = 8
					gender = male
					event_leader = yes
					skip_background_generation = yes
					background_ethic = ethic_militarist
					custom_catch_phrase = skrand_catch_phrase
					custom_description = skrand_desc
					randomize_traits = no
					effect = {
						set_leader_flag = legendary_leader
					}
				}
				last_created_leader = {
					set_leader_flag = skrand
					set_leader_flag = immune_to_negative_traits
					save_global_event_target_as = admiral_sharpbeak
					set_owner = event_target:sharpbeak_country
					add_trait = leader_trait_carrier_specialization 
					add_trait = leader_trait_engineer_2 
					add_trait = subclass_admiral_tactician
					add_trait = leader_trait_resilient_2
					add_trait = leader_trait_survivalist
					add_trait = leader_trait_unyielding
				}
				create_fleet = {
					name = "NAME_WingsOfGlory"
					effect = {
						set_owner = event_target:sharpbeak_country
						create_ship = {
							name = "NAME_FirstTalon"
							design = "NAME_FirstClaw"
							graphical_culture = "npf_01"
							upgradable = no
						}
						last_created_ship = {
							set_ship_flag = last_talon
							save_global_event_target_as = last_talon_ship
						}
						set_location = {
							target = event_target:paragon_gateway_dude_homegate
							distance = 10
							angle = random
						}
						set_fleet_stance = passive
						assign_leader = event_target:admiral_sharpbeak
						save_global_event_target_as = sharpbeak_fleet
					}
					settings = {
						can_upgrade = yes
						can_change_composition = yes
						can_change_leader = yes
						spawn_debris = no
					}
				}
			}
			country_event = {
				id = paragon.3002 days = 120 random = 120
			}
		}
	}
}

country_event = { #project
	id = paragon.3002
	title = "paragon.3002.name"
	desc = "paragon.3002.desc"
	picture = GFX_evt_skrand_ship
	show_sound = event_scanner
	location = event_target:sharpbeak_fleet
	trackable = yes
	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = attacked_sharpbeak }
		has_global_flag = sharpbeak_recruit_phase
	}

	immediate = {
	}

	option = {
		name = "paragon.3002.a"
		enable_special_project = {
			name = "PARAGON_GATEWAY_DUDE_PROJECT"
			location = event_target:sharpbeak_fleet
			owner = root
		}
	}
}

country_event = { #project finished
	id = paragon.3003
	title = "paragon.3003.name"

	desc = {
		text = paragon.3003.desc
		trigger = { is_gestalt = no }
	}
	desc = { #Gestalt
		text = paragon.3003.desc_gestalt
		trigger = { is_gestalt = yes }
	}

	picture = GFX_evt_sabotaged_ship
	show_sound = event_ghost_town
	location = event_target:sharpbeak_fleet
	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = attacked_sharpbeak }
		has_global_flag = sharpbeak_recruit_phase
	}

	immediate = {
	}

	option = {
		name = "paragon.3003.a"
		trigger = {
			NOR = {
				is_gestalt = yes
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		enable_special_project = {
			name = "PARAGON_GATEWAY_DUDE_REPAIR_PROJECT"
			location = event_target:sharpbeak_fleet
			owner = root
		}
	}
	option = {
		name = "paragon.3003.b"
		trigger = {
			NOT = { has_ethic = ethic_fanatic_xenophile }
		}
		hidden_effect = {
			random_list = {
				20 = {
					modifier = {
						factor = 2
						root = {
							OR = {
								has_civic = civic_warrior_culture
								has_civic = civic_machine_warbots
								has_civic = civic_hive_strength_of_legions
							}
						}
					}
					modifier = {
						factor = 1.5
						root = { is_gestalt = yes }
					}
					modifier = {
						factor = 3
						root = { is_homicidal = yes }
					}
					modifier = {
						factor = 2
						root = { is_xenophobe = yes }
					}
					modifier = {
						factor = 2.5
						root = { is_militarist = yes }
					}
					modifier = {
						factor = 2
						owner_main_species = { has_trait = trait_robot_durable }
					}
					modifier = {
						factor = 1.5
						owner_main_species = { has_trait = trait_strong }
					}
					modifier = {
						factor = 2
						owner_main_species = { has_trait = trait_very_strong }
					}
					modifier = {
						factor = 2
						owner_main_species = { has_trait = trait_juiced_power }
					}
					modifier = {
						factor = 2
						has_origin = origin_clone_army
					}
					country_event = {
						id = paragon.3006 days = 30 random = 30
					}
				}
				80 = {
					modifier = {
						factor = 0.9
						root = {
							OR = {
								has_civic = civic_warrior_culture
								has_civic = civic_machine_warbots
								has_civic = civic_hive_strength_of_legions
							}
						}
					}
					modifier = {
						factor = 0.9
						root = { is_gestalt = yes }
					}
					modifier = {
						factor = 0.8
						root = { is_homicidal = yes }
					}
					modifier = {
						factor = 0.9
						root = { is_xenophobe = yes }
					}
					modifier = {
						factor = 0.9
						root = { is_militarist = yes }
					}
					modifier = {
						factor = 0.8
						owner_main_species = { has_trait = trait_robot_durable }
					}
					modifier = {
						factor = 0.9
						owner_main_species = { has_trait = trait_strong }
					}
					modifier = {
						factor = 0.8
						owner_main_species = { has_trait = trait_very_strong }
					}
					modifier = {
						factor = 0.8
						owner_main_species = { has_trait = trait_juiced_power }
					}
					modifier = {
						factor = 0.8
						has_origin = origin_clone_army
					}
					country_event = {
						id = paragon.3007 days = 30 random = 30
					}
				}
			}
		}
	}
}

country_event = {
	id = paragon.3004
	title = "paragon.3004.name"
	desc = "paragon.3004.desc"
	picture = GFX_evt_skrand_ship
	show_sound = event_yellow_alert
	location = event_target:sharpbeak_fleet
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = attacked_sharpbeak
		}
		has_global_flag = sharpbeak_recruit_phase
	}

	immediate = {
	}

	option = {
		name = "paragon.3004.a"
		hidden_effect = {
			country_event = {
				id = paragon.3005 days = 60 random = 60
			}
		}
	}
}

country_event = {
	id = paragon.3005
	title = "paragon.3005.name"
	desc = "paragon.3005.desc"
	show_sound = par_event_skrand
	location = event_target:sharpbeak_fleet
	picture = GFX_leader_recruitment_bg_legendary_skrand
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = attacked_sharpbeak
		}
		has_global_flag = sharpbeak_recruit_phase
	}

	event_window_type = leader_recruit

	immediate = {
		remove_global_flag = sharpbeak_recruit_phase
	}

	picture_event_data = {
		portrait = event_target:admiral_sharpbeak
		room = galactic_custodian_room
	}

	option = {
		name = paragon.3005.a
		response_text = paragon.3005.a.response
		is_dialog_only = yes
	}
	option = {
		name = paragon.3005.b
		response_text = paragon.3005.b.response
		is_dialog_only = yes
	}
	option = {
		name = paragon.3005.c
		# Special tag to make mark this is the hire option
		custom_tooltip = paragon.3005.c_custom_tooltip
		tag = hire_leader
		sound = "par_skrand_hire"
		event_target:admiral_sharpbeak = {
			set_owner = root
		}
		create_message = {
			type = MESSAGE_RECRUITED_LEADER
			localization =  MESSAGE_RECRUITED_LEADER_DESC
			days = @toast_message_days
			target = event_target:admiral_sharpbeak
			variable = {
				type = name
				localization = LEADER
				scope = event_target:admiral_sharpbeak
			}
			variable = {
				key = "border"
				value = "GFX_border_legendary" 
			}
		}
		event_target:sharpbeak_fleet = {
			set_owner = root
			hidden_effect = {
				set_leader = event_target:admiral_sharpbeak
			}
		}
		event_target:last_talon_ship = {
			set_name = "NAME_LastTalon"
		}
		clear_global_event_target = sharpbeak_country
		clear_global_event_target = sharpbeak_fleet
		solar_system = { remove_star_flag = sharpbeak_starsystem }
		clear_global_event_target = paragon_gateway_dude_homegate
		set_country_flag = skrand_recruited
		hidden_effect = {
			country_event = {
				id = paragon.3095 days = 3600
			}
			random_owned_planet = {
				limit = {
					is_variable_set = paragon_memory_vault
				}
				change_variable = {
					which = paragon_memory_vault
					value = 1
				}
			}
		}
	}
	option = {
		name = paragon.3005.d
		custom_tooltip = paragon.3005.d_custom_tooltip
		# Special tag to mark this as the dismiss option
		tag = dismiss_leader
		set_global_flag = sharpbeak_recruit_phase
		sound = "par_skrand_dismiss"
	}
}

country_event = {
	id = paragon.3006
	title = "paragon.3006.name"
	desc = "paragon.3006.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:sharpbeak_fleet
	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_global_flag = sharpbeak_recruit_phase
	}

	immediate = {
	}

	option = {
		name = paragon.3006.a
		hidden_effect = {
			event_target:sharpbeak_fleet = {
				kill_leader = {
					type = admiral show_notification = no
				}
				set_owner = root
			}
			country_event = {
				id = paragon.3021 days = 360 random = 360
			}
		}
	}
}

country_event = {
	id = paragon.3007
	title = "paragon.3007.name"
	desc = "paragon.3007.desc"
	picture = GFX_evt_small_space_battle
	show_sound = event_red_alert
	location = event_target:sharpbeak_fleet
	is_triggered_only = yes

	trigger = {
		has_global_flag = sharpbeak_recruit_phase
	}

	immediate = {
	}

	option = {
		name = "paragon.3007.a"
		set_country_flag = attacked_sharpbeak
		event_target:sharpbeak_fleet = {
			set_fleet_stance = aggressive
		}
		event_target:sharpbeak_country = {
			set_faction_hostility = {
				target = root.owner
				set_hostile = yes
				set_neutral = no
				set_friendly = no
			}
		}
	}
}

country_event = { #Sickness
	id = paragon.3010
	title = "paragon.3010.name"
	desc = "paragon.3010.desc"
	picture = GFX_evt_disease_outbreak
	show_sound = event_bad_omen
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = skrand_recruited
	}

	immediate = {
		start_situation = {
			type = situation_paragon_skrand_sickness
		}
		start_situation = {
			type = situation_paragon_skrand_cure
		}
	}

	option = {
		name = "paragon.3010.a"
	}	
}

situation_event = { #Cure not found - leader death
	id = paragon.3011
	title = "paragon.3011.name"
	desc = "paragon.3011.desc"
	picture = GFX_evt_space_funeral
	show_sound = event_life_support_fail

	is_triggered_only = yes

	immediate = {
		owner = {
			random_situation = {
				limit = {
					is_situation_type = situation_paragon_skrand_cure
				}
				destroy_situation = this
			}
		}
		owner = {
			event_target:admiral_sharpbeak = {
				kill_leader = {
				}
			}
		}
	}

	option = {
		name = TERRIBLE
		destroy_situation = this
	}
}

situation_event = { #Cure not found step 1
	id = paragon.3012
	title = "paragon.3012.name"
	desc = "paragon.3012.desc"
	picture = GFX_evt_emergency_workers
	show_sound = event_bad_omen

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = UNFORTUNATE
	}
}

situation_event = { #Cure not found step 2
	id = paragon.3013
	title = "paragon.3013.name"
	desc = "paragon.3013.desc"
	picture = GFX_evt_emergency_workers
	show_sound = event_bad_omen

	is_triggered_only = yes

	immediate = {
		event_target:admiral_sharpbeak = {
			remove_trait = trait_ruler_warlike_2
		}
	}

	option = {
		name = WORRYING
	}
}

situation_event = { #Cure not found step 3
	id = paragon.3014
	title = "paragon.3014.name"
	desc = "paragon.3014.desc"
	picture = GFX_evt_emergency_workers
	show_sound = event_bad_omen

	is_triggered_only = yes

	immediate = {
		event_target:admiral_sharpbeak = {
			remove_trait = leader_trait_resilient_2
		}
	}

	option = {
		name = DISCONCERTING
	}
}

situation_event = { #Cure found
	id = paragon.3015
	title = "paragon.3015.name"
	desc = "paragon.3015.desc"
	picture = GFX_evt_microscopic_life

	is_triggered_only = yes

	immediate = {
		owner = {
			random_situation = {
				limit = {
					is_situation_type = situation_paragon_skrand_sickness
				}
				destroy_situation = this
			}
		}
	}

	option = {
		name = EXCELLENT
		destroy_situation = this
	}
}

country_event = { #Get Unique Component - Peaceful, by working with Skrand
	id = paragon.3020
	title = "paragon.3020.name"
	desc = "paragon.3020.desc"
	picture = GFX_evt_engineering_research
	show_sound = event_bad_omen
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = skrand_recruited
		has_modifier = integrated_command
		has_modifier = talon_hull
		event_target:last_talon_ship = { exists = this }
	}

	immediate = {
	}

	option = {
		name = "paragon.3020.a"
		add_research_option = tech_strike_craft_skrand
		add_tech_progress = {
			tech = tech_strike_craft_skrand
			progress = 0.15
		}
	}	
}

country_event = { #Get Unique Component - Aggressive
	id = paragon.3021
	title = "paragon.3021.name"
	desc = "paragon.3021.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_bad_omen
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = skrand_recruited
		event_target:last_talon_ship = { exists = this }
	}

	immediate = {
	}

	option = {
		name = "paragon.3021.a"
		add_research_option = tech_strike_craft_skrand
	}
}

country_event = {
	id = paragon.3030
	title = "paragon.admiral_fight.name" #Should be like this
	desc = "paragon.admiral_fight.desc" #Should be like this
	picture = GFX_evt_assembly_fight
	show_sound = event_administrative_work
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = skrand_recruited
		any_owned_leader = {
			NAND = {
				has_leader_flag = skrand
				is_ruler = no
			}
			leader_class = admiral
		}
	}

	immediate = {
		random_owned_leader = {
			limit = {
				NAND = {
					has_leader_flag = skrand
					is_ruler = no
				}
				leader_class = admiral
			}
			save_global_event_target_as = leader_to_fire_skrand
		}
	}

	option = {
		name = "paragon.admiral_fight.a"
		custom_tooltip = paragon.admiral_fight.a.tt
		event_target:leader_to_fire_skrand = {
			exile_leader_as = bickering_admiral
		}
		hidden_effect = {
			country_event = {
				id = paragon.3031 days = 360 random = 720
			}
			clear_global_event_target = leader_to_fire_skrand
		}
	}

	option = {
		name = "paragon.admiral_fight.b"
		random_owned_leader = {
			limit = {
				has_leader_flag = skrand
			}
			exile_leader_as = skrand_sharpbeak
		}
		hidden_effect = {
			remove_country_flag	= skrand_recruited
			clear_global_event_target = admiral_sharpbeak
			clear_global_event_target = last_talon_ship
			clear_global_event_target = leader_to_fire_skrand
		}
	}
	option = {
		name = "paragon.3030.c"
		allow = {
			resource_stockpile_compare = { resource = unity value >= 10000 }
		}
		add_resource = {
			unity = -10000
		}
		hidden_effect = {
			country_event = {
				id = paragon.3031 days = 360 random = 720
			}
			clear_global_event_target = leader_to_fire_skrand
		}
	}
}

country_event = { #Integrate into command structure
	id = paragon.3031
	title = "paragon.3031.name"
	desc = "paragon.3031.desc"
	picture = GFX_evt_enclave_overlord
	show_sound = event_administrative_work
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = skrand_recruited
	}

	immediate = {
	}

	option = {
		name = "paragon.3031.a"
		custom_tooltip = paragon.situations.tt
		start_situation = {
			type = situation_paragon_skrand_integration
		}
	}	

	option = {
		name = "paragon.3031.b"
		hidden_effect = {
			country_event = {
				id = paragon.3035 days = 30 random = 720
			}
		}
	}	
}

situation_event = { #integrationd finished
	id = paragon.3032
	title = "paragon.3032.name"
	desc = "paragon.3032.desc"
	picture = GFX_evt_hyper_relay_conjunction
	show_sound = event_administrative_work

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = EXCELLENT
		owner = {
			add_modifier = {
				modifier = integrated_command
				days = -1
				}
		}
		destroy_situation = this
	}
}

situation_event = { #integration step 1
	id = paragon.3033
	title = "paragon.3033.name"
	desc = "paragon.3033.desc"
	picture = GFX_evt_partition
	show_sound = event_administrative_work

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = CURIOUS
	}
}

situation_event = { #integration step 2
	id = paragon.3034
	title = "paragon.3034.name"
	desc = "paragon.3034.desc"
	picture = GFX_evt_signing
	show_sound = event_administrative_work

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = EXCELLENT
	}
}

country_event = {
	id = paragon.3035
	title = "paragon.admiral_fight.name"
	desc = "paragon.admiral_fight.desc"
	picture = GFX_evt_assembly_fight
	show_sound = event_administrative_work
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = skrand_recruited
		any_owned_leader = {
			NAND = {
				has_leader_flag = skrand
				is_ruler = no
			}
			leader_class = admiral
		}
	}

	immediate = {
		random_owned_leader = {
			limit = {
				NAND = {
					has_leader_flag = skrand
					is_ruler = no
				}
				leader_class = admiral
			}
			save_global_event_target_as = leader_to_fire_skrand
		}
	}

	option = {
		name = "paragon.admiral_fight.a"
		custom_tooltip = paragon.admiral_fight.a.tt
		event_target:leader_to_fire_skrand = {
			exile_leader_as = bickering_admiral
		}
		hidden_effect = {
			country_event = {
				id = paragon.3036 days = 360 random = 1080
			}
			clear_global_event_target = leader_to_fire_skrand
		}
	}

	option = {
		name = "paragon.admiral_fight.b"
		random_owned_leader = {
			limit = {
				has_leader_flag = skrand
			}
			exile_leader_as = skrand_sharpbeak
		}
		hidden_effect = {
			remove_country_flag	= skrand_recruited
			clear_global_event_target = admiral_sharpbeak
			clear_global_event_target = last_talon_ship
			clear_global_event_target = leader_to_fire_skrand
		}
	}

	option = {
		name = "paragon.admiral_fight.c"
		start_situation = {
			type = situation_paragon_skrand_integration
		}
	}
}

country_event = {
	id = paragon.3036
	title = "paragon.3036.name"
	desc = "paragon.admiral_fight.desc"
	picture = GFX_evt_assembly_fight
	show_sound = event_administrative_work
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = skrand_recruited
		any_owned_leader = {
			NAND = {
				has_leader_flag = skrand
				is_ruler = no
			}
			leader_class = admiral
		}
	}

	immediate = {
		random_owned_leader = {
			limit = {
				NAND = {
					has_leader_flag = skrand
					is_ruler = no
				}
				leader_class = admiral
			}
			save_global_event_target_as = leader_to_fire_skrand
		}
	}

	option = {
		name = "paragon.admiral_fight.a"
		custom_tooltip = paragon.3036.a.tt
		event_target:leader_to_fire_skrand = {
			exile_leader_as = bickering_admiral
		}
		hidden_effect = {
			clear_global_event_target = leader_to_fire_skrand
		}
	}

	option = {
		name = "paragon.admiral_fight.b"
		random_owned_leader = {
			limit = {
				has_leader_flag = skrand
			}
			exile_leader_as = skrand_sharpbeak
		}
		hidden_effect = {
			remove_country_flag	= skrand_recruited
			clear_global_event_target = admiral_sharpbeak
			clear_global_event_target = last_talon_ship
			clear_global_event_target = leader_to_fire_skrand
		}
	}
}

country_event = { #Upgrading
	id = paragon.3040
	title = "paragon.3040.name"
	desc = "paragon.3040.desc"
	picture = GFX_evt_engineering_research
	show_sound = event_construction
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = skrand_recruited
		has_country_flag = studied_talon
		event_target:last_talon_ship = { exists = this }
	}

	immediate = {
	}

	option = {
		name = "paragon.3040.a"
		custom_tooltip = paragon.situations.tt
		start_situation = {
			type = situation_paragon_skrand_upgrade
		}
	}	

	option = {
		name = "paragon.3040.b"
	}
}

situation_event = { #upgrade finished
	id = paragon.3041
	title = "paragon.3041.name"
	desc = "paragon.3041.desc"
	picture = GFX_evt_engineering_bay
	show_sound = event_construction

	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = talon_upgraded
		}
	}

	option = {
		name = EXCELLENT
		event_target:last_talon_ship = {
			add_modifier = { modifier = "talon_power" days = -1 }
		}
		owner = {
			add_modifier = {
				modifier = talon_armor
				days = -1
				}
		}
		destroy_situation = this
		hidden_effect = {
			clear_global_event_target = last_talon_ship
		}
	}
}

situation_event = { #upgrade step 1
	id = paragon.3042
	title = "paragon.3042.name"
	desc = "paragon.3042.desc"
	picture = GFX_evt_decryption
	show_sound = event_construction

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = INTERESTING
	}
}

situation_event = { #upgrade step 2
	id = paragon.3043
	title = "paragon.3043.name"
	desc = "paragon.3043.desc"
	picture = GFX_evt_ship_offloading_cargo
	show_sound = event_construction

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = UNFORTUNATE
		add_situation_progress = -5
	}
}

country_event = { #Crisis
	id = paragon.3050
	title = "paragon.3050.name"
	desc = "paragon.3050.desc"
	show_sound = event_bad_omen
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = skrand_recruited
		has_crisis = yes
	}
	
	diplomatic = yes

	immediate = {
	}

	picture_event_data = {
		portrait = paragon02 #sharpbeak_portrait
		room = paragon_skrand_room
	}

	option = {
		name = paragon.3050.a
		response_text = paragon.3050.a.response
		is_dialog_only = yes
	}
	option = {
		name = paragon.3050.b
		response_text = paragon.3050.b.response
		is_dialog_only = yes
	}
	option = {
		name = paragon.3050.c
		response_text = paragon.3050.c.response
		custom_tooltip = paragon.situations.tt
		start_situation = {
			type = situation_paragon_skrand_crisis
		}
	}
	option = {
		name = paragon.3050.d
		response_text = paragon.3050.d.response
	}
}

situation_event = { #crisis study finished
	id = paragon.3051
	title = "paragon.3051.name"
	desc = "paragon.3051.desc"
	picture = GFX_evt_crisis_declared
	show_sound = event_laboratory_sound

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = EXCELLENT
		owner = {
			add_modifier = {
				modifier = crisis_studied
				days = -1
				}
		}
		destroy_situation = this
	}
}

situation_event = { #crisis study step 1
	id = paragon.3052
	title = "paragon.3052.name"
	desc = "paragon.3052.desc"
	picture = GFX_evt_society_cache
	show_sound = event_laboratory_sound

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = INTERESTING
	}
}

situation_event = { #crisis study step 2
	id = paragon.3053
	title = "paragon.3053.name"
	desc = "paragon.3053.desc"
	picture = GFX_evt_physics_cache
	show_sound = event_laboratory_sound

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = INTERESTING
	}
}

country_event = { #Study the Talon
	id = paragon.3060
	title = "paragon.3060.name"
	desc = "paragon.3060.desc"
	picture = GFX_evt_space_station
	show_sound = event_construction
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = skrand_recruited
		event_target:last_talon_ship = { exists = this }
	}

	immediate = {
	}

	option = {
		name = "paragon.3060.a"
		custom_tooltip = paragon.situations.tt
		start_situation = {
			type = situation_paragon_skrand_study
		}
	}	

	option = {
		name = "paragon.3060.b"
	}	
}

situation_event = { #study talon finished
	id = paragon.3061
	title = "paragon.3061.name"
	desc = "paragon.3061.desc"
	picture = GFX_evt_space_hangar
	show_sound = event_construction

	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = studied_talon
		}
	}

	option = {
		name = EXCELLENT
		owner = {
			add_modifier = {
				modifier = talon_hull
				days = -1
				}
		}
		destroy_situation = this
	}
}

country_event = { #Rebuild the Talon
	id = paragon.3070
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = skrand_recruited
		has_country_flag = studied_talon
		fromfrom = {
			has_ship_flag = last_talon
		}
	}

	immediate = {
		random_list = {
			80 = {
				country_event = {
					id = paragon.3072 days = 10 random = 20
				}
			}
			20 = { }
		}
	}
}

situation_event = { #rebuild talon finished
	id = paragon.3071
	title = "paragon.3071.name"
	desc = "paragon.3071.desc"
	picture = GFX_evt_space_hangar
	show_sound = event_celebration

	is_triggered_only = yes

	immediate = {
		owner = {
			owner = {
				country_event = { id = paragon.3073 }
			}
		}
	}

	option = {
		name = EXCELLENT
		destroy_situation = this
	}
}

country_event = {
	id = paragon.3072
	title = "paragon.3072.name"
	desc = "paragon.3072.desc"
	picture = GFX_evt_space_hangar

	is_triggered_only = yes

	trigger = {
		has_country_flag = skrand_recruited
		has_country_flag = studied_talon
	}

	immediate = {
	}

	option = {
		name = "paragon.3072.a"
		start_situation = {
			type = situation_paragon_skrand_rebuild
		}
	}

	option = {
		name = "paragon.3072.b"
		add_resource = {
			alloys = 20000
		}
	}
}

country_event = { #spawning the talon - it's easier with a different event
	id = paragon.3073
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		create_fleet = {
			name = "NAME_WingsOfGlory2"
			effect = {
				set_owner = root
				create_ship = {
					name = "NAME_LastTalon"
					design = "NAME_FirstClaw"
					graphical_culture = "npf_01"
					upgradable = no
				}
				last_created_ship = {
					set_ship_flag = last_talon
					if = {
						limit = {
							owner = {
								has_country_flag = talon_upgraded
							}
						}
						add_modifier = { modifier = "talon_power" days = -1 }
					}
				}
				set_location = {
					target = owner.capital_scope
					distance = 10
					angle = random
				}
			}
			settings = {
				can_upgrade = yes
				can_change_composition = yes
				can_change_leader = yes
				spawn_debris = no
			}
		}
	}
}

country_event = { #Rebuild Skrand species
	id = paragon.3080
	title = "paragon.3080.name"
	desc = "paragon.3080.desc"
	picture = GFX_evt_genetic_modification
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = skrand_recruited
		has_ascension_perk = ap_engineered_evolution
		AND = {
			has_policy_flag = purge_not_allowed
			has_policy_flag = slavery_not_allowed
		}
	}

	immediate = {
	}

	option = {
		name = "paragon.3080.a"
		custom_tooltip = paragon.situations.tt
		start_situation = {
			type = situation_paragon_skrand_species
		}
	}

	option = {
		name = "paragon.3080.b"
	}	
}

situation_event = { #Rebuild Skrand species finished
	id = paragon.3081
	title = "paragon.3081.name"
	desc = "paragon.3081.desc"
	picture = GFX_evt_society_research
	show_sound = event_laboratory_sound

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = EXCELLENT
		custom_tooltip = paragon.3081.tt
		create_species = {
			name = "NAME_Skrand_Species"
			plural = "NAME_Skrand_Species_P"
			class = AVI
			portrait = "avi6"
			namelist = "AVI2"
			traits = {
				trait = "trait_presapient_starborn"
				trait = "trait_survivor"
				trait = "trait_nomadic"
			}
			homeworld = owner.capital_scope
		}
		hidden_effect = {
			owner = {
				country_event = {
					id = paragon.3083 days = 10 random = 10
				}
			}
			owner.capital_scope = {
				create_pop = {
					species = last_created_species
				}
			}
		}
		destroy_situation = this
	}
}

situation_event = { #Rebuild Skrand species step 1
	id = paragon.3082
	title = "paragon.3082.name"
	desc = "paragon.3082.desc"
	picture = GFX_evt_society_research
	show_sound = event_laboratory_sound

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = WORRYING
	}
}

country_event = { #Rebuild Skrand species finished - diplo window
	id = paragon.3083
	title = "paragon.3083.name"
	desc = "paragon.3083.desc"
	fire_only_once = yes
	
	diplomatic = yes

	is_triggered_only = yes

	trigger = {
		has_country_flag = skrand_recruited
	}

	immediate = {
	}

	picture_event_data = {
		portrait = paragon02 #sharpbeak_portrait
		room = paragon_skrand_room
	}

	option = {
		name = paragon.3083.a
		response_text = paragon.3083.a.response
	}
}

country_event = { #Uncover the story - start
	id = paragon.3090
	title = "paragon.3090.name"
	desc = "paragon.3090.desc"
	picture = GFX_evt_decryption
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = skrand_recruited
	}

	immediate = {
	}

	option = {
		name = "paragon.3090.a"
		custom_tooltip = paragon.situations.tt
		start_situation = {
			type = situation_paragon_skrand_story
		}
	}	

	option = {
		name = "paragon.3090.b"
	}
}

situation_event = { #Uncover the story - part 1
	id = paragon.3091
	title = "paragon.3091.name"
	desc = "paragon.3091.desc"
	picture = GFX_evt_partition
	show_sound = event_crystal_ship

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = FASCINATING
	}
}

situation_event = { #Uncover the story - part 2
	id = paragon.3092
	title = "paragon.3092.name"
	desc = "paragon.3092.desc"
	picture = GFX_evt_death_from_above
	show_sound = event_space_battle

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = FASCINATING
	}
}

situation_event = { #Uncover the story - part 3
	id = paragon.3093
	title = "paragon.3093.name"
	desc = "paragon.3093.desc"
	picture = GFX_evt_space_hangar
	show_sound = event_construction

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = FASCINATING
	}
}

situation_event = { #Uncover the story - ending
	id = paragon.3094
	title = "paragon.3094.name"
	desc = "paragon.3094.desc"
	picture = GFX_evt_l-gateway
	show_sound = event_finding_loot

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = FASCINATING
		owner = {
			add_modifier = {
				modifier = skrand_story
				days = -1
				}
		}
		destroy_situation = this
	}
}

country_event = { #UTILITY - Skrand Event Launcher
	id = paragon.3095
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		has_country_flag = skrand_recruited
	}

	immediate = {
		fire_on_action = { on_action = on_decade_pulse_skrand_country }
		country_event = {
			id = paragon.3095 days = 3600 random = 5400
		}
	}
}

####################################
# Exakeides / 4th Legendary Leader #
####################################

ship_event = { #Distress Signal
	id = paragon.3100
	title = "paragon.3100.name"
	desc = "paragon.3100.desc"
	picture = GFX_evt_frozen
	show_sound = event_finding_loot
	location = event_target:exakeides_planet

	is_triggered_only = yes

	trigger = {
		FROM = { has_star_flag = legendary_leader_spawn_system }
		NOT = { has_global_flag = frozen_legendary_leader_found }
		exists = event_target:exakeides_planet
	}

	immediate = {
		FROM = {
			random_system_planet = {
				limit = { has_planet_flag = legendary_leader_meet_point }
				save_global_event_target_as = spawn_point_legendary_leader
			}
		}
	}

	option = {
		name = paragon.3100.a
		owner = {
			enable_special_project = {
				name = "LEGENDARY_LEADER_FIRST_PROJECT"
				location = event_target:spawn_point_legendary_leader
				owner = this
			}
		}
	}

	option = {
		name = paragon.3100.b
	}
}

country_event = { #Found cryostasis capsule
	id = paragon.3104
	title = "paragon.3104.name"
	desc = "paragon.3104.desc"
	picture = GFX_evt_outpost
	show_sound = event_finding_loot
	fire_only_once = yes
	location = event_target:exakeides_planet

	is_triggered_only = yes

	trigger = {
		exists = event_target:exakeides_planet
	}

	immediate = {
		set_global_flag = frozen_legendary_leader_found
		every_country = {
			limit = { has_special_project = LEGENDARY_LEADER_FIRST_PROJECT }
			abort_special_project = { type = LEGENDARY_LEADER_FIRST_PROJECT location = event_target:spawn_point_legendary_leader }
		}
		clear_global_event_target = spawn_point_legendary_leader
	}

	option = { #Resuscitate leader
		name = paragon.3104.a
		capital_scope = {
			enable_special_project = {
				name = "LEGENDARY_LEADER_RESUSCITATION"
				location = this
				owner = root
			}
		}
	}
}

country_event = { #Got the Leader
	id = paragon.3105
	title = "paragon.3105.name"
	desc = "paragon.3105.desc"
	picture = GFX_evt_outpost
	show_sound = event_finding_loot
	fire_only_once = yes
	location = event_target:exakeides_planet

	is_triggered_only = yes

	trigger = {
		exists = event_target:exakeides_planet
	}

	immediate = {
		set_global_flag = frozen_legendary_leader_found
		every_country = {
			limit = { has_special_project = LEGENDARY_LEADER_FIRST_PROJECT }
			abort_special_project = { type = LEGENDARY_LEADER_FIRST_PROJECT location = event_target:spawn_point_legendary_leader }
		}
		clear_global_event_target = spawn_point_legendary_leader
	}

	option = { #Take leader
		name = paragon.3105.a
		trigger = {
			NOR = {
				is_homicidal = yes
				is_gestalt = yes
			}
		}
		capital_scope = {
			enable_special_project = {
				name = "LEGENDARY_LEADER_STUDY_RELIC_PROJECT"
				location = this
				owner = root
			}
		}
		country_event = {
			id = paragon.3114 days = 3600
		}
		add_relic = r_wormhole_key_fragment_1
	}
	option = { #Dismiss the leader
		name = paragon.3105.b
		capital_scope = {
			enable_special_project = {
				name = "LEGENDARY_LEADER_STUDY_RELIC_PROJECT"
				location = this
				owner = root
			}
		}
		add_relic = r_wormhole_key_fragment_1
	}

	after = {
		clear_global_event_target = exakeides_planet
	}
}

country_event = { #Relic Study
	id = paragon.3110
	title = "paragon.3110.name"
	desc = "paragon.3110.desc"
	picture = GFX_evt_rare_tech_cache
	show_sound = event_finding_loot
	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = UNFORTUNATE
	}
}

country_event = { #Leader grows - 10 yo
	id = paragon.3114
	title = "paragon.3114.name"
	desc = "paragon.3114.desc"
	picture = GFX_evt_board_meeting
	show_sound = par_event_keides
	fire_only_once = yes

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = paragon.3114.a
		trigger = { is_xenophile = yes }
		set_global_flag = leader_raised_xenophile
	}
	option = {
		name = paragon.3114.b
		trigger = { is_xenophobe = yes }
		set_global_flag = leader_raised_xenophobe
	}
	option = {
		name = paragon.3114.c
		trigger = { is_pacifist = yes }
		set_global_flag = leader_raised_pacifist
	}
	option = {
		name = paragon.3114.d
		trigger = { is_militarist = yes }
		set_global_flag = leader_raised_militarist
	}
	option = {
		name = paragon.3114.e
		trigger = { is_egalitarian = yes }
		set_global_flag = leader_raised_egalitarian
	}
	option = {
		name = paragon.3114.f
		trigger = { is_authoritarian = yes }
		set_global_flag = leader_raised_authoritarian
	}
	option = {
		name = paragon.3114.g
		trigger = { is_spiritualist = yes }
		set_global_flag = leader_raised_spiritualist
	}
	option = {
		name = paragon.3114.h
		trigger = { is_materialist = yes }
		set_global_flag = leader_raised_materialist
	}

	after = {
		country_event = { id = paragon.3115 days = 3600 }
	}
}

country_event = { # Create Exakeides - 20 yo
	id = paragon.3115
	title = "paragon.3115.name"
	desc = "paragon.3115.desc"
	picture = GFX_evt_board_meeting
	show_sound = par_event_keides
	fire_only_once = yes
	is_triggered_only = yes
	event_window_type = leader_story
	event_picture_background = "GFX_leader_recruitment_bg_legendary_keides"

	immediate = {
		random_system = {
			limit = { has_star_flag = legendary_leader_1st_system }
			save_event_target_as = 1st_system_legendary
		}
		random_system = {
			limit = { has_star_flag = legendary_leader_2nd_system }
			save_event_target_as = 2nd_system_legendary
		}
		random_system = {
			limit = { has_star_flag = legendary_leader_3rd_system }
			save_event_target_as = 3rd_system_legendary
		}

		create_country = {
			name = "NAME_Unknown"
			type = global_event
			auto_delete = yes
			flag = {
				icon = {
					category = "special"
					file = "unknown.dds"
				}
				background = {
					category = "backgrounds"
					file = "00_solid.dds"
				}
				colors = {
					"red"
					"red"
					"null"
					"null"
				}
			}
			effect = {
				save_event_target_as = keides_country
			}
		}
		event_target:keides_country = {
			create_species = {
				name = "NAME_Unknown"
				class = HUM
				portrait = paragon_exakeides_artifact_1 #Exakeides portrait
				namelist = "PRT1"
				traits = {
					trait = "trait_enduring"
					trait = "trait_quick_learners"
					trait = "trait_erudite"
				}
				effect = {
					save_event_target_as = exakeides_species
				}
			}
			create_leader = {
				class = scientist
				species = event_target:exakeides_species
				name = "NAME_Exakeides"
				skill = 1
				gender = male
				event_leader = yes
				skip_background_generation = yes
				custom_catch_phrase = keides_catch_phrase
				custom_description = desc_exakeides
				set_age = 20
				effect = {
					set_leader_flag = legendary_leader
					set_leader_flag = exakeides
					set_leader_flag = immune_to_negative_traits
					save_global_event_target_as = legendary_lost_leader
					add_trait_no_notify = leader_trait_legendary_far_from_home
					set_owner = root
					exile_leader_as = legendary_lost_leader
				}
			}
		}
	}

	picture_event_data = {
		portrait = event_target:legendary_lost_leader
		room = galactic_custodian_room
	}

	option = {
		name = paragon.3115.a
		hidden_effect = { country_event = { id = paragon.3116 } }
	}
}

country_event = { # HIRE/DISMISS Exakeides
	id = paragon.3116
	title = "paragon.3116.name"
	desc = "paragon.3116.desc"
	diplomatic = yes
	fire_only_once = yes
	is_triggered_only = yes
	show_sound = par_event_keides
	
	picture = GFX_leader_recruitment_bg_legendary_keides
	event_window_type = leader_recruit
	
	picture_event_data = {
		portrait = event_target:legendary_lost_leader
		room = galactic_custodian_room
	}

	trigger = {
		exists = event_target:legendary_lost_leader
	}
	
	option = {
		# Special tag to make mark this is the hire option
		name = HIRE
		tag = hire_leader
		sound = "par_keides_hire"

		hidden_effect = {
			clone_leader = {
				target = event_target:legendary_lost_leader
			}
			last_created_leader = {
				set_leader_flag = exakeides
				set_leader_flag = legendary_leader
				save_global_event_target_as = legendary_lost_leader
				set_leader_flag = immune_to_negative_traits
				add_trait_no_notify = leader_trait_legendary_far_from_home
				set_owner = root
			}
			switch = {
				trigger = has_global_flag
				leader_raised_xenophile = {
					event_target:legendary_lost_leader = { change_background_ethic = ethic_xenophile }
				}
				leader_raised_xenophobe = {
					event_target:legendary_lost_leader = { change_background_ethic = ethic_xenophobe }
				}
				leader_raised_militarist = {
					event_target:legendary_lost_leader = { change_background_ethic = ethic_militarist }
				}
				leader_raised_pacifist = {
					event_target:legendary_lost_leader = { change_background_ethic = ethic_pacifist }
				}
				leader_raised_egalitarian = {
					event_target:legendary_lost_leader = { change_background_ethic = ethic_egalitarian }
				}
				leader_raised_authoritarian = {
					event_target:legendary_lost_leader = { change_background_ethic = ethic_authoritarian }
				}
				leader_raised_spiritualist = {
					event_target:legendary_lost_leader = { change_background_ethic = ethic_spiritualist }
				}
				leader_raised_materialist = {
					event_target:legendary_lost_leader = { change_background_ethic = ethic_materialist }
				}
			}

			random_owned_planet = {
				limit = {
					is_variable_set = paragon_memory_vault
				}
				change_variable = {
					which = paragon_memory_vault
					value = 1
				}
			}
			country_event = { id = paragon.3117 days = 60 random = 60 }
		}
		
		create_message = {
			type = MESSAGE_RECRUITED_LEADER
			localization =  MESSAGE_RECRUITED_LEADER_DESC
			days = @toast_message_days
			target = event_target:legendary_lost_leader
			variable = {
				type = name
				localization = LEADER
				scope = event_target:legendary_lost_leader
			}
			variable = {
				key = "border"
				value = "GFX_border_legendary" 
			}
		}
	}

	option = {
		name = DISMISS
		# Special tag to mark this as the dismiss option
		tag = dismiss_leader
		sound = "par_keides_dismiss"

		hidden_effect = {
			event_target:legendary_lost_leader = {
				kill_leader = { show_notification = no }
			}
		}
	}

	option = {
		name = paragon.3116.a
		response_text = paragon.3116.a.response
		is_dialog_only = yes
	}
	option = {
		name = paragon.3116.b
		response_text = paragon.3116.b.response
		is_dialog_only = yes
	}
	option = {
		name = paragon.3116.c
		response_text = paragon.3116.c.response
		is_dialog_only = yes
	}
}

country_event = { # Visions of the past
	id = paragon.3117
	title = "paragon.3117.name"
	desc = "paragon.3117.desc"
	fire_only_once = yes
	is_triggered_only = yes
	show_sound = par_event_keides
	picture = GFX_evt_analyzing_artifacts
	
	event_window_type = leader_story
	event_picture_background = "GFX_leader_recruitment_bg_legendary_keides"

	picture_event_data = {
		portrait = event_target:legendary_lost_leader
	}

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	immediate = {
		random_system = {
			limit = { has_star_flag = legendary_leader_1st_system }
			save_event_target_as = 1st_system_legendary
		}
		random_system = {
			limit = { has_star_flag = legendary_leader_2nd_system }
			save_event_target_as = 2nd_system_legendary
		}
		random_system = {
			limit = { has_star_flag = legendary_leader_3rd_system }
			save_event_target_as = 3rd_system_legendary
		}
		set_visited = event_target:1st_system_legendary
		set_visited = event_target:2nd_system_legendary
		set_visited = event_target:3rd_system_legendary
	}

	option = {
		name = CURIOUS
		begin_event_chain = {
			event_chain = paragon_legendary_leader_chain
			target = root
		}
		create_point_of_interest = {
			id = legendary_leader_system.1
			name = "legendary_leader_system_1"
			desc = "legendary_leader_system_1_desc"
			event_chain = "paragon_legendary_leader_chain"
			location = event_target:1st_system_legendary
		}
		create_point_of_interest = {
			id = legendary_leader_system.2
			name = "legendary_leader_system_2"
			desc = "legendary_leader_system_2_desc"
			event_chain = "paragon_legendary_leader_chain"
			location = event_target:3rd_system_legendary
		}
		create_point_of_interest = {
			id = legendary_leader_system.3
			name = "legendary_leader_system_3"
			desc = "legendary_leader_system_3_desc"
			event_chain = "paragon_legendary_leader_chain"
			location = event_target:2nd_system_legendary
		}
	}
}

ship_event = { #Entering Unstable Planet System
	id = paragon.3120
	title = "paragon.3120.name"
	desc = "paragon.3120.desc"
	picture = GFX_evt_scholarium_anomaly
	show_sound = par_event_keides
	fire_only_once = yes
	location = event_target:spawn_point_project

	is_triggered_only = yes

	trigger = {
		FROMFROM = {
			NOT = { has_country_flag = leader_visited_1st_system }
			any_owned_leader = { has_trait = leader_trait_legendary_far_from_home }
		}
		FROM = { has_star_flag = legendary_leader_1st_system }
	}

	immediate = {
		FROMFROM = {
			set_country_flag = leader_visited_1st_system
		}
		FROM = {
			random_system_planet = {
				limit = { has_planet_flag = legendary_leader_1st_planet }
				save_event_target_as = spawn_point_project
			}
		}
	}

	option = {
		name = paragon.3120.a
		FROM = {
			enable_special_project = {
				name = "LEGENDARY_LEADER_VOLCANO_PLANET_PROJECT"
				location = event_target:spawn_point_project
				owner = fromfrom
			}
		}
		hidden_effect = {
			owner = { remove_point_of_interest = legendary_leader_system.1 }
		}
	}
}

country_event = { #Finished Project Unstable Planet
	id = paragon.3121
	title = "paragon.3121.name"
	desc = "paragon.3121.desc"
	picture = GFX_evt_molten
	show_sound = par_event_keides
	fire_only_once = yes
	location = from

	is_triggered_only = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	immediate = {
		remove_point_of_interest = legendary_leader_system.1
	}

	option = {
		name = paragon.3121.a
		country_event = {
			id = paragon.3122
		}
		add_event_chain_counter = {
			event_chain = paragon_legendary_leader_chain
			counter = planets_studied
			amount = 1
		}
	}
}

country_event = { #Unstable Planet Vision
	id = paragon.3122
	title = "paragon.3122.name"
	desc = "paragon.3122.desc"
	picture = GFX_evt_surreal_visions
	show_sound = par_event_keides
	fire_only_once = yes
	is_triggered_only = yes
	event_window_type = leader_story
	event_picture_background = "GFX_leader_recruitment_bg_legendary_keides"
	
	picture_event_data = {
		portrait = event_target:legendary_lost_leader
	}

	trigger = {
		exists = event_target:legendary_lost_leader
	}
	event_window_type = leader_story
	event_picture_background = "GFX_leader_recruitment_bg_legendary_keides"

	picture_event_data = {
		portrait = event_target:legendary_lost_leader
	}

	immediate = {
		country_event = { id = paragon.3123 }
	}

	option = {
		name = paragon.3122.a
		if = {
			limit = {
				has_completed_event_chain_counter = {
					event_chain = paragon_legendary_leader_chain
					counter = planets_studied
				}
			}
			country_event = { id = paragon.3135 }
			end_event_chain = paragon_legendary_leader_chain
		}
	}
}

ship_event = { #Entering Hostile System
	id = paragon.3125
	title = "paragon.3125.name"
	desc = "paragon.3125.desc"
	picture = GFX_evt_scholarium_anomaly
	show_sound = par_event_keides
	fire_only_once = yes
	location = event_target:spawn_point_project

	is_triggered_only = yes

	trigger = {
		FROMFROM = {
			NOT = { has_country_flag = leader_visited_3rd_system }
			any_owned_leader = { has_trait = leader_trait_legendary_far_from_home }
		}
		FROM = { has_star_flag = legendary_leader_3rd_system }
	}

	immediate = {
		FROMFROM = {
			set_country_flag = leader_visited_3rd_system
		}
		FROM = {
			random_system_planet = {
				limit = { has_planet_flag = legendary_leader_3rd_planet }
				save_event_target_as = spawn_point_project
			}
		}
	}

	option = {
		name = paragon.3125.a
		FROM = {
			enable_special_project = {
				name = "LEGENDARY_LEADER_HOSTILE_PLANET_PROJECT"
				location = event_target:spawn_point_project
				owner = fromfrom
			}
		}
		hidden_effect = {
			owner = { remove_point_of_interest = legendary_leader_system.2 }
		}
	}
}

country_event = { #Finished Project Hostile Planet
	id = paragon.3126
	title = "paragon.3126.name"
	desc = "paragon.3126.desc"
	picture = GFX_evt_aggressive_flora
	show_sound = par_event_keides
	fire_only_once = yes
	location = from

	is_triggered_only = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	option = {
		name = paragon.3126.a
		country_event = {
			id = paragon.3127
		}
		add_event_chain_counter = {
			event_chain = paragon_legendary_leader_chain
			counter = planets_studied
			amount = 1
		}
	}
}

country_event = { #Hostile Planet Vision
	id = paragon.3127
	title = "paragon.3127.name"
	desc = "paragon.3127.desc"
	picture = GFX_evt_surreal_visions
	show_sound = par_event_keides
	fire_only_once = yes
	is_triggered_only = yes
	event_window_type = leader_story
	event_picture_background = "GFX_leader_recruitment_bg_legendary_keides"
	
	picture_event_data = {
		portrait = event_target:legendary_lost_leader
	}

	trigger = {
		exists = event_target:legendary_lost_leader
	}
	event_window_type = leader_story
	event_picture_background = "GFX_leader_recruitment_bg_legendary_keides"

	picture_event_data = {
		portrait = event_target:legendary_lost_leader
	}

	immediate = {
		country_event = { id = paragon.3123 }
	}

	option = {
		name = paragon.3127.a
		if = {
			limit = {
				has_completed_event_chain_counter = {
					event_chain = paragon_legendary_leader_chain
					counter = planets_studied
				}
			}
			country_event = { id = paragon.3135 }
			end_event_chain = paragon_legendary_leader_chain
		}
	}
}

ship_event = { #Entering Ship Graveyard System
	id = paragon.3130
	title = "paragon.3130.name"
	desc = "paragon.3130.desc"
	picture = GFX_evt_scholarium_anomaly
	show_sound = par_event_keides
	fire_only_once = yes
	location = event_target:spawn_point_project

	is_triggered_only = yes

	trigger = {
		FROMFROM = {
			NOT = { has_country_flag = leader_visited_2nd_system }
			any_owned_leader = { has_trait = leader_trait_legendary_far_from_home }
		}
		FROM = { has_star_flag = legendary_leader_2nd_system }
	}

	immediate = {
		FROMFROM = {
			set_country_flag = leader_visited_2nd_system
		}
		FROM = {
			random_system_planet = {
				limit = { has_planet_flag = legendary_leader_2nd_planet }
				save_event_target_as = spawn_point_project
			}
		}
	}

	option = {
		name = paragon.3130.a
		FROM = {
			enable_special_project = {
				name = "LEGENDARY_LEADER_SHIP_PLANET_PROJECT"
				location = event_target:spawn_point_project
				owner = fromfrom
			}
		}
		hidden_effect = {
			owner = { remove_point_of_interest = legendary_leader_system.3 }
		}
	}
}

country_event = { #Finished Project Graveyard Planet
	id = paragon.3131
	title = "paragon.3131.name"
	desc = "paragon.3131.desc"
	picture = GFX_evt_relic_shipyard
	show_sound = par_event_keides
	fire_only_once = yes
	location = from

	is_triggered_only = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	option = {
		name = paragon.3131.a
		country_event = {
			id = paragon.3132
		}
		add_event_chain_counter = {
			event_chain = paragon_legendary_leader_chain
			counter = planets_studied
			amount = 1
		}
	}
}

country_event = { #Graveyard Planet Vision
	id = paragon.3132
	title = "paragon.3132.name"
	desc = "paragon.3132.desc"
	picture = GFX_evt_surreal_visions
	fire_only_once = yes
	is_triggered_only = yes
	show_sound = par_event_keides
	event_window_type = leader_story
	event_picture_background = "GFX_leader_recruitment_bg_legendary_keides"
	
	picture_event_data = {
		portrait = event_target:legendary_lost_leader
	}

	trigger = {
		exists = event_target:legendary_lost_leader
	}
	event_window_type = leader_story
	event_picture_background = "GFX_leader_recruitment_bg_legendary_keides"

	picture_event_data = {
		portrait = event_target:legendary_lost_leader
	}

	immediate = {
		country_event = { id = paragon.3123 }
	}

	option = {
		name = paragon.3132.a
		if = {
			limit = {
				has_completed_event_chain_counter = {
					event_chain = paragon_legendary_leader_chain
					counter = planets_studied
				}
			}
			country_event = { id = paragon.3135 }
			end_event_chain = paragon_legendary_leader_chain
		}
	}
}

country_event = { # Update relic
	id = paragon.3123
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		switch = {
			trigger = has_relic
			r_wormhole_key_fragment_4 = {
				remove_relic = r_wormhole_key_fragment_4
				add_relic = r_wormhole_key
				event_target:legendary_lost_leader = { change_leader_portrait = paragon_exakeides_artifact_5 }
				
			}
			r_wormhole_key_fragment_3 = {
				remove_relic = r_wormhole_key_fragment_3
				add_relic = r_wormhole_key_fragment_4
				event_target:legendary_lost_leader = { change_leader_portrait = paragon_exakeides_artifact_4 }
			}
			r_wormhole_key_fragment_2 = {
				remove_relic = r_wormhole_key_fragment_2
				add_relic = r_wormhole_key_fragment_3
				event_target:legendary_lost_leader = { change_leader_portrait = paragon_exakeides_artifact_3 }
			}
			r_wormhole_key_fragment_1 = {
				remove_relic = r_wormhole_key_fragment_1
				add_relic = r_wormhole_key_fragment_2
				event_target:legendary_lost_leader = { change_leader_portrait = paragon_exakeides_artifact_2 }
			}
		}
	}
}

country_event = { #Relic Made Whole Again Vision and spawn project
	id = paragon.3135
	title = "paragon.3135.name"
	desc = "paragon.3135.desc"
	picture = GFX_evt_l-gateway
	show_sound = par_event_keides
	fire_only_once = yes
	is_triggered_only = yes

	event_window_type = leader_story
	event_picture_background = "GFX_leader_recruitment_bg_legendary_keides"

	picture_event_data = {
		portrait = event_target:legendary_lost_leader
	}

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	immediate = {
		random_system = {
			spawn_system = {
				min_distance = 10
				max_distance = 30
				max_jumps = 0
				initializer = "legendary_leader_last_site"
				hyperlane = no
				is_discovered = yes
			}
		}
	}

	option = {
		name = paragon.3135.a
		capital_scope = {
			enable_special_project = {
				name = "LEGENDARY_LEADER_OPEN_WORMHOLE_PROJECT"
				location = this
				owner = root
			}
		}
	}
}

country_event = { #Relic research project completed
	id = paragon.3140
	title = "paragon.3140.name"
	desc = "paragon.3140.desc"
	picture = GFX_evt_analyzing_artifacts
	show_sound = par_event_keides
	fire_only_once = yes
	is_triggered_only = yes
	location = capital_scope

	event_window_type = leader_story
	event_picture_background = "GFX_leader_recruitment_bg_legendary_keides"

	picture_event_data = {
		portrait = event_target:legendary_lost_leader
	}

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	immediate = {
		# Update relic
		hidden_effect = {
			country_event = { id = paragon.3123 }
		}
	}

	option = {
		name = paragon.3140.a
		hidden_effect = {
			country_event = { id = paragon.3141 }
		}
	}
}

country_event = { #Create wormhole
	id = paragon.3141
	title = "paragon.3141.name"
	desc = "paragon.3141.desc"
	picture = GFX_evt_wormhole
	show_sound = par_event_keides
	fire_only_once = yes
	is_triggered_only = yes
	location = capital_scope

	event_window_type = leader_story
	event_picture_background = "GFX_leader_recruitment_bg_legendary_keides"

	picture_event_data = {
		portrait = event_target:legendary_lost_leader
	}

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	immediate = {
		random_system = {
			limit = { has_star_flag = legendary_leader_final_system }
			save_event_target_as = wormhole_spawn
			spawn_natural_wormhole = {
				bypass_type = wormhole
				random_pos = yes
				orbit_angle = 360
			}
			random_system_planet = {
				limit = { has_planet_flag = legendary_leader_final_planet }
				save_event_target_as = spawn_point_log
			}
		}
		set_country_flag = encountered_first_wormhole
		add_seen_bypass_type = wormhole
	}

	option = {
		name = paragon.3141.a
		hidden_effect = {
			if = {
				limit = {
					capital_scope.solar_system = {
						has_natural_wormhole = no
					}
				}
				capital_scope.solar_system = {
					spawn_natural_wormhole = {
						bypass_type = wormhole
						random_pos = yes
						orbit_angle = 360
					}
					link_wormholes = event_target:wormhole_spawn
				}
			}
			else = {
				capital_scope.solar_system = {
					closest_system = {
						limit = { has_natural_wormhole = no }
						min_steps = 1
						max_steps = 2
						spawn_natural_wormhole = {
							bypass_type = wormhole
							random_pos = yes
							orbit_angle = 360
						}
						link_wormholes = event_target:wormhole_spawn
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { has_technology = tech_wormhole_stabilization }
			}
			add_research_option = tech_wormhole_stabilization
			add_tech_progress = {
				tech = tech_wormhole_stabilization
				progress = 0.15
			}
		}
		else = {
			add_resource = {
				physics_research = 6000
			}
		}
	}
}

ship_event = { #Entered System
	id = paragon.3144
	title = "paragon.3144.name"
	desc = "paragon.3144.desc"
	picture = GFX_evt_ruined_system
	show_sound = par_event_keides
	fire_only_once = yes
	location = from

	is_triggered_only = yes

	trigger = {
		FROMFROM = {
			any_owned_leader = { has_trait = leader_trait_legendary_far_from_home }
		}
		FROM = { has_star_flag = legendary_leader_final_system }
	}

	option = {
		name = paragon.3144.a
		hidden_effect = {
			owner = {
				country_event = { id = paragon.3145 }
			}
		}
	}
}

country_event = { #Entered System - warning
	id = paragon.3145
	title = "paragon.3145.name"
	desc = "paragon.3145.desc"
	diplomatic = yes
	fire_only_once = yes
	location = fromfrom

	picture_event_data = {
		portrait = ai_crisis_1
	}

	is_triggered_only = yes

	trigger = {
		any_owned_leader = { has_trait = leader_trait_legendary_far_from_home }
	}

	option = {
		name = paragon.3145.a
		capital_scope = {
			enable_special_project = {
				name = "LEGENDARY_LEADER_SABOTAGE_FLEET_PROJECT"
				location = this
				owner = root
			}
		}
	}
	option = {
		name = paragon.3145.b
		remove_relic = r_wormhole_key
		hidden_effect = {
			country_event = { id = paragon.3146 }
		}
	}
}
country_event = { #Entered System - warning - send them the key
	id = paragon.3146
	title = "paragon.3146.name"
	desc = "paragon.3146.desc"
	diplomatic = yes
	fire_only_once = yes

	picture_event_data = {
		portrait = ai_crisis_1
	}

	is_triggered_only = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	option = {
		name = paragon.3146.a
	}

	after = {
		country_event = { id = paragon.3147 days = 15 random = 15 }
	}
}
country_event = { #Relic Lost - Drones left
	id = paragon.3147
	title = "paragon.3147.name"
	desc = "paragon.3147.desc"
	picture = GFX_evt_wormhole
	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	immediate = {
		event_target:overlord_enforcers_automated_fleet = {
			delete_fleet = {
				target = this
				destroy_template = yes
			}
		}
	}

	option = {
		name = paragon.3147.a
	}
}

country_event = { #EMP project done - fleet destroyed
	id = paragon.3148
	title = "paragon.3148.name"
	desc = "paragon.3148.desc"
	picture = GFX_evt_large_explosion
	show_sound = event_finding_loot
	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	option = {
		name = paragon.3148.a
		event_target:overlord_enforcers_automated_fleet = {
			destroy_fleet = {
				target = this
				destroy_template = yes
			}
		}
	}
}

# This = owner of fleet 1 (combatant)
# From = owner of fleet 2 (destroyed)
# FromFrom = fleet 1
# FromFromFrom = fleet 2
country_event = { #Fleet 'manually' destroyed
	id = paragon.3149
	title = "paragon.3149.name"
	desc = "paragon.3149.desc"
	picture = GFX_evt_ruined_system
	show_sound = event_finding_loot
	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		FROMFROMFROM = {
			has_fleet_flag = overlord_enforcers_automated_fleet
		}
	}

	immediate = {
	}

	option = {
		name = paragon.3149.a
		abort_special_project = { type = LEGENDARY_LEADER_SABOTAGE_FLEET_PROJECT }
	}
}

fleet_event = { #ArcSite event 1 - start
	id = paragon.3150
	title = "paragon.3150.name"
	desc = "paragon.3150.desc"
	picture = GFX_evt_excavation_team
	show_sound = event_finding_loot
	location = from

	is_triggered_only = yes

	archaeology = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no }
	}

	option = {
		name = paragon.3150.a
	}
}

fleet_event = { #ArcSite event 2
	id = paragon.3151
	title = "paragon.3151.name"
	desc = "paragon.3151.desc"
	picture = GFX_evt_sapient_AI
	show_sound = event_finding_loot
	location = from

	is_triggered_only = yes

	archaeology = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no }
	}

	option = {
		name = paragon.3151.a
	}
}

fleet_event = { #ArcSite event 3
	id = paragon.3152
	title = "paragon.3152.name"
	desc = "paragon.3152.desc"
	picture = GFX_evt_emergency_workers
	show_sound = event_finding_loot
	location = from

	is_triggered_only = yes

	archaeology = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no }
	}

	option = {
		name = paragon.3152.a
	}
}

fleet_event = { #ArcSite event 4
	id = paragon.3153
	title = "paragon.3153.name"
	desc = "paragon.3153.desc"
	picture = GFX_evt_gas_giant_station
	show_sound = event_finding_loot
	location = from

	is_triggered_only = yes

	archaeology = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no }
	}

	option = {
		name = paragon.3153.a
	}
}

fleet_event = { #ArcSite event 5
	id = paragon.3154
	title = "paragon.3154.name"
	desc = "paragon.3154.desc"
	picture = GFX_evt_partition
	show_sound = event_finding_loot
	location = from

	is_triggered_only = yes

	archaeology = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no }
	}

	option = {
		name = paragon.3154.a
	}
}

fleet_event = { #ArcSite event 6
	id = paragon.3155
	title = "paragon.3155.name"
	desc = "paragon.3155.desc"
	picture = GFX_evt_sapient_AI
	show_sound = event_finding_loot
	location = from

	is_triggered_only = yes

	archaeology = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no }
	}

	option = {
		name = paragon.3155.a
	}
}

fleet_event = { #ArcSite event 7 - ending, last in arc site
	id = paragon.3156
	title = "paragon.3156.name"
	desc = "paragon.3156.desc"
	picture = GFX_evt_sapient_AI
	show_sound = event_finding_loot
	location = from

	is_triggered_only = yes

	archaeology = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = {
		from = { set_site_progress_locked = no }
	}

	option = {
		name = paragon.3156.a
		owner = {
			country_event = {
				id = paragon.3160 days = 15 random = 30
			}
		}
	}
}

country_event = { #End The Story
	id = paragon.3160
	title = "paragon.3160.name"
	desc = "paragon.3160.desc"
	diplomatic = yes
	fire_only_once = yes
	is_triggered_only = yes
	show_sound = par_event_keides
	
	picture = GFX_leader_recruitment_bg_renowned
	
	picture_event_data = {
		portrait = event_target:legendary_lost_leader
		room = paragon_keides_room
	}

	is_triggered_only = yes

	trigger = {
		exists = event_target:legendary_lost_leader
	}

	option = { # It was their failure, not yours.
		name = paragon.3160.a
		response_text = paragon.3160.a.response
		is_dialog_only = yes
	}
	option = { # What of the Key?
		name = paragon.3160.b
		trigger = {	has_relic = r_wormhole_key }
		response_text = paragon.3160.b.response
		is_dialog_only = yes
	}
	option = { # What do you want to focus on?
		name = paragon.3160.c
		response_text = paragon.3160.c.response
		is_dialog_only = yes
	}
	option = { # Remain a Scientist
		name = paragon.3160.d
		response_text = paragon.3160.new_focus
		event_target:legendary_lost_leader = {
			remove_all_negative_traits = yes
			add_experience = 54000
		}
		custom_tooltip = paragon.3160.d.custom_tooltip
		custom_gui = "enclave_caravaneer_option"
	}
	option = { # Become an Admiral
		name = paragon.3160.e
		response_text = paragon.3160.new_focus
		event_target:legendary_lost_leader = {
			hidden_effect = { unassign_leader = this }
			remove_all_traits = yes
			change_leader_class = admiral
			set_skill = 1
			add_experience = 54000
		}
		custom_tooltip = paragon.3160.e.custom_tooltip
		custom_gui = "enclave_caravaneer_option"
	}
	option = { # Become a Governor
		name = paragon.3160.f
		response_text = paragon.3160.new_focus
		event_target:legendary_lost_leader = {
			hidden_effect = { unassign_leader = this }
			remove_all_traits = yes
			change_leader_class = governor
			set_skill = 1
			add_experience = 54000
		}
		custom_tooltip = paragon.3160.f.custom_tooltip
		custom_gui = "enclave_caravaneer_option"
	}
	option = { # Become a General
		name = paragon.3160.g
		response_text = paragon.3160.new_focus
		event_target:legendary_lost_leader = {
			hidden_effect = { unassign_leader = this }
			remove_all_traits = yes
			change_leader_class = general
			set_skill = 1
			add_experience = 54000
		}
		custom_tooltip = paragon.3160.g.custom_tooltip
		custom_gui = "enclave_caravaneer_option"
	}
	after = {
		event_target:legendary_lost_leader = {
			add_trait = leader_trait_legendary_ancestors_knowledge
		}
	}
}

################
#Utility Events#
################

country_event = { #kill projects when attacked  - utility event
	id = paragon.3900
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		FROM = { has_country_flag = sharpbeak_country_flag }
	}

	immediate = {
		set_country_flag = attacked_sharpbeak #important flag to disable events and projects
		abort_special_project = { type = PARAGON_GATEWAY_DUDE_PROJECT location = event_target:sharpbeak_fleet }
		abort_special_project = { type = PARAGON_GATEWAY_DUDE_REPAIR_PROJECT location = event_target:sharpbeak_fleet }
		event_target:sharpbeak_country = {
			set_faction_hostility = {
				target = root.owner
				set_hostile = yes
				set_neutral = no
				set_friendly = no
			}
		}
		event_target:sharpbeak_fleet = {
			set_fleet_stance = aggressive
		}
	}
}

fleet_event = { #for meeting with other empires - utility event
	id = paragon.3901
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		owner = {
			NOT = {
				has_country_flag = sharpbeak_known
			}
		}
		owner = {
			OR = {
				is_ai = no
				is_gestalt = no
			}
		}
		solar_system = { has_star_flag = sharpbeak_starsystem }
		has_global_flag = sharpbeak_recruit_phase
	}

	immediate = {
		owner = {
			set_country_flag = sharpbeak_known
			country_event = {
				id = paragon.3902 days = 15 random = 15
			}
		}
	}
}

country_event = { #after meeting with another empire - utility event
	id = paragon.3902
	title = "paragon.3902.name"
	desc = "paragon.3902.desc"
	picture = GFX_evt_unidentified_ship
	show_sound = event_bad_omen
	location = event_target:sharpbeak_fleet
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		NOT = {
			has_country_flag = attacked_sharpbeak
		}
		has_global_flag = sharpbeak_recruit_phase
	}

	immediate = {
	}

	option = {
		name = "paragon.3902.a"
		trigger = { is_gestalt = no }
		hidden_effect = {
			country_event = {
				id = paragon.3002 days = 60 random = 60
			}
		}
	}
	option = {
		name = "paragon.3001.b"
		trigger = { is_gestalt = yes }
		hidden_effect = {
			country_event = {
				id = paragon.3002 days = 60 random = 60
			}
		}
	}
}

country_event = { #if ship get destroyed before recruiting - utility event
	id = paragon.3903
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = sharpbeak_country_flag
	}

	immediate = {
		from = {
			every_country = {
				limit = { has_country_flag = sharpbeak_known }
				abort_special_project = { type = PARAGON_GATEWAY_DUDE_PROJECT }
				abort_special_project = { type = PARAGON_GATEWAY_DUDE_REPAIR_PROJECT }
			}
		}
		solar_system = { remove_star_flag = sharpbeak_starsystem }
		clear_global_event_target = paragon_gateway_dude_homegate
		remove_global_flag = sharpbeak_recruit_phase
		clear_global_event_target = sharpbeak_country
		clear_global_event_target = sharpbeak_fleet
	}
}

country_event = { #Removing country flag when Skrand dies or is dismissed (prevents launching his quest events) - utility event
	id = paragon.3904
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = skrand_recruited
		from = {
			event_target:admiral_sharpbeak = { has_leader_flag = skrand }
		}
	}

	immediate = {
		country_event = {
			id = paragon.3905 days = 2 #It needs to call another event, unless it will always delete skrand_flag like he would die during leader pool refresh - or the even will never fire if we check if Skrand exists here
		}
	}
}

country_event = { #Removing country flag when Skrand dies or is dismissed (prevents launching his quest events) - utility event
	id = paragon.3905
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = { exists = event_target:admiral_sharpbeak }
	}

	immediate = {
		remove_country_flag = skrand_recruited
		clear_global_event_target = admiral_sharpbeak
		clear_global_event_target = last_talon_ship
	}
}

# This = Country
# From = Leader
country_event = { #Keides Death, removing ecent chains and projects - utility event
	id = paragon.3906
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		from = { has_trait = leader_trait_legendary_far_from_home }
	}

	immediate = {
		end_event_chain = paragon_legendary_leader_chain
		abort_special_project = { type = LEGENDARY_LEADER_VOLCANO_PLANET_PROJECT }
		abort_special_project = { type = LEGENDARY_LEADER_HOSTILE_PLANET_PROJECT }
		abort_special_project = { type = LEGENDARY_LEADER_SHIP_PLANET_PROJECT }
		abort_special_project = { type = LEGENDARY_LEADER_OPEN_WORMHOLE_PROJECT }
		abort_special_project = { type = LEGENDARY_LEADER_SABOTAGE_FLEET_PROJECT }
		every_archaeological_site = {
			limit = { is_site_type = paragon_legendary_leader_homeworld }
			destroy_archaeological_site = this
		}
	}
}
