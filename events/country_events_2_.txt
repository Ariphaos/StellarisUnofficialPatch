############################
#
# Country Events
# by Maximilian Olbers
#
############################

namespace = country

# Starting Event gatekeeper
country_event = {
	id = country.900
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		random_list = {
			# Sublight Probes
			10 = { country_event = { id = country.258 days = 360 random = 10 } }
			# Radical Cult
			10 = { country_event = { id = country.200 days = 30 random = 10 } }
			# Wanderlust
			1 = { country_event = { id = country.1000 days = 30 random = 10 } }
			# Mass Extinction
			10 = {
				modifier = {
					factor = 0
					OR = {
						has_origin = origin_void_dwellers
						has_origin = origin_shattered_ring
						has_origin = origin_life_seeded
						has_ethic = ethic_gestalt_consciousness
					}
				}
				country_event = { id = country.1100 days = 30 random = 10 }
			}
			# No starting event
			69 = { set_country_flag = starting_event }
		}
	}
}

############################################
### Mass Extinction Event Chain
############################################

country_event = {
	id = country.1100
	title = "country.1100.name"
	desc = "country.1100.desc"
	show_sound = event_scanner
	picture = GFX_evt_galactic_senate
	location = root

	#mean_time_to_happen = { months = 40 }
	is_triggered_only = yes

	trigger = {
		is_ai = no
		NOR = {
			has_ethic = ethic_gestalt_consciousness
			has_origin = origin_life_seeded
			has_country_flag = starting_event
			any_playable_country = { has_event_chain = mass_extinction_chain } # for multiplay
		}
	}

	immediate = { set_country_flag = starting_event }

	option = {
		name = "country.1100.a"
		begin_event_chain = {
			event_chain = "mass_extinction_chain"
			target = root
		}
		hidden_effect = { country_event = { id = country.1101 } }
	}
}

# hidden, sets PoIs
country_event = {
	id = country.1101
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		random_owned_planet = {
			limit = { is_capital = yes }
			save_event_target_as = capital_location
		}
		random_system = {
			limit = {
				NOR = {
					exists = space_owner
					has_star_flag = hostile_system
					is_star_class = sc_black_hole
					any_system_planet = {
						has_planet_flag = massex_1_planet
						has_planet_flag = massex_2_planet
						has_planet_flag = massex_3_planet
						has_planet_flag = massex_4_planet
						has_planet_flag = massex_5_planet
					}
				}
				is_pirate_system = no
				any_system_planet = { is_planet_class = pc_asteroid }
				distance = {
					source = event_target:capital_location
					use_bypasses = no
					min_jumps = 1
					max_jumps = 8
				}
			}
			random_system_planet = {
				limit = {
					is_planet_class = pc_asteroid
					has_owner = no
				}
				set_planet_flag = massex_1_planet
				prevent_anomaly = yes
				root = {
					create_point_of_interest = {
						id = massex_poi.1
						name = "massex_poi_1"
						desc = "massex_poi_1_desc"
						event_chain = "mass_extinction_chain"
						location = prev
					}
				}
			}
		}
		random_system = {
			limit = {
				NOR = {
					exists = space_owner
					has_star_flag = hostile_system
					is_star_class = sc_black_hole
					any_system_planet = {
						has_planet_flag = massex_1_planet
						has_planet_flag = massex_2_planet
						has_planet_flag = massex_3_planet
						has_planet_flag = massex_4_planet
						has_planet_flag = massex_5_planet
					}
				}
				is_pirate_system = no
				any_system_planet = { is_planet_class = pc_molten }
				distance = {
					source = event_target:capital_location
					use_bypasses = no
					min_jumps = 1
					max_jumps = 8
				}
			}
			random_system_planet = {
				limit = {
					is_planet_class = pc_molten
					has_owner = no
				}
				set_planet_flag = massex_2_planet
				prevent_anomaly = yes
				root = {
					create_point_of_interest = {
						id = massex_poi.2
						name = "massex_poi_2"
						desc = "massex_poi_2_desc"
						event_chain = "mass_extinction_chain"
						location = prev
					}
				}
			}
		}
		random_system = {
			limit = {
				NOR = {
					exists = space_owner
					has_star_flag = hostile_system
					is_star_class = sc_black_hole
					any_system_planet = {
						has_planet_flag = massex_1_planet
						has_planet_flag = massex_2_planet
						has_planet_flag = massex_3_planet
						has_planet_flag = massex_4_planet
						has_planet_flag = massex_5_planet
					}
				}
				is_pirate_system = no
				any_system_planet = { is_planet_class = pc_barren }
				distance = {
					source = event_target:capital_location
					use_bypasses = no
					min_jumps = 1
					max_jumps = 8
				}
			}
			random_system_planet = {
				limit = {
					is_planet_class = pc_barren
					has_owner = no
				}
				set_planet_flag = massex_3_planet
				prevent_anomaly = yes
				root = {
					create_point_of_interest = {
						id = massex_poi.3
						name = "massex_poi_3"
						desc = "massex_poi_3_desc"
						event_chain = "mass_extinction_chain"
						location = prev
					}
				}
			}
		}
		random_system = {
			limit = {
				NOR = {
					exists = space_owner
					has_star_flag = hostile_system
					is_star_class = sc_black_hole
					any_system_planet = {
						has_planet_flag = massex_1_planet
						has_planet_flag = massex_2_planet
						has_planet_flag = massex_3_planet
						has_planet_flag = massex_4_planet
						has_planet_flag = massex_5_planet
					}
				}
				is_pirate_system = no
				any_system_planet = { is_planet_class = pc_toxic }
				distance = {
					source = event_target:capital_location
					use_bypasses = no
					min_jumps = 1
					max_jumps = 8
				}
			}
			random_system_planet = {
				limit = {
					is_planet_class = pc_toxic
					has_owner = no
				}
				set_planet_flag = massex_4_planet
				prevent_anomaly = yes
				root = {
					create_point_of_interest = {
						id = massex_poi.4
						name = "massex_poi_4"
						desc = "massex_poi_4_desc"
						event_chain = "mass_extinction_chain"
						location = prev
					}
				}
			}
		}
		random_system = {
			limit = {
				NOR = {
					exists = space_owner
					has_star_flag = hostile_system
					is_star_class = sc_black_hole
					any_system_planet = {
						has_planet_flag = massex_1_planet
						has_planet_flag = massex_2_planet
						has_planet_flag = massex_3_planet
						has_planet_flag = massex_4_planet
						has_planet_flag = massex_5_planet
					}
				}
				is_pirate_system = no
				any_system_planet = { is_planet_class = pc_frozen }
				distance = {
					source = event_target:capital_location
					use_bypasses = no
					min_jumps = 1
					max_jumps = 8
				}
			}
			random_system_planet = {
				limit = {
					is_planet_class = pc_frozen
					has_owner = no
				}
				set_planet_flag = massex_5_planet
				prevent_anomaly = yes
				root = {
					create_point_of_interest = {
						id = massex_poi.5
						name = "massex_poi_5"
						desc = "massex_poi_5_desc"
						event_chain = "mass_extinction_chain"
						location = prev
					}
				}
			}
		}
	}
}

# hidden, fleet entering PoI system, porting to country event for each PoI
fleet_event = {
	id = country.1102
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		owner = {
			is_ai = no
			has_event_chain = mass_extinction_chain
		}
		from = {
			any_system_planet = {
				OR = {
					has_planet_flag = massex_1_planet
					has_planet_flag = massex_2_planet
					has_planet_flag = massex_3_planet
					has_planet_flag = massex_4_planet
					has_planet_flag = massex_5_planet
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				from = {
					any_system_planet = { has_planet_flag = massex_1_planet }
				}
			}
			owner = { country_event = { id = country.1105 } }
		}
		if = {
			limit = {
				from = {
					any_system_planet = { has_planet_flag = massex_2_planet }
				}
			}
			owner = { country_event = { id = country.1110 } }
		}
		if = {
			limit = {
				from = {
					any_system_planet = { has_planet_flag = massex_3_planet }
				}
			}
			owner = { country_event = { id = country.1115 } }
		}
		if = {
			limit = {
				from = {
					any_system_planet = { has_planet_flag = massex_4_planet }
				}
			}
			owner = { country_event = { id = country.1120 } }
		}
		if = {
			limit = {
				from = {
					any_system_planet = { has_planet_flag = massex_5_planet }
				}
			}
			owner = { country_event = { id = country.1125 } }
		}
	}
}

# asteroid - enables project something broken
country_event = {
	id = country.1105
	title = "country.1105.name"
	desc = "country.1105.desc"
	show_sound = event_scanner
	picture = GFX_evt_mining_station
	location = from
	trackable = yes

	is_triggered_only = yes

	trigger = {
		NOR = {
			has_country_flag = massex_1_found
			has_country_flag = massex_1_pending
		}
	}

	immediate = {
		set_country_flag = massex_1_pending
		if = {
			limit = {
				fromfrom = {
					any_system_planet = { has_planet_flag = massex_1_planet }
					has_access_fleet = root
				}
			}
			set_country_flag = massex_1_found
			remove_country_flag = massex_1_pending
			fromfrom = {
				random_system_planet = {
					limit = { has_planet_flag = massex_1_planet }
					prevent_anomaly = yes
				}
			}
		}
	}

	option = {
		name = "country.1100.owned"
		trigger = { NOT = { has_country_flag = massex_1_found } }
		hidden_effect = {
			remove_country_flag = massex_1_pending
			remove_point_of_interest = massex_poi.1
			random_planet = {
				limit = { has_planet_flag = massex_1_planet }
				remove_planet_flag = massex_1_planet
			}
			capital_scope = { save_event_target_as = capital_location }
			random_system = {
				limit = {
					NOR = {
						exists = space_owner
						has_star_flag = hostile_system
						is_star_class = sc_black_hole
						any_system_planet = {
							has_planet_flag = massex_1_planet
							has_planet_flag = massex_2_planet
							has_planet_flag = massex_3_planet
							has_planet_flag = massex_4_planet
							has_planet_flag = massex_5_planet
						}
					}
					is_pirate_system = no
					any_system_planet = { is_planet_class = pc_asteroid }
					distance = {
						source = event_target:capital_location
						use_bypasses = no
						min_jumps = 1
						max_jumps = 8
					}
				}
				random_system_planet = {
					limit = {
						is_planet_class = pc_asteroid
						has_owner = no
					}
					set_planet_flag = massex_1_planet
					prevent_anomaly = yes
					root = {
						create_point_of_interest = {
							id = massex_poi.1
							name = "massex_poi_1"
							desc = "massex_poi_1_desc"
							event_chain = "mass_extinction_chain"
							location = prev
						}
					}
				}
			}
		}
	}

	option = {
		name = OK
		trigger = { has_country_flag = massex_1_found }
		fromfrom = {
			random_system_planet = {
				limit = { has_planet_flag = massex_1_planet }
				root = {
					enable_special_project = {
						name = "MASSEX_1_PROJECT"
						location = prev
						owner = root
					}
					hidden_effect = { remove_point_of_interest = massex_poi.1 }
				}
			}
		}
	}
}

# molten - enables project something burned
country_event = {
	id = country.1110
	title = "country.1110.name"
	desc = "country.1110.desc"
	show_sound = event_scanner
	picture = GFX_evt_satellite_in_orbit
	location = from
	trackable = yes

	is_triggered_only = yes

	trigger = {
		NOR = {
			has_country_flag = massex_2_found
			has_country_flag = massex_2_pending
		}
	}

	immediate = {
		set_country_flag = massex_2_pending
		if = {
			limit = {
				fromfrom = {
					any_system_planet = { has_planet_flag = massex_2_planet }
					has_access_fleet = root
				}
			}
			set_country_flag = massex_2_found
			remove_country_flag = massex_2_pending
			fromfrom = {
				random_system_planet = {
					limit = { has_planet_flag = massex_2_planet }
					prevent_anomaly = yes
				}
			}
		}
	}

	option = {
		name = "country.1100.owned"
		trigger = { NOT = { has_country_flag = massex_2_found } }
		hidden_effect = {
			remove_country_flag = massex_2_pending
			remove_point_of_interest = massex_poi.2
			random_planet = {
				limit = { has_planet_flag = massex_2_planet }
				remove_planet_flag = massex_2_planet
			}
			capital_scope = { save_event_target_as = capital_location }
			random_system = {
				limit = {
					NOR = {
						exists = space_owner
						has_star_flag = hostile_system
						is_star_class = sc_black_hole
						any_system_planet = {
							has_planet_flag = massex_1_planet
							has_planet_flag = massex_2_planet
							has_planet_flag = massex_3_planet
							has_planet_flag = massex_4_planet
							has_planet_flag = massex_5_planet
						}
					}
					is_pirate_system = no
					any_system_planet = { is_planet_class = pc_molten }
					distance = {
						source = event_target:capital_location
						use_bypasses = no
						min_jumps = 1
						max_jumps = 8
					}
				}
				random_system_planet = {
					limit = {
						is_planet_class = pc_molten
						has_owner = no
					}
					set_planet_flag = massex_2_planet
					prevent_anomaly = yes
					root = {
						create_point_of_interest = {
							id = massex_poi.2
							name = "massex_poi_2"
							desc = "massex_poi_2_desc"
							event_chain = "mass_extinction_chain"
							location = prev
						}
					}
				}
			}
		}
	}

	option = {
		name = OK
		trigger = { has_country_flag = massex_2_found }
		fromfrom = {
			random_system_planet = {
				limit = { has_planet_flag = massex_2_planet }
				root = {
					enable_special_project = {
						name = "MASSEX_2_PROJECT"
						location = prev
						owner = root
					}
					hidden_effect = { remove_point_of_interest = massex_poi.2 }
				}
			}
		}
	}
}

# barren - enables project something blasted
country_event = {
	id = country.1115
	title = "country.1115.name"
	desc = "country.1115.desc"
	show_sound = event_scanner
	picture = GFX_evt_underground_civilization
	location = from
	trackable = yes

	is_triggered_only = yes

	trigger = {
		NOR = {
			has_country_flag = massex_3_found
			has_country_flag = massex_3_pending
		}
	}

	immediate = {
		set_country_flag = massex_3_pending
		if = {
			limit = {
				fromfrom = {
					any_system_planet = { has_planet_flag = massex_3_planet }
					has_access_fleet = root
				}
			}
			set_country_flag = massex_3_found
			remove_country_flag = massex_3_pending
			fromfrom = {
				random_system_planet = {
					limit = { has_planet_flag = massex_3_planet }
					prevent_anomaly = yes
				}
			}
		}
	}

	option = {
		name = "country.1100.owned"
		trigger = { NOT = { has_country_flag = massex_3_found } }
		hidden_effect = {
			remove_country_flag = massex_3_pending
			remove_point_of_interest = massex_poi.3
			random_planet = {
				limit = { has_planet_flag = massex_3_planet }
				remove_planet_flag = massex_3_planet
			}
			capital_scope = { save_event_target_as = capital_location }
			random_system = {
				limit = {
					NOR = {
						exists = space_owner
						has_star_flag = hostile_system
						is_star_class = sc_black_hole
						any_system_planet = {
							has_planet_flag = massex_1_planet
							has_planet_flag = massex_2_planet
							has_planet_flag = massex_3_planet
							has_planet_flag = massex_4_planet
							has_planet_flag = massex_5_planet
						}
					}
					is_pirate_system = no
					any_system_planet = { is_planet_class = pc_barren }
					distance = {
						source = event_target:capital_location
						use_bypasses = no
						min_jumps = 1
						max_jumps = 8
					}
				}
				random_system_planet = {
					limit = {
						is_planet_class = pc_barren
						has_owner = no
					}
					set_planet_flag = massex_3_planet
					prevent_anomaly = yes
					root = {
						create_point_of_interest = {
							id = massex_poi.3
							name = "massex_poi_3"
							desc = "massex_poi_3_desc"
							event_chain = "mass_extinction_chain"
							location = prev
						}
					}
				}
			}
		}
	}

	option = {
		name = OK
		trigger = { has_country_flag = massex_3_found }
		fromfrom = {
			random_system_planet = {
				limit = { has_planet_flag = massex_3_planet }
				root = {
					enable_special_project = {
						name = "MASSEX_3_PROJECT"
						location = prev
						owner = root
					}
					hidden_effect = { remove_point_of_interest = massex_poi.3 }
				}
			}
		}
	}
}

# toxic - enables project something envenomed
country_event = {
	id = country.1120
	title = "country.1120.name"
	desc = "country.1120.desc"
	show_sound = event_scanner
	picture = GFX_evt_alien_nature
	location = from
	trackable = yes

	is_triggered_only = yes

	trigger = {
		NOR = {
			has_country_flag = massex_4_found
			has_country_flag = massex_4_pending
		}
	}

	immediate = {
		set_country_flag = massex_4_pending
		if = {
			limit = {
				fromfrom = {
					any_system_planet = { has_planet_flag = massex_4_planet }
					has_access_fleet = root
				}
			}
			set_country_flag = massex_4_found
			remove_country_flag = massex_4_pending
			fromfrom = {
				random_system_planet = {
					limit = { has_planet_flag = massex_4_planet }
					prevent_anomaly = yes
				}
			}
		}
	}

	option = {
		name = "country.1100.owned"
		trigger = { NOT = { has_country_flag = massex_4_found } }
		hidden_effect = {
			remove_country_flag = massex_4_pending
			remove_point_of_interest = massex_poi.4
			random_planet = {
				limit = { has_planet_flag = massex_4_planet }
				remove_planet_flag = massex_4_planet
			}
			capital_scope = { save_event_target_as = capital_location }
			random_system = {
				limit = {
					NOR = {
						exists = space_owner
						has_star_flag = hostile_system
						is_star_class = sc_black_hole
						any_system_planet = {
							has_planet_flag = massex_1_planet
							has_planet_flag = massex_2_planet
							has_planet_flag = massex_3_planet
							has_planet_flag = massex_4_planet
							has_planet_flag = massex_5_planet
						}
					}
					is_pirate_system = no
					any_system_planet = { is_planet_class = pc_toxic }
					distance = {
						source = event_target:capital_location
						use_bypasses = no
						min_jumps = 1
						max_jumps = 8
					}
				}
				random_system_planet = {
					limit = {
						is_planet_class = pc_toxic
						has_owner = no
					}
					set_planet_flag = massex_4_planet
					prevent_anomaly = yes
					root = {
						create_point_of_interest = {
							id = massex_poi.4
							name = "massex_poi_4"
							desc = "massex_poi_4_desc"
							event_chain = "mass_extinction_chain"
							location = prev
						}
					}
				}
			}
		}
	}

	option = {
		name = OK
		trigger = { has_country_flag = massex_4_found }
		fromfrom = {
			random_system_planet = {
				limit = { has_planet_flag = massex_4_planet }
				root = {
					enable_special_project = {
						name = "MASSEX_4_PROJECT"
						location = prev
						owner = root
					}
					hidden_effect = { remove_point_of_interest = massex_poi.4 }
				}
			}
		}
	}
}

# frozen - enables project something chilled
country_event = {
	id = country.1125
	title = "country.1125.name"
	desc = "country.1125.desc"
	show_sound = event_scanner
	picture = GFX_evt_outpost
	location = from
	trackable = yes

	is_triggered_only = yes

	trigger = {
		NOR = {
			has_country_flag = massex_5_found
			has_country_flag = massex_5_pending
		}
	}

	immediate = {
		set_country_flag = massex_5_pending
		if = {
			limit = {
				fromfrom = {
					any_system_planet = { has_planet_flag = massex_5_planet }
					has_access_fleet = root
				}
			}
			set_country_flag = massex_5_found
			remove_country_flag = massex_5_pending
			fromfrom = {
				random_system_planet = {
					limit = { has_planet_flag = massex_5_planet }
					prevent_anomaly = yes
				}
			}
		}
	}

	option = {
		name = "country.1100.owned"
		trigger = { NOT = { has_country_flag = massex_5_found } }
		hidden_effect = {
			remove_country_flag = massex_5_pending
			remove_point_of_interest = massex_poi.5
			random_planet = {
				limit = { has_planet_flag = massex_5_planet }
				remove_planet_flag = massex_5_planet
			}
			capital_scope = { save_event_target_as = capital_location }
			random_system = {
				limit = {
					NOR = {
						exists = space_owner
						has_star_flag = hostile_system
						is_star_class = sc_black_hole
						any_system_planet = {
							has_planet_flag = massex_1_planet
							has_planet_flag = massex_2_planet
							has_planet_flag = massex_3_planet
							has_planet_flag = massex_4_planet
							has_planet_flag = massex_5_planet
						}
					}
					is_pirate_system = no
					any_system_planet = { is_planet_class = pc_frozen }
					distance = {
						source = event_target:capital_location
						use_bypasses = no
						min_jumps = 1
						max_jumps = 8
					}
				}
				random_system_planet = {
					limit = {
						is_planet_class = pc_frozen
						has_owner = no
					}
					set_planet_flag = massex_5_planet
					prevent_anomaly = yes
					root = {
						create_point_of_interest = {
							id = massex_poi.5
							name = "massex_poi_5"
							desc = "massex_poi_5_desc"
							event_chain = "mass_extinction_chain"
							location = prev
						}
					}
				}
			}
		}
	}

	option = {
		name = OK
		trigger = { has_country_flag = massex_5_found }
		fromfrom = {
			random_system_planet = {
				limit = { has_planet_flag = massex_5_planet }
				root = {
					enable_special_project = {
						name = "MASSEX_5_PROJECT"
						location = prev
						owner = root
					}
					hidden_effect = { remove_point_of_interest = massex_poi.5 }
				}
			}
		}
	}
}

# asteroid - project followup
ship_event = {
	id = country.1130
	title = "country.1130.name"
	desc = "country.1130.desc"
	show_sound = event_scanner
	picture = GFX_evt_mining_station
	location = root

	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		owner = {
			add_event_chain_counter = {
				event_chain = "mass_extinction_chain"
				counter = "massex_analyzed"
				amount = 1
			}
		}
	}

	option = {
		trigger = {
			owner = {
				has_completed_event_chain_counter = {
					event_chain = "mass_extinction_chain"
					counter = "massex_analyzed"
				}
			}
		}
		name = OK
		hidden_effect = { owner = { country_event = { id = country.1155 } } }
	}

	option = {
		trigger = {
			owner = {
				NOT = {
					has_completed_event_chain_counter = {
						event_chain = "mass_extinction_chain"
						counter = "massex_analyzed"
					}
				}
			}
		}
		name = OK
	}
}

# molten - project followup
ship_event = {
	id = country.1135
	title = "country.1135.name"
	desc = "country.1135.desc"
	show_sound = event_scanner
	picture = GFX_evt_satellite_in_orbit
	location = root

	is_triggered_only = yes
	auto_opens = yes

	trigger = {
		owner = { has_event_chain = "mass_extinction_chain" }
	}

	immediate = {
		owner = {
			add_event_chain_counter = {
				event_chain = "mass_extinction_chain"
				counter = "massex_analyzed"
				amount = 1
			}
		}
	}

	option = {
		trigger = {
			owner = {
				has_completed_event_chain_counter = {
					event_chain = "mass_extinction_chain"
					counter = "massex_analyzed"
				}
			}
		}
		name = OK
		hidden_effect = { owner = { country_event = { id = country.1155 } } }
	}

	option = {
		trigger = {
			owner = {
				NOT = {
					has_completed_event_chain_counter = {
						event_chain = "mass_extinction_chain"
						counter = "massex_analyzed"
					}
				}
			}
		}
		name = OK
	}
}

# barren - project followup
ship_event = {
	id = country.1140
	title = "country.1140.name"
	desc = "country.1140.desc"
	show_sound = event_scanner
	picture = GFX_evt_underground_civilization
	location = root

	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		owner = {
			add_event_chain_counter = {
				event_chain = "mass_extinction_chain"
				counter = "massex_analyzed"
				amount = 1
			}
		}
	}

	option = {
		trigger = {
			owner = {
				has_completed_event_chain_counter = {
					event_chain = "mass_extinction_chain"
					counter = "massex_analyzed"
				}
			}
		}
		name = OK
		hidden_effect = { owner = { country_event = { id = country.1155 } } }
	}

	option = {
		trigger = {
			owner = {
				NOT = {
					has_completed_event_chain_counter = {
						event_chain = "mass_extinction_chain"
						counter = "massex_analyzed"
					}
				}
			}
		}
		name = OK
	}
}

# toxic - project followup
ship_event = {
	id = country.1145
	title = "country.1145.name"
	desc = "country.1145.desc"
	show_sound = event_scanner
	picture = GFX_evt_alien_nature
	location = root

	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		owner = {
			add_event_chain_counter = {
				event_chain = "mass_extinction_chain"
				counter = "massex_analyzed"
				amount = 1
			}
		}
	}

	option = {
		trigger = {
			owner = {
				has_completed_event_chain_counter = {
					event_chain = "mass_extinction_chain"
					counter = "massex_analyzed"
				}
			}
		}
		name = OK
		hidden_effect = { owner = { country_event = { id = country.1155 } } }
	}

	option = {
		trigger = {
			owner = {
				NOT = {
					has_completed_event_chain_counter = {
						event_chain = "mass_extinction_chain"
						counter = "massex_analyzed"
					}
				}
			}
		}
		name = OK
	}
}

# frozen - project followup
ship_event = {
	id = country.1150
	title = "country.1150.name"
	desc = "country.1150.desc"
	show_sound = event_scanner
	picture = GFX_evt_outpost
	location = root

	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		owner = {
			add_event_chain_counter = {
				event_chain = "mass_extinction_chain"
				counter = "massex_analyzed"
				amount = 1
			}
		}
	}

	option = {
		trigger = {
			owner = {
				has_completed_event_chain_counter = {
					event_chain = "mass_extinction_chain"
					counter = "massex_analyzed"
				}
			}
		}
		name = OK
		hidden_effect = { owner = { country_event = { id = country.1155 } } }
	}

	option = {
		trigger = {
			owner = {
				NOT = {
					has_completed_event_chain_counter = {
						event_chain = "mass_extinction_chain"
						counter = "massex_analyzed"
					}
				}
			}
		}
		name = OK
	}
}

# event chain completed
country_event = {
	id = country.1155
	title = "country.1155.name"
	desc = "country.1155.desc"
	show_sound = event_cityscape
	picture = GFX_evt_metropolis

	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		remove_country_flag = massex_1_found
		remove_country_flag = massex_2_found
		remove_country_flag = massex_3_found
		remove_country_flag = massex_4_found
		remove_country_flag = massex_5_found
		random_planet = {
			limit = { has_planet_flag = massex_1_planet }
			remove_planet_flag = massex_1_planet
		}
		random_planet = {
			limit = { has_planet_flag = massex_2_planet }
			remove_planet_flag = massex_2_planet
		}
		random_planet = {
			limit = { has_planet_flag = massex_3_planet }
			remove_planet_flag = massex_3_planet
		}
		random_planet = {
			limit = { has_planet_flag = massex_4_planet }
			remove_planet_flag = massex_4_planet
		}
		random_planet = {
			limit = { has_planet_flag = massex_5_planet }
			remove_planet_flag = massex_5_planet
		}
	}

	option = {
		name = country.1155.a
		end_event_chain = "mass_extinction_chain"
		add_monthly_resource_mult = {
			resource = physics_research
			value = @tier3researchreward
			min = @tier3researchmin
			max = @tier3researchmax
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier3researchreward
			min = @tier3researchmin
			max = @tier3researchmax
		}
	}

	option = {
		name = country.1155.b
		end_event_chain = "mass_extinction_chain"
		add_monthly_resource_mult = {
			resource = influence
			value = @tier2influencereward
			min = @tier2influencemin
			max = @tier2influencemax
		}
		add_monthly_resource_mult = {
			resource = unity
			value = @tier3unityreward
		}
	}
}

############################################
### Mass Extinction End
############################################
