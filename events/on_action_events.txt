#########################################
#
# on_action_events
#
#########################################

namespace = action

### First Contact Diplomatic Message
country_event = {
	id = action.1
	title = action.1.name
	message_desc = action.1.message
	location = event_target:contact_empire.capital_scope

	picture_event_data = {
		portrait = event_target:contact_empire
		planet_background = event_target:contact_empire
		graphical_culture = event_target:contact_empire
		city_level = event_target:contact_empire
		room = event_target:contact_empire.ruler
	}

	### Custom First Contact system flavour
	desc = {
		text = action.1.desc_hacking_01
		trigger = {
			event_target:contact_empire = {
				is_homicidal = no
				is_gestalt = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_caught_hacking
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hacking_02
		trigger = {
			event_target:contact_empire = {
				is_homicidal = no
				is_machine_empire = yes
				has_opinion_modifier = {
					who = root
					modifier = opinion_caught_hacking
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hacking_03
		trigger = {
			event_target:contact_empire = {
				is_homicidal = no
				is_hive_empire = yes
				has_opinion_modifier = {
					who = root
					modifier = opinion_caught_hacking
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_01
		trigger = {
			event_target:contact_empire = {
				is_pacifist = no
				is_xenophile = no
				OR = {
					is_xenophobe = no
					is_same_species = root
				}
				is_gestalt = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_02
		trigger = {
			event_target:contact_empire = {
				OR = {
					is_pacifist = yes
					is_xenophile = yes
				}
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_03
		trigger = {
			event_target:contact_empire = {
				is_machine_empire = yes
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_04
		trigger = {
			event_target:contact_empire = {
				is_hive_empire = yes
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_05
		trigger = {
			event_target:contact_empire = {
				is_xenophobe = yes
				is_homicidal = no
				is_pacifist = no
				NOT = { is_same_species = root }
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact
				}
			}
		}
	}
	desc = {
		text = action.1.desc_they_hostile_01
		trigger = {
			event_target:contact_empire = {
				is_gestalt = no
			}
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_vivisection
			}
		}
	}
	desc = {
		text = action.1.desc_they_hostile_02
		trigger = {
			event_target:contact_empire = {
				is_machine_empire = yes
			}
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_vivisection
			}
		}
	}
	desc = {
		text = action.1.desc_they_hostile_03
		trigger = {
			event_target:contact_empire = {
				is_hive_empire = yes
			}
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_vivisection
			}
		}
	}
	desc = {
		text = action.1.desc_vivisection_01
		trigger = {
			event_target:contact_empire = {
				is_pacifist = no
				is_machine_empire = no
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_vivisection
				}
			}
		}
	}
	desc = {
		text = action.1.desc_vivisection_02
		trigger = {
			event_target:contact_empire = {
				is_pacifist = yes
				is_machine_empire = no
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_vivisection
				}
			}
		}
	}
	desc = {
		text = action.1.desc_vivisection_03
		trigger = {
			event_target:contact_empire = {
				is_machine_empire = yes
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_vivisection
				}
			}
		}
	}
	desc = {
		text = action.1.desc_vivisection_04
		trigger = {
			event_target:contact_empire = {
				is_hive_empire = yes
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_vivisection
				}
			}
		}
	}
	desc = {
		text = action.1.desc_they_vivisect_01
		trigger = {
			is_synthetic_empire = no
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_vivisection
			}
		}
	}
	desc = {
		text = action.1.desc_they_vivisect_02
		trigger = {
			is_synthetic_empire = yes
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_vivisection
			}
		}
	}
	desc = {
		text = action.1.desc_hungry_01
		trigger = {
			event_target:contact_empire = {
				is_pacifist = no
				is_lithoid = no
				is_machine_empire = no
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_hungry
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hungry_02
		trigger = {
			event_target:contact_empire = {
				is_pacifist = yes
				is_lithoid = no
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_hungry
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hungry_03
		trigger = {
			event_target:contact_empire = {
				is_machine_empire = yes
				is_lithoid = no
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_hungry
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hungry_04
		trigger = {
			event_target:contact_empire = {
				is_lithoid = yes
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_hungry
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hungry_05
		trigger = {
			event_target:contact_empire = {
				is_hive_empire = yes
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_hungry
				}
			}
		}
	}
	desc = {
		text = action.1.desc_they_hungry_01
		trigger = {
			is_synthetic_empire = no
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_hungry
			}
		}
	}
	desc = {
		text = action.1.desc_they_hungry_02
		trigger = {
			is_synthetic_empire = yes
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_hungry
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_to_homicidal_01
		trigger = {
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				has_valid_civic = civic_fanatic_purifiers
				OR = {
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_hungry
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_vivisection
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact
					}
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_to_homicidal_02
		trigger = {
			is_machine_empire = no
			event_target:contact_empire = {
				has_valid_civic = civic_machine_terminator
				OR = {
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_hungry
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_vivisection
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact
					}
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_to_homicidal_03
		trigger = {
			is_machine_empire = yes
			event_target:contact_empire = {
				has_valid_civic = civic_machine_terminator
				OR = {
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_hungry
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_vivisection
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact
					}
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_to_homicidal_04
		trigger = {
			event_target:contact_empire = {
				has_valid_civic = civic_hive_devouring_swarm
				OR = {
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_hungry
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_vivisection
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact
					}
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_to_homicidal_05
		trigger = {
			is_same_species = event_target:contact_empire
			event_target:contact_empire = {
				has_valid_civic = civic_fanatic_purifiers
				OR = {
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_hungry
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_vivisection
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact
					}
				}
			}
		}
	}


	### Normal (Not Xenophobe or Xenophile)
	# Militarist Autocrat
	desc = {
		text = action.1.desc_01
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_star_empire
					has_government = gov_military_dictatorship
					has_government = gov_martial_empire
					has_government = gov_martial_dictatorship
					has_government = gov_band_blood
				}
			}
		}
	}
	# Spiritualist Autocrat
	desc = {
		text = action.1.desc_02
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_theocratic_monarchy
					has_government = gov_theocratic_dictatorship
					has_government = gov_divine_empire
					has_government = gov_sacrificial_megachurch
					has_government = gov_mortal_empire
				}
			}
		}
	}
	# Materialist Autocrat
	desc = {
		text = action.1.desc_03
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_despotic_hegemony
					has_government = gov_totalitarian_regime
					has_government = gov_illuminated_autocracy
					has_government = gov_technocratic_dictatorship
				}
			}
		}
	}
	# Pacifist Autocrat
	desc = {
		text = action.1.desc_04
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_irenic_monarchy
					has_government = gov_irenic_dictatorship
					has_government = gov_celestial_empire
				}
			}
		}
	}
	# Generic Autocrat
	desc = {
		text = action.1.desc_05
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_despotic_empire
					has_government = gov_feudal_empire
					has_government = gov_constitutional_dictatorship
					has_government = gov_enlightened_monarchy
					has_government = gov_elective_monarchy
				}
			}
		}
	}
	# Military Oligarch
	desc = {
		text = action.1.desc_06
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_military_junta
					has_government = gov_war_council
					has_government = gov_citizen_stratocracy
				}
			}
		}
	}
	# Spiritualist Oligarch
	desc = {
		text = action.1.desc_07
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_theocratic_oligarchy
					has_government = gov_holy_tribunal
					has_government = gov_grim_council
				}
			}
		}
	}
	# Materialist Oligarch
	desc = {
		text = action.1.desc_08
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_executive_committee
					has_government = gov_science_directorate
				}
			}
		}
	}
	# Pacifist Oligarch
	desc = {
		text = action.1.desc_09
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
					AND = {
						exists = event_target:ratling_country
						is_same_value = event_target:ratling_country
					}
				}
				has_government = gov_irenic_bureaucracy
			}
		}
	}
	# Generic Oligarch
	desc = {
		text = action.1.desc_10
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_megacorporation
					has_government = gov_plutocratic_oligarchy
				}
			}
		}
	}
	# Militarist Democrat
	desc = {
		text = action.1.desc_11
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_military_commissariat
					has_government = gov_assembly_of_clans
					has_government = gov_citizen_republic
				}
			}
		}
	}
	# Spiritualist Democrat
	desc = {
		text = action.1.desc_12
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_theocratic_republic
			}
		}
	}
	# Materialist Democrat
	desc = {
		text = action.1.desc_13
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_direct_democracy
					has_government = gov_rational_consensus
				}
			}
		}
	}
	# Pacifist Democrat
	desc = {
		text = action.1.desc_14
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_moral_democracy
			}
		}
	}
	# Generic Democrat
	desc = {
		text = action.1.desc_15
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_representative_democracy
			}
		}
	}

	### Xenophobe
	# Militarist Autocrat
	desc = {
		text = action.1.desc_16
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_star_empire
					has_government = gov_military_dictatorship
					has_government = gov_martial_empire
					has_government = gov_martial_dictatorship
					has_government = gov_band_blood
				}
				NOR = {
					has_country_flag = special_intro_for@root
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_hive_devouring_swarm
				}
			}
		}
	}
	# Spiritualist Autocrat
	desc = {
		text = action.1.desc_17
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_theocratic_monarchy
					has_government = gov_theocratic_dictatorship
					has_government = gov_divine_empire
					has_government = gov_sacrificial_megachurch
					has_government = gov_mortal_empire
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Materialist Autocrat
	desc = {
		text = action.1.desc_18
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_despotic_hegemony
					has_government = gov_totalitarian_regime
					has_government = gov_illuminated_autocracy
					has_government = gov_technocratic_dictatorship
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Pacifist Autocrat
	desc = {
		text = action.1.desc_19
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_irenic_monarchy
					has_government = gov_irenic_dictatorship
					has_government = gov_celestial_empire
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Generic Autocrat
	desc = {
		text = action.1.desc_20
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_despotic_empire
					has_government = gov_feudal_empire
					has_government = gov_constitutional_dictatorship
					has_government = gov_enlightened_monarchy
					has_government = gov_elective_monarchy
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Military Oligarch
	desc = {
		text = action.1.desc_21
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_military_junta
					has_government = gov_war_council
					has_government = gov_citizen_stratocracy
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Spiritualist Oligarch
	desc = {
		text = action.1.desc_22
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_theocratic_oligarchy
					has_government = gov_holy_tribunal
					has_government = gov_grim_council
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Materialist Oligarch
	desc = {
		text = action.1.desc_23
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_executive_committee
					has_government = gov_science_directorate
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Pacifist Oligarch
	desc = {
		text = action.1.desc_24
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				has_government = gov_irenic_bureaucracy
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Generic Oligarch
	desc = {
		text = action.1.desc_25
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_megacorporation
					has_government = gov_plutocratic_oligarchy
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Militarist Democrat
	desc = {
		text = action.1.desc_26
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_military_commissariat
					has_government = gov_assembly_of_clans
					has_government = gov_citizen_republic
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Spiritualist Democrat
	desc = {
		text = action.1.desc_27
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				has_government = gov_theocratic_republic
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Materialist Democrat
	desc = {
		text = action.1.desc_28
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_direct_democracy
					has_government = gov_rational_consensus
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Pacifist Democrat
	desc = {
		text = action.1.desc_29
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				has_government = gov_moral_democracy
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Generic Democrat
	desc = {
		text = action.1.desc_30
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				has_government = gov_representative_democracy
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	### Xenophile
	# Militarist Autocrat
	desc = {
		text = action.1.desc_31
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_star_empire
					has_government = gov_military_dictatorship
					has_government = gov_martial_empire
					has_government = gov_martial_dictatorship
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Spiritualist Autocrat
	desc = {
		text = action.1.desc_32
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_theocratic_monarchy
					has_government = gov_theocratic_dictatorship
					has_government = gov_divine_empire
					has_government = gov_sacrificial_megachurch
					has_government = gov_mortal_empire
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Materialist Autocrat
	desc = {
		text = action.1.desc_33
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_despotic_hegemony
					has_government = gov_totalitarian_regime
					has_government = gov_illuminated_autocracy
					has_government = gov_technocratic_dictatorship
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Pacifist Autocrat
	desc = {
		text = action.1.desc_34
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_irenic_monarchy
					has_government = gov_irenic_dictatorship
					has_government = gov_celestial_empire
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Generic Autocrat
	desc = {
		text = action.1.desc_35
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_despotic_empire
					has_government = gov_feudal_empire
					has_government = gov_constitutional_dictatorship
					has_government = gov_enlightened_monarchy
					has_government = gov_elective_monarchy
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Military Oligarch
	desc = {
		text = action.1.desc_36
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_military_junta
					has_government = gov_war_council
					has_government = gov_citizen_stratocracy
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Spiritualist Oligarch
	desc = {
		text = action.1.desc_37
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_theocratic_oligarchy
					has_government = gov_holy_tribunal
					has_government = gov_grim_council
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Materialist Oligarch
	desc = {
		text = action.1.desc_38
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_executive_committee
					has_government = gov_science_directorate
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Pacifist Oligarch
	desc = {
		text = action.1.desc_39
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_irenic_bureaucracy
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Generic Oligarch
	desc = {
		text = action.1.desc_40
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_megacorporation
					has_government = gov_plutocratic_oligarchy
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Militarist Democrat
	desc = {
		text = action.1.desc_41
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_military_commissariat
					has_government = gov_assembly_of_clans
					has_government = gov_citizen_republic
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Spiritualist Democrat
	desc = {
		text = action.1.desc_42
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_theocratic_republic
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Materialist Democrat
	desc = {
		text = action.1.desc_43
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_direct_democracy
					has_government = gov_rational_consensus
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Pacifist Democrat
	desc = {
		text = action.1.desc_44
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_moral_democracy
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Generic Democrat
	desc = {
		text = action.1.desc_45
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_representative_democracy
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Cruel Foxcat
	desc = {
		text = action.1.desc_49
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				has_valid_civic = civic_fanatic_purifiers
				species_portrait = mam3
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Hive Mind
	desc = {
		text = action.1.desc_50
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				has_authority = auth_hive_mind
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Fanatic Purifier
	desc = {
		text = action.1.desc_51
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				has_valid_civic = civic_fanatic_purifiers
				NAND = {
					has_valid_civic = civic_fanatic_purifiers
					species_portrait = mam3
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Devouring Swarm
	desc = {
		text = action.1.desc_52
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				has_authority = auth_hive_mind
				has_valid_civic = civic_hive_devouring_swarm
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}


	# Generic Machine Empire (To Organics)
	desc = {
		text = action.1.desc_70
		trigger = {
			first_contact_custom_greeting = no
			NOR = {
				is_same_species = event_target:contact_empire
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_government = gov_machine_empire
					has_government = gov_machine_research
					has_government = gov_machine_industrial
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Generic Machine Empire (To Machines)
	desc = {
		text = action.1.desc_71
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			OR = {
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_government = gov_machine_empire
					has_government = gov_machine_research
					has_government = gov_machine_industrial
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Terminator Machine Empire (To Organics)
	desc = {
		text = action.1.desc_72
		trigger = {
			first_contact_custom_greeting = no
			NOR = {
				is_same_species = event_target:contact_empire
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				has_government = gov_machine_terminator
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Terminator Machine Empire (To Machines)
	desc = {
		text = action.1.desc_73
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			OR = {
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				has_government = gov_machine_terminator
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Assimilator Machine Empire (To Organics)
	desc = {
		text = action.1.desc_74
		trigger = {
			first_contact_custom_greeting = no
			NOR = {
				is_same_species = event_target:contact_empire
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				has_government = gov_machine_assimilator
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Assimilator Machine Empire (To Machines)
	desc = {
		text = action.1.desc_75
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			OR = {
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				has_government = gov_machine_assimilator
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Servitor Machine Empire (To Organics)
	desc = {
		text = action.1.desc_76
		trigger = {
			first_contact_custom_greeting = no
			NOR = {
				is_same_species = event_target:contact_empire
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				has_government = gov_machine_servitor
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Servitor Machine Empire (To Machines)
	desc = {
		text = action.1.desc_77
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			OR = {
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				has_government = gov_machine_servitor
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	#Fallen Machine Empire (To Organics)
	desc = {
		text = action.1.desc_78
		trigger = {
			first_contact_custom_greeting = no
			NOR = {
				is_same_species = event_target:contact_empire
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = fallen_empire
				has_authority = auth_machine_intelligence
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Fallen Machine Empire (To Machines)
	desc = {
		text = action.1.desc_79
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			OR = {
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = fallen_empire
				has_authority = auth_machine_intelligence
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Junkheap Ratlings Empire (To those who have taken their systems)
	desc = {
		text = "action.1.desc_80"
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			exists = event_target:ratling_country
			event_target:contact_empire = {
				is_same_value = event_target:ratling_country
			}
			any_system_within_border = {
				has_star_flag = ratling_system
			}
		}
	}

	# Junkheap Ratlings Empire (To those who have not taken their systems)
	desc = {
		text = "action.1.desc_81"
		trigger = {
			first_contact_custom_greeting = no
			exists = event_target:ratling_country
			event_target:contact_empire = {
				is_same_value = event_target:ratling_country
			}
			NOR = {
				is_same_species = event_target:contact_empire
				any_system_within_border = {
					has_star_flag = ratling_system
				}
			}
		}
	}

	# Fallen Empire 1
	desc = {
		text = action.1.desc_60
		trigger = {
			event_target:contact_empire = {
				is_country_type = fallen_empire
				NOT = { has_ethic = ethic_gestalt_consciousness }
				NOT = { has_ethic = ethic_fanatic_xenophobe }
				NOT = { has_ethic = ethic_fanatic_xenophile }
				NOT = { has_ethic = ethic_fanatic_materialist }
				NOT = { has_ethic = ethic_fanatic_spiritualist }
			}
		}
	}
	# Fallen Empire 2
	desc = {
		text = action.1.desc_62
		trigger = {
			event_target:contact_empire = {
				is_country_type = fallen_empire
				has_ethic = ethic_fanatic_xenophile
			}
		}
	}
	# Fallen Empire 3
	desc = {
		text = action.1.desc_63
		trigger = {
			event_target:contact_empire = {
				is_country_type = fallen_empire
				has_ethic = ethic_fanatic_xenophobe
			}
		}
	}
	# Fallen Empire 4
	desc = {
		text = action.1.desc_64
		trigger = {
			event_target:contact_empire = {
				is_country_type = fallen_empire
				has_ethic = ethic_fanatic_materialist
			}
		}
	}
	# Fallen Empire 5
	desc = {
		text = action.1.desc_65
		trigger = {
			event_target:contact_empire = {
				is_country_type = fallen_empire
				has_ethic = ethic_fanatic_spiritualist
			}
		}
	}
	# Awakened Fallen Empire 1
	desc = {
		text = action.1.desc_66
		trigger = {
			event_target:contact_empire = {
				is_country_type = awakened_fallen_empire
				has_ethic = ethic_fanatic_spiritualist
			}
		}
	}
	# Awakened Fallen Empire 2
	desc = {
		text = action.1.desc_67
		trigger = {
			event_target:contact_empire = {
				is_country_type = awakened_fallen_empire
				has_ethic = ethic_fanatic_xenophile
			}
		}
	}
	# Awakened Fallen Empire 3
	desc = {
		text = action.1.desc_68
		trigger = {
			event_target:contact_empire = {
				is_country_type = awakened_fallen_empire
				has_ethic = ethic_fanatic_xenophobe
			}
		}
	}
	# Awakened Fallen Empire 4
	desc = {
		text = action.1.desc_69
		trigger = {
			event_target:contact_empire = {
				is_country_type = awakened_fallen_empire
				has_ethic = ethic_fanatic_materialist
			}
		}
	}

	# Lost Colony Greetings (Generic)
	desc = {
		text = "action.1.desc_82"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_generic_government = yes
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# Lost Colony Greetings (Spiritualist)
	desc = {
		text = "action.1.desc_83"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_spiritualist_government = yes
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# Lost Colony Greetings (Militarist)
	desc = {
		text = "action.1.desc_84"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_militarist_government = yes
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# Lost Colony Greetings (Pacifist)
	desc = {
		text = "action.1.desc_85"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_pacifist_government = yes
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# Lost Colony Greetings (Materialist)
	desc = {
		text = "action.1.desc_86"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_materialist_government = yes
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# Lost Colony Greetings (MegaCorp)
	desc = {
		text = "action.1.desc_87"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_authority = auth_corporate
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# Lost Colony Greetings (Purifiers)
	desc = {
		text = "action.1.desc_88"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_valid_civic = civic_fanatic_purifiers
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# UNE to CoM
	desc = {
		text = "action.1.desc_89"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				#has_country_flag = lost_colony_parent_of@root
				has_country_flag = human_1
			}
			has_country_flag = human_2
			has_origin = origin_lost_colony
		}
	}

	# CoM to UNE
	desc = {
		text = "action.1.desc_90"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = human_2
			}
			has_country_flag = human_1
		}
	}

	diplomatic = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
		event_target:contact_empire = {
			is_primitive = no
			NOR = {
				is_tiyanki_country_type = yes
				is_country_type = neutral_faction
				is_country_type = faction
				is_country_type = pirate
				#is_country_type = nomad #triggered in a special case event
				is_amoeba_country_type = yes
				is_drone_country_type = yes
				is_crystal_country_type = yes
				is_country_type = cloud
				is_country_type = enclave
				has_relation_flag = { flag = AbandonedRefugees who = root }
			}
		}
	}

	immediate = {
		if = {
			limit = { event_target:contact_empire = { is_country_type = default } }
			country_event = { id = tutorial.2006 } #"First Contact Established" (regular version)
		}
		else = {
			country_event = { id = tutorial.2007 } #"First Contact Established" (Marauder/FE version)
		}
		country_event = { id = anomaly.4016 }
		event_target:contact_empire = {
			save_event_target_as = contact_speaker
		}
	}

	# For the event options:
	# 	- Note 1: If multiple of the triggered option names return true, it'll pick a random one among those that are available.
	# 	- Note 2: If none of them return true, it will pick the first one in the list. So it should be something suitably generic.

	# copy any changes in these options to action.100 below

	option = { #friendly
		name = {
			text = action.1.e
			trigger = {
				NOT = { is_same_species = event_target:contact_empire }
				is_xenophile = yes
			}
		}
		name = {
			text = action.1.c
			trigger = {
				NOT = { is_same_species = event_target:contact_empire }
				is_xenophile = yes
			}
		}
		name = {
			text = action.1.h
			trigger = {
				is_egalitarian = yes
			}
		}
		name = {
			text = action.1.n
			trigger = {
				is_spiritualist = yes
				event_target:contact_empire = { NOT = { has_authority = auth_machine_intelligence } }
			}
		}
		name = {
			text = action.1.ag
			trigger = {
				is_materialist = yes
			}
		}
		name = {
			text = action.1.ah
			trigger = {
				is_xenophile = yes
			}
		}
		name = {
			text = action.1.ai
			trigger = {
				is_xenophile = yes
				is_egalitarian = yes
			}
		}
		name = {
			text = action.1.aj
			trigger = {
				is_xenophile = yes
				is_authoritarian = yes
			}
		}
		name = {
			text = action.1.ak
			trigger = {
				OR = {
					is_xenophile = yes
					is_militarist = yes
				}
			}
		}
		name = {
			text = action.1.al
			trigger = {
				is_egalitarian = yes
			}
		}
		name = {
			text = action.1.am
			trigger = {
				is_spiritualist = yes
			}
		}
		name = {
			text = action.1.j
			trigger = {
				is_militarist = yes
			}
		}
		name = {
			text = action.1.l
			trigger = {
				is_pacifist = yes
			}
		}
		name = {
			text = action.1.p
			trigger = {
				is_materialist = yes
			}
		}
		name = {
			text = action.1.av
			trigger = {
				is_spiritualist = yes
			}
		}
		name = {
			text = action.1.aag
			trigger = {
				has_origin = origin_lost_colony
				event_target:contact_empire = {
					has_country_flag = special_intro_for@root
					has_country_flag = lost_colony_parent_of@root
				}
			}
		}
		name = {
			text = action.1.hm
			trigger = {
				has_authority = auth_hive_mind
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
			}
		}
		name = {
			text = action.1.me
			trigger = {
				has_authority = auth_machine_intelligence
				NOT = { has_valid_civic = civic_machine_terminator }
			}
		}
		name = {
			text = action.1.mtm
			trigger = {
				has_valid_civic = civic_machine_terminator
				event_target:contact_empire = { has_authority = auth_machine_intelligence }
			}
		}
		name = {
			text = action.1.o
			trigger = {
				is_spiritualist = yes
				event_target:contact_empire = { NOT = { has_authority = auth_machine_intelligence } }
			}
		}
		name = {
			text = action.1.as
			trigger = {
				is_pacifist = yes
			}
		}
		name = {
			text = action.1.af
			trigger = {
				is_xenophobe = yes
			}
		}

		icon = {
			icon = GFX_option_icon_friendly
			text = seek_friends_tt
		}

		allow = {
			custom_tooltip_fail = {
				text = friendship_already_precluded
				event_target:contact_empire = {
					NOR = {
						has_opinion_modifier = {
							who = root
							modifier = opinion_caught_hacking
						}
						has_opinion_modifier = {
							who = root
							modifier = opinion_hostile_first_contact
						}
						has_opinion_modifier = {
							who = root
							modifier = opinion_hostile_first_contact_vivisection
						}
						has_opinion_modifier = {
							who = root
							modifier = opinion_hostile_first_contact_hungry
						}
					}
				}
			}
		}

		if = {
			limit = {
				OR = {
					NOT = { is_country_type = default }
					event_target:contact_empire = { is_country_type = fallen_empire }
				}
			}
			custom_tooltip = action.1.fe_option
		}
		else = {
			custom_tooltip = seek_friends_tt

			event_target:contact_empire = {
				add_opinion_modifier = {
					who = root
					modifier = opinion_friendly_first_comms_greeting
				}
			}
		}

		trigger = {
			OR = {
				is_homicidal = no
				AND = {
					has_valid_civic = civic_machine_terminator
					event_target:contact_empire = { has_authority = auth_machine_intelligence }
				}
			}
			NOT = { has_valid_civic = civic_inwards_perfection }
			NAND = {
				has_ethic = ethic_fanatic_spiritualist
				event_target:contact_empire = { has_authority = auth_machine_intelligence }
			}
			OR = {
				NOT = { has_ethic = ethic_fanatic_xenophobe }
				event_target:contact_empire = { is_same_species = root }
			}
		}

		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				is_xenophile = yes
			}
			modifier = {
				factor = 0.5
				OR = {
					is_xenophobe = yes
					is_gestalt = yes
				}
			}
			modifier = {
				factor = 4 #actually *2 as it is multiplied by *0.5 in the above modifier
				OR = {
					AND = {
						is_machine_empire = yes
						event_target:contact_empire = { is_machine_empire = yes }
					}
					AND = {
						is_hive_empire = yes
						event_target:contact_empire = { is_hive_empire = yes }
					}
				}
			}
			modifier = {
				factor = 0.1
				first_contact_custom_greeting = yes #basically, various hostility
			}
		}
	}
	option = { #hostile - isolationist
		name = {
			text = action.1.ac
			trigger = {
				is_xenophobe = yes
			}
		}
		name = {
			text = action.1.aab
			trigger = {
				OR = {
					is_xenophobe = yes
					is_materialist = yes
				}
				NOT = { is_same_species = event_target:contact_empire }
			}
		}
		name = {
			text = action.1.ad
			trigger = {
				is_authoritarian = yes
			}
		}
		name = {
			text = action.1.d
			trigger = {
				NOT = { is_same_species = event_target:contact_empire }
				is_xenophobe = yes
			}
		}
		name = {
			text = action.1.i
			trigger = {
				is_egalitarian = yes
			}
		}
		name = {
			text = action.1.m
			trigger = {
				is_pacifist = yes
			}
		}
		name = {
			text = action.1.r
			trigger = {
				is_spiritualist = yes
				event_target:contact_empire = { has_authority = auth_machine_intelligence }
			}
		}
		name = {
			text = action.1.aa
			trigger = {
				is_materialist = yes
			}
		}
		name = {
			text = action.1.ao
			trigger = {
				is_militarist = yes
			}
		}
		name = {
			text = action.1.aaa
			trigger = {
				is_authoritarian = yes
			}
		}
		name = {
			text = action.1.aae
			trigger = {
				is_authoritarian = yes
			}
		}
		name = {
			text = action.1.t1
			trigger = {
				is_xenophile = yes
			}
		}
		name = {
			text = action.1.t2
			trigger = {
				is_spiritualist = yes
			}
		}
		name = {
			text = action.1.t3
			trigger = {
				is_hive_empire = yes
			}
		}
		name = {
			text = action.1.t4
			trigger = {
				is_machine_empire = yes
				NOR = {
					has_valid_civic = civic_machine_assimilator
					has_valid_civic = civic_machine_terminator
				}
			}
		}
		name = {
			text = action.1.t5
			trigger = {
				has_valid_civic = civic_machine_assimilator
			}
		}
		name = {
			text = action.1.t6
			trigger = {
				has_valid_civic = civic_machine_terminator
			}
		}

		icon = {
			icon = GFX_option_icon_isolationist
			text = seek_isolation_tt_short
		}

		if = {
			limit = {
				OR = {
					NOT = { is_country_type = default }
					event_target:contact_empire = { NOT = { is_country_type = default } }
				}
			}
			custom_tooltip = action.1.fe_option
		}
		else = {
			custom_tooltip = seek_isolation_tt

			hidden_effect = {
				event_target:contact_empire = {
					random_spynetwork = {
						limit = { target = { is_same_value = root } }
						add_modifier = {
							modifier = first_comms_defensive
							years = 15
						}
					}
				}
			}
		}

		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				is_xenophobe = yes
				is_militarist = no
			}
			modifier = {
				factor = 2
				has_valid_civic = civic_inwards_perfection
			}
		}
	}
	option = { #hostile - expansionist
		name = {
			text = action.1.ae
			trigger = {
				OR = {
					is_xenophobe = yes
					is_militarist = yes
				}
			}
		}
		name = {
			text = action.1.ds
			trigger = {
				has_valid_civic = civic_hive_devouring_swarm
			}
		}
		name = {
			text = action.1.mt
			trigger = {
				is_machine_empire = yes
			}
		}
		name = {
			text = action.1.aac
			trigger = {
				is_militarist = yes
				OR = {
					is_spiritualist = yes
					is_authoritarian = yes
				}
			}
		}
		name = {
			text = action.1.aad
			trigger = {
				is_spiritualist = yes
				NOT = { is_same_species = event_target:contact_empire }
			}
		}
		name = {
			text = action.1.b
			trigger = {
				NOT = { is_same_species = event_target:contact_empire }
				is_xenophobe = yes
			}
		}
		name = {
			text = action.1.s
			trigger = {
				is_spiritualist = yes
				event_target:contact_empire = { has_authority = auth_machine_intelligence }
			}
		}
		name = {
			text = action.1.ab
			trigger = {
				is_spiritualist = yes
				NOT = { is_same_species = event_target:contact_empire }
			}
		}
		name = {
			text = action.1.an
			trigger = {
				is_militarist = yes
			}
		}
		name = {
			text = action.1.at
			trigger = {
				is_militarist = yes
			}
		}
		name = {
			text = action.1.au
			trigger = {
				is_spiritualist = yes
				is_militarist = yes
			}
		}
		name = {
			text = action.1.k
			trigger = {
				OR = {
					is_militarist = yes
					is_authoritarian = yes
				}
			}
		}
		name = {
			text = action.1.ax
			trigger = {
				OR = {
					is_materialist = yes
					is_egalitarian = yes
					is_pacifist = yes
				}
			}
		}
		name = {
			text = action.1.u1
			trigger = {
				is_xenophile = yes
			}
		}
		name = {
			text = action.1.u2
			trigger = {
				is_authoritarian = yes
			}
		}
		name = {
			text = action.1.u3
			trigger = {
				is_gestalt = yes
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
			}
		}

		icon = {
			icon = GFX_option_icon_hostile
			text = seek_enemies_tt_short
		}

		if = {
			limit = {
				OR = {
					NOT = { is_country_type = default }
					event_target:contact_empire = { NOT = { is_country_type = default } }
				}
			}
			custom_tooltip = action.1.fe_option
		}
		else = {
			custom_tooltip = seek_enemies_tt

			event_target:contact_empire = {
				add_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_comms_greeting
				}
			}
			hidden_effect = {
				random_spynetwork = {
					limit = {
						owner = { is_same_value = root }
						target = { is_same_value = event_target:contact_empire }
					}
					add_modifier = {
						modifier = first_comms_hostility_preparations
						years = 15
					}
				}
			}
		}

		trigger = {
			NOR = {
				has_ethic = ethic_fanatic_pacifist
				has_valid_civic = civic_inwards_perfection
			}
		}

		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				is_homicidal = yes
			}
			modifier = {
				factor = 2
				is_militarist = yes
			}
			modifier = {
				factor = 0.5
				is_pacifist = yes
			}
			modifier = {
				factor = 2
				first_contact_custom_greeting = yes #basically, various hostility
			}
			modifier = {
				factor = 0.1
				is_in_federation_with = event_target:contact_empire #just in case
			}
		}
	}

	after = {
		if = {
			limit = {
				NOT = {
					event_target:contact_empire = { has_relation_flag = { flag = no_coms who = root } }
				}
			}
			hidden_effect = {
				country_event = { id = progress.4 }
				country_event = { id = progress.5 }
				country_event = { id = progress.6 }
				#country_event = { id = story.7 days = 30 }
				if = {
					limit = {
						event_target:contact_empire = {
							OR = {
								is_country_type = fallen_empire
								is_country_type = awakened_fallen_empire
							}
						}
					}
					set_country_flag = Story7
					set_country_flag = has_encountered_other_empire
					if = {
						limit = { NOT = { has_country_flag = StoryFirst } }
						set_country_flag = StoryFirst
					}
				}
			}
		}
	}
}

### Duplicated action.1 so we can message both sides
country_event = {
	id = action.100
	title = action.1.name
	message_desc = action.1.message

	picture_event_data = {
		portrait = event_target:contact_empire
		planet_background = event_target:contact_empire
		graphical_culture = event_target:contact_empire
		city_level = event_target:contact_empire
		room = event_target:contact_empire.ruler
	}

	### Custom First Contact system flavour
	desc = {
		text = action.1.desc_hacking_01
		trigger = {
			event_target:contact_empire = {
				is_homicidal = no
				is_gestalt = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_caught_hacking
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hacking_02
		trigger = {
			event_target:contact_empire = {
				is_homicidal = no
				is_machine_empire = yes
				has_opinion_modifier = {
					who = root
					modifier = opinion_caught_hacking
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hacking_03
		trigger = {
			event_target:contact_empire = {
				is_homicidal = no
				is_hive_empire = yes
				has_opinion_modifier = {
					who = root
					modifier = opinion_caught_hacking
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_01
		trigger = {
			event_target:contact_empire = {
				is_pacifist = no
				is_xenophile = no
				OR = {
					is_xenophobe = no
					is_same_species = root
				}
				is_gestalt = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_02
		trigger = {
			event_target:contact_empire = {
				OR = {
					is_pacifist = yes
					is_xenophile = yes
				}
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_03
		trigger = {
			event_target:contact_empire = {
				is_machine_empire = yes
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_04
		trigger = {
			event_target:contact_empire = {
				is_hive_empire = yes
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_05
		trigger = {
			event_target:contact_empire = {
				is_xenophobe = yes
				is_homicidal = no
				is_pacifist = no
				NOT = { is_same_species = root }
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact
				}
			}
		}
	}
	desc = {
		text = action.1.desc_they_hostile_01
		trigger = {
			event_target:contact_empire = {
				is_gestalt = no
			}
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_vivisection
			}
		}
	}
	desc = {
		text = action.1.desc_they_hostile_02
		trigger = {
			event_target:contact_empire = {
				is_machine_empire = yes
			}
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_vivisection
			}
		}
	}
	desc = {
		text = action.1.desc_they_hostile_03
		trigger = {
			event_target:contact_empire = {
				is_hive_empire = yes
			}
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_vivisection
			}
		}
	}
	desc = {
		text = action.1.desc_vivisection_01
		trigger = {
			event_target:contact_empire = {
				is_pacifist = no
				is_machine_empire = no
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_vivisection
				}
			}
		}
	}
	desc = {
		text = action.1.desc_vivisection_02
		trigger = {
			event_target:contact_empire = {
				is_pacifist = yes
				is_machine_empire = no
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_vivisection
				}
			}
		}
	}
	desc = {
		text = action.1.desc_vivisection_03
		trigger = {
			event_target:contact_empire = {
				is_machine_empire = yes
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_vivisection
				}
			}
		}
	}
	desc = {
		text = action.1.desc_vivisection_04
		trigger = {
			event_target:contact_empire = {
				is_hive_empire = yes
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_vivisection
				}
			}
		}
	}
	desc = {
		text = action.1.desc_they_vivisect_01
		trigger = {
			is_synthetic_empire = no
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_vivisection
			}
		}
	}
	desc = {
		text = action.1.desc_they_vivisect_02
		trigger = {
			is_synthetic_empire = yes
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_vivisection
			}
		}
	}
	desc = {
		text = action.1.desc_hungry_01
		trigger = {
			event_target:contact_empire = {
				is_pacifist = no
				is_lithoid = no
				is_machine_empire = no
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_hungry
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hungry_02
		trigger = {
			event_target:contact_empire = {
				is_pacifist = yes
				is_lithoid = no
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_hungry
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hungry_03
		trigger = {
			event_target:contact_empire = {
				is_machine_empire = yes
				is_lithoid = no
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_hungry
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hungry_04
		trigger = {
			event_target:contact_empire = {
				is_lithoid = yes
				is_hive_empire = no
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_hungry
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hungry_05
		trigger = {
			event_target:contact_empire = {
				is_hive_empire = yes
				is_homicidal = no
				has_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_contact_hungry
				}
			}
		}
	}
	desc = {
		text = action.1.desc_they_hungry_01
		trigger = {
			is_synthetic_empire = no
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_hungry
			}
		}
	}
	desc = {
		text = action.1.desc_they_hungry_02
		trigger = {
			is_synthetic_empire = yes
			has_opinion_modifier = {
				who = event_target:contact_empire
				modifier = opinion_hostile_first_contact_hungry
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_to_homicidal_01
		trigger = {
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				has_valid_civic = civic_fanatic_purifiers
				OR = {
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_hungry
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_vivisection
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact
					}
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_to_homicidal_02
		trigger = {
			is_machine_empire = no
			event_target:contact_empire = {
				has_valid_civic = civic_machine_terminator
				OR = {
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_hungry
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_vivisection
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact
					}
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_to_homicidal_03
		trigger = {
			is_machine_empire = yes
			event_target:contact_empire = {
				has_valid_civic = civic_machine_terminator
				OR = {
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_hungry
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_vivisection
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact
					}
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_to_homicidal_04
		trigger = {
			event_target:contact_empire = {
				has_valid_civic = civic_hive_devouring_swarm
				OR = {
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_hungry
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_vivisection
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact
					}
				}
			}
		}
	}
	desc = {
		text = action.1.desc_hostile_to_homicidal_05
		trigger = {
			is_same_species = event_target:contact_empire
			event_target:contact_empire = {
				has_valid_civic = civic_fanatic_purifiers
				OR = {
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_hungry
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact_vivisection
					}
					has_opinion_modifier = {
						who = root
						modifier = opinion_hostile_first_contact
					}
				}
			}
		}
	}


	### Normal (Not Xenophobe or Xenophile)
	# Militarist Autocrat
	desc = {
		text = action.1.desc_01
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_star_empire
					has_government = gov_military_dictatorship
					has_government = gov_martial_empire
					has_government = gov_martial_dictatorship
					has_government = gov_band_blood
				}
			}
		}
	}
	# Spiritualist Autocrat
	desc = {
		text = action.1.desc_02
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_theocratic_monarchy
					has_government = gov_theocratic_dictatorship
					has_government = gov_divine_empire
					has_government = gov_sacrificial_megachurch
					has_government = gov_mortal_empire
				}
			}
		}
	}
	# Materialist Autocrat
	desc = {
		text = action.1.desc_03
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_despotic_hegemony
					has_government = gov_totalitarian_regime
					has_government = gov_illuminated_autocracy
					has_government = gov_technocratic_dictatorship
				}
			}
		}
	}
	# Pacifist Autocrat
	desc = {
		text = action.1.desc_04
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_irenic_monarchy
					has_government = gov_irenic_dictatorship
					has_government = gov_celestial_empire
				}
			}
		}
	}
	# Generic Autocrat
	desc = {
		text = action.1.desc_05
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_despotic_empire
					has_government = gov_feudal_empire
					has_government = gov_constitutional_dictatorship
					has_government = gov_enlightened_monarchy
					has_government = gov_elective_monarchy
				}
			}
		}
	}
	# Military Oligarch
	desc = {
		text = action.1.desc_06
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_military_junta
					has_government = gov_war_council
					has_government = gov_citizen_stratocracy
				}
			}
		}
	}
	# Spiritualist Oligarch
	desc = {
		text = action.1.desc_07
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_theocratic_oligarchy
					has_government = gov_holy_tribunal
					has_government = gov_grim_council
				}
			}
		}
	}
	# Materialist Oligarch
	desc = {
		text = action.1.desc_08
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_executive_committee
					has_government = gov_science_directorate
				}
			}
		}
	}
	# Pacifist Oligarch
	desc = {
		text = action.1.desc_09
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
					AND = {
						exists = event_target:ratling_country
						is_same_value = event_target:ratling_country
					}
				}
				has_government = gov_irenic_bureaucracy
			}
		}
	}
	# Generic Oligarch
	desc = {
		text = action.1.desc_10
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_megacorporation
					has_government = gov_plutocratic_oligarchy
				}
			}
		}
	}
	# Militarist Democrat
	desc = {
		text = action.1.desc_11
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_military_commissariat
					has_government = gov_assembly_of_clans
					has_government = gov_citizen_republic
				}
			}
		}
	}
	# Spiritualist Democrat
	desc = {
		text = action.1.desc_12
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_theocratic_republic
			}
		}
	}
	# Materialist Democrat
	desc = {
		text = action.1.desc_13
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_direct_democracy
					has_government = gov_rational_consensus
				}
			}
		}
	}
	# Pacifist Democrat
	desc = {
		text = action.1.desc_14
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_moral_democracy
			}
		}
	}
	# Generic Democrat
	desc = {
		text = action.1.desc_15
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				NOR = {
					has_country_flag = special_intro_for@root
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_representative_democracy
			}
		}
	}

	### Xenophobe
	# Militarist Autocrat
	desc = {
		text = action.1.desc_16
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_star_empire
					has_government = gov_military_dictatorship
					has_government = gov_martial_empire
					has_government = gov_martial_dictatorship
					has_government = gov_band_blood
				}
				NOR = {
					has_country_flag = special_intro_for@root
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_hive_devouring_swarm
				}
			}
		}
	}
	# Spiritualist Autocrat
	desc = {
		text = action.1.desc_17
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_theocratic_monarchy
					has_government = gov_theocratic_dictatorship
					has_government = gov_divine_empire
					has_government = gov_sacrificial_megachurch
					has_government = gov_mortal_empire
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Materialist Autocrat
	desc = {
		text = action.1.desc_18
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_despotic_hegemony
					has_government = gov_totalitarian_regime
					has_government = gov_illuminated_autocracy
					has_government = gov_technocratic_dictatorship
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Pacifist Autocrat
	desc = {
		text = action.1.desc_19
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_irenic_monarchy
					has_government = gov_irenic_dictatorship
					has_government = gov_celestial_empire
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Generic Autocrat
	desc = {
		text = action.1.desc_20
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_despotic_empire
					has_government = gov_feudal_empire
					has_government = gov_constitutional_dictatorship
					has_government = gov_enlightened_monarchy
					has_government = gov_elective_monarchy
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Military Oligarch
	desc = {
		text = action.1.desc_21
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_military_junta
					has_government = gov_war_council
					has_government = gov_citizen_stratocracy
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Spiritualist Oligarch
	desc = {
		text = action.1.desc_22
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_theocratic_oligarchy
					has_government = gov_holy_tribunal
					has_government = gov_grim_council
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Materialist Oligarch
	desc = {
		text = action.1.desc_23
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_executive_committee
					has_government = gov_science_directorate
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Pacifist Oligarch
	desc = {
		text = action.1.desc_24
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				has_government = gov_irenic_bureaucracy
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Generic Oligarch
	desc = {
		text = action.1.desc_25
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_megacorporation
					has_government = gov_plutocratic_oligarchy
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Militarist Democrat
	desc = {
		text = action.1.desc_26
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_military_commissariat
					has_government = gov_assembly_of_clans
					has_government = gov_citizen_republic
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Spiritualist Democrat
	desc = {
		text = action.1.desc_27
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				has_government = gov_theocratic_republic
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Materialist Democrat
	desc = {
		text = action.1.desc_28
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				OR = {
					has_government = gov_direct_democracy
					has_government = gov_rational_consensus
				}
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Pacifist Democrat
	desc = {
		text = action.1.desc_29
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				has_government = gov_moral_democracy
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Generic Democrat
	desc = {
		text = action.1.desc_30
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
				has_government = gov_representative_democracy
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	### Xenophile
	# Militarist Autocrat
	desc = {
		text = action.1.desc_31
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_star_empire
					has_government = gov_military_dictatorship
					has_government = gov_martial_empire
					has_government = gov_martial_dictatorship
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Spiritualist Autocrat
	desc = {
		text = action.1.desc_32
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_theocratic_monarchy
					has_government = gov_theocratic_dictatorship
					has_government = gov_divine_empire
					has_government = gov_sacrificial_megachurch
					has_government = gov_mortal_empire
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Materialist Autocrat
	desc = {
		text = action.1.desc_33
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_despotic_hegemony
					has_government = gov_totalitarian_regime
					has_government = gov_illuminated_autocracy
					has_government = gov_technocratic_dictatorship
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Pacifist Autocrat
	desc = {
		text = action.1.desc_34
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_irenic_monarchy
					has_government = gov_irenic_dictatorship
					has_government = gov_celestial_empire
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Generic Autocrat
	desc = {
		text = action.1.desc_35
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_despotic_empire
					has_government = gov_feudal_empire
					has_government = gov_constitutional_dictatorship
					has_government = gov_enlightened_monarchy
					has_government = gov_elective_monarchy
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Military Oligarch
	desc = {
		text = action.1.desc_36
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_military_junta
					has_government = gov_war_council
					has_government = gov_citizen_stratocracy
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Spiritualist Oligarch
	desc = {
		text = action.1.desc_37
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_theocratic_oligarchy
					has_government = gov_holy_tribunal
					has_government = gov_grim_council
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Materialist Oligarch
	desc = {
		text = action.1.desc_38
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_executive_committee
					has_government = gov_science_directorate
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Pacifist Oligarch
	desc = {
		text = action.1.desc_39
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_irenic_bureaucracy
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Generic Oligarch
	desc = {
		text = action.1.desc_40
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_megacorporation
					has_government = gov_plutocratic_oligarchy
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Militarist Democrat
	desc = {
		text = action.1.desc_41
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_military_commissariat
					has_government = gov_assembly_of_clans
					has_government = gov_citizen_republic
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Spiritualist Democrat
	desc = {
		text = action.1.desc_42
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_theocratic_republic
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Materialist Democrat
	desc = {
		text = action.1.desc_43
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				OR = {
					has_government = gov_direct_democracy
					has_government = gov_rational_consensus
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Pacifist Democrat
	desc = {
		text = action.1.desc_44
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_moral_democracy
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}
	# Generic Democrat
	desc = {
		text = action.1.desc_45
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
				has_government = gov_representative_democracy
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Cruel Foxcat
	desc = {
		text = action.1.desc_49
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				has_valid_civic = civic_fanatic_purifiers
				species_portrait = mam3
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Hive Mind
	desc = {
		text = action.1.desc_50
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				has_authority = auth_hive_mind
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Fanatic Purifier
	desc = {
		text = action.1.desc_51
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				has_valid_civic = civic_fanatic_purifiers
				NAND = {
					has_valid_civic = civic_fanatic_purifiers
					species_portrait = mam3
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Devouring Swarm
	desc = {
		text = action.1.desc_52
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			event_target:contact_empire = {
				is_country_type = default
				has_authority = auth_hive_mind
				has_valid_civic = civic_hive_devouring_swarm
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}


	# Generic Machine Empire (To Organics)
	desc = {
		text = action.1.desc_70
		trigger = {
			first_contact_custom_greeting = no
			NOR = {
				is_same_species = event_target:contact_empire
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_government = gov_machine_empire
					has_government = gov_machine_research
					has_government = gov_machine_industrial
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Generic Machine Empire (To Machines)
	desc = {
		text = action.1.desc_71
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			OR = {
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				OR = {
					has_government = gov_machine_empire
					has_government = gov_machine_research
					has_government = gov_machine_industrial
				}
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Terminator Machine Empire (To Organics)
	desc = {
		text = action.1.desc_72
		trigger = {
			first_contact_custom_greeting = no
			NOR = {
				is_same_species = event_target:contact_empire
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				has_government = gov_machine_terminator
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Terminator Machine Empire (To Machines)
	desc = {
		text = action.1.desc_73
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			OR = {
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				has_government = gov_machine_terminator
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Assimilator Machine Empire (To Organics)
	desc = {
		text = action.1.desc_74
		trigger = {
			first_contact_custom_greeting = no
			NOR = {
				is_same_species = event_target:contact_empire
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				has_government = gov_machine_assimilator
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Assimilator Machine Empire (To Machines)
	desc = {
		text = action.1.desc_75
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			OR = {
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				has_government = gov_machine_assimilator
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Servitor Machine Empire (To Organics)
	desc = {
		text = action.1.desc_76
		trigger = {
			first_contact_custom_greeting = no
			NOR = {
				is_same_species = event_target:contact_empire
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				has_government = gov_machine_servitor
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Servitor Machine Empire (To Machines)
	desc = {
		text = action.1.desc_77
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			OR = {
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = default
				has_government = gov_machine_servitor
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	#Fallen Machine Empire (To Organics)
	desc = {
		text = action.1.desc_78
		trigger = {
			first_contact_custom_greeting = no
			NOR = {
				is_same_species = event_target:contact_empire
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = fallen_empire
				has_authority = auth_machine_intelligence
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Fallen Machine Empire (To Machines)
	desc = {
		text = action.1.desc_79
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			OR = {
				has_authority = auth_machine_intelligence
				has_country_flag = synthetic_empire
			}
			event_target:contact_empire = {
				is_country_type = fallen_empire
				has_authority = auth_machine_intelligence
				NOT = { has_country_flag = special_intro_for@root }
			}
		}
	}

	# Junkheap Ratlings Empire (To those who have taken their systems)
	desc = {
		text = "action.1.desc_80"
		trigger = {
			first_contact_custom_greeting = no
			NOT = { is_same_species = event_target:contact_empire }
			exists = event_target:ratling_country
			event_target:contact_empire = {
				is_same_value = event_target:ratling_country
			}
			any_system_within_border = {
				has_star_flag = ratling_system
			}
		}
	}

	# Junkheap Ratlings Empire (To those who have not taken their systems)
	desc = {
		text = "action.1.desc_81"
		trigger = {
			first_contact_custom_greeting = no
			exists = event_target:ratling_country
			event_target:contact_empire = {
				is_same_value = event_target:ratling_country
			}
			NOR = {
				is_same_species = event_target:contact_empire
				any_system_within_border = {
					has_star_flag = ratling_system
				}
			}
		}
	}

	# Fallen Empire 1
	desc = {
		text = action.1.desc_60
		trigger = {
			event_target:contact_empire = {
				is_country_type = fallen_empire
				NOT = { has_ethic = ethic_gestalt_consciousness }
				NOT = { has_ethic = ethic_fanatic_xenophobe }
				NOT = { has_ethic = ethic_fanatic_xenophile }
				NOT = { has_ethic = ethic_fanatic_materialist }
				NOT = { has_ethic = ethic_fanatic_spiritualist }
			}
		}
	}
	# Fallen Empire 2
	desc = {
		text = action.1.desc_62
		trigger = {
			event_target:contact_empire = {
				is_country_type = fallen_empire
				has_ethic = ethic_fanatic_xenophile
			}
		}
	}
	# Fallen Empire 3
	desc = {
		text = action.1.desc_63
		trigger = {
			event_target:contact_empire = {
				is_country_type = fallen_empire
				has_ethic = ethic_fanatic_xenophobe
			}
		}
	}
	# Fallen Empire 4
	desc = {
		text = action.1.desc_64
		trigger = {
			event_target:contact_empire = {
				is_country_type = fallen_empire
				has_ethic = ethic_fanatic_materialist
			}
		}
	}
	# Fallen Empire 5
	desc = {
		text = action.1.desc_65
		trigger = {
			event_target:contact_empire = {
				is_country_type = fallen_empire
				has_ethic = ethic_fanatic_spiritualist
			}
		}
	}
	# Awakened Fallen Empire 1
	desc = {
		text = action.1.desc_66
		trigger = {
			event_target:contact_empire = {
				is_country_type = awakened_fallen_empire
				has_ethic = ethic_fanatic_spiritualist
			}
		}
	}
	# Awakened Fallen Empire 2
	desc = {
		text = action.1.desc_67
		trigger = {
			event_target:contact_empire = {
				is_country_type = awakened_fallen_empire
				has_ethic = ethic_fanatic_xenophile
			}
		}
	}
	# Awakened Fallen Empire 3
	desc = {
		text = action.1.desc_68
		trigger = {
			event_target:contact_empire = {
				is_country_type = awakened_fallen_empire
				has_ethic = ethic_fanatic_xenophobe
			}
		}
	}
	# Awakened Fallen Empire 4
	desc = {
		text = action.1.desc_69
		trigger = {
			event_target:contact_empire = {
				is_country_type = awakened_fallen_empire
				has_ethic = ethic_fanatic_materialist
			}
		}
	}

	# Lost Colony Greetings (Generic)
	desc = {
		text = "action.1.desc_82"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_generic_government = yes
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# Lost Colony Greetings (Spiritualist)
	desc = {
		text = "action.1.desc_83"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_spiritualist_government = yes
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# Lost Colony Greetings (Militarist)
	desc = {
		text = "action.1.desc_84"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_militarist_government = yes
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# Lost Colony Greetings (Pacifist)
	desc = {
		text = "action.1.desc_85"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_pacifist_government = yes
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# Lost Colony Greetings (Materialist)
	desc = {
		text = "action.1.desc_86"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_materialist_government = yes
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# Lost Colony Greetings (MegaCorp)
	desc = {
		text = "action.1.desc_87"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_authority = auth_corporate
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# Lost Colony Greetings (Purifiers)
	desc = {
		text = "action.1.desc_88"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = lost_colony_parent_of@root
				has_valid_civic = civic_fanatic_purifiers
				NOR = {
					has_country_flag = human_1
					has_country_flag = human_2
				}
			}
			has_origin = origin_lost_colony
		}
	}

	# UNE to CoM
	desc = {
		text = "action.1.desc_89"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				#has_country_flag = lost_colony_parent_of@root
				has_country_flag = human_1
			}
			has_country_flag = human_2
			has_origin = origin_lost_colony
		}
	}

	# CoM to UNE
	desc = {
		text = "action.1.desc_90"
		trigger = {
			first_contact_custom_greeting = no
			event_target:contact_empire = {
				has_country_flag = special_intro_for@root
				has_country_flag = human_2
			}
			has_country_flag = human_1
		}
	}

	diplomatic = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
		event_target:contact_empire = {
			is_primitive = no
			NOR = {
				is_tiyanki_country_type = yes
				is_country_type = neutral_faction
				is_country_type = faction
				is_country_type = pirate
				is_amoeba_country_type = yes
				is_drone_country_type = yes
				is_crystal_country_type = yes
				is_country_type = cloud
				has_relation_flag = { flag = AbandonedRefugees who = root }
			}
		}
	}

	immediate = {
		if = {
			limit = { event_target:contact_empire = { is_country_type = default } }
			country_event = { id = tutorial.2006 } #"First Contact Established" (regular version)
		}
		else = {
			country_event = { id = tutorial.2007 } #"First Contact Established" (Marauder/FE version)
		}
		country_event = { id = anomaly.4016 }
		event_target:contact_empire = {
			save_event_target_as = contact_speaker
		}
	}

	# Options are 1:1 copy from action.1

	option = { #friendly
		name = {
			text = action.1.e
			trigger = {
				NOT = { is_same_species = event_target:contact_empire }
				is_xenophile = yes
			}
		}
		name = {
			text = action.1.c
			trigger = {
				NOT = { is_same_species = event_target:contact_empire }
				is_xenophile = yes
			}
		}
		name = {
			text = action.1.h
			trigger = {
				is_egalitarian = yes
			}
		}
		name = {
			text = action.1.n
			trigger = {
				is_spiritualist = yes
				event_target:contact_empire = { NOT = { has_authority = auth_machine_intelligence } }
			}
		}
		name = {
			text = action.1.ag
			trigger = {
				is_materialist = yes
			}
		}
		name = {
			text = action.1.ah
			trigger = {
				is_xenophile = yes
			}
		}
		name = {
			text = action.1.ai
			trigger = {
				is_xenophile = yes
				is_egalitarian = yes
			}
		}
		name = {
			text = action.1.aj
			trigger = {
				is_xenophile = yes
				is_authoritarian = yes
			}
		}
		name = {
			text = action.1.ak
			trigger = {
				OR = {
					is_xenophile = yes
					is_militarist = yes
				}
			}
		}
		name = {
			text = action.1.al
			trigger = {
				is_egalitarian = yes
			}
		}
		name = {
			text = action.1.am
			trigger = {
				is_spiritualist = yes
			}
		}
		name = {
			text = action.1.j
			trigger = {
				is_militarist = yes
			}
		}
		name = {
			text = action.1.l
			trigger = {
				is_pacifist = yes
			}
		}
		name = {
			text = action.1.p
			trigger = {
				is_materialist = yes
			}
		}
		name = {
			text = action.1.av
			trigger = {
				is_spiritualist = yes
			}
		}
		name = {
			text = action.1.aag
			trigger = {
				has_origin = origin_lost_colony
				event_target:contact_empire = {
					has_country_flag = special_intro_for@root
					has_country_flag = lost_colony_parent_of@root
				}
			}
		}
		name = {
			text = action.1.hm
			trigger = {
				has_authority = auth_hive_mind
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
			}
		}
		name = {
			text = action.1.me
			trigger = {
				has_authority = auth_machine_intelligence
				NOT = { has_valid_civic = civic_machine_terminator }
			}
		}
		name = {
			text = action.1.mtm
			trigger = {
				has_valid_civic = civic_machine_terminator
				event_target:contact_empire = { has_authority = auth_machine_intelligence }
			}
		}
		name = {
			text = action.1.o
			trigger = {
				is_spiritualist = yes
				event_target:contact_empire = { NOT = { has_authority = auth_machine_intelligence } }
			}
		}
		name = {
			text = action.1.as
			trigger = {
				is_pacifist = yes
			}
		}
		name = {
			text = action.1.af
			trigger = {
				is_xenophobe = yes
			}
		}

		icon = {
			icon = GFX_option_icon_friendly
			text = seek_friends_tt
		}

		allow = {
			custom_tooltip_fail = {
				text = friendship_already_precluded
				event_target:contact_empire = {
					NOR = {
						has_opinion_modifier = {
							who = root
							modifier = opinion_caught_hacking
						}
						has_opinion_modifier = {
							who = root
							modifier = opinion_hostile_first_contact
						}
						has_opinion_modifier = {
							who = root
							modifier = opinion_hostile_first_contact_vivisection
						}
						has_opinion_modifier = {
							who = root
							modifier = opinion_hostile_first_contact_hungry
						}
					}
				}
			}
		}

		if = {
			limit = {
				OR = {
					NOT = { is_country_type = default }
					event_target:contact_empire = { is_country_type = fallen_empire }
				}
			}
			custom_tooltip = action.1.fe_option
		}
		else = {
			custom_tooltip = seek_friends_tt

			event_target:contact_empire = {
				add_opinion_modifier = {
					who = root
					modifier = opinion_friendly_first_comms_greeting
				}
			}
		}

		trigger = {
			OR = {
				is_homicidal = no
				AND = {
					has_valid_civic = civic_machine_terminator
					event_target:contact_empire = { has_authority = auth_machine_intelligence }
				}
			}
			NOT = { has_valid_civic = civic_inwards_perfection }
			NAND = {
				has_ethic = ethic_fanatic_spiritualist
				event_target:contact_empire = { has_authority = auth_machine_intelligence }
			}
			OR = {
				NOT = { has_ethic = ethic_fanatic_xenophobe }
				event_target:contact_empire = { is_same_species = root }
			}
		}

		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				is_xenophile = yes
			}
			modifier = {
				factor = 0.5
				OR = {
					is_xenophobe = yes
					is_gestalt = yes
				}
			}
			modifier = {
				factor = 4 #actually *2 as it is multiplied by *0.5 in the above modifier
				OR = {
					AND = {
						is_machine_empire = yes
						event_target:contact_empire = { is_machine_empire = yes }
					}
					AND = {
						is_hive_empire = yes
						event_target:contact_empire = { is_hive_empire = yes }
					}
				}
			}
			modifier = {
				factor = 0.1
				first_contact_custom_greeting = yes #basically, various hostility
			}
		}
	}
	option = { #hostile - isolationist
		name = {
			text = action.1.ac
			trigger = {
				is_xenophobe = yes
			}
		}
		name = {
			text = action.1.aab
			trigger = {
				OR = {
					is_xenophobe = yes
					is_materialist = yes
				}
				NOT = { is_same_species = event_target:contact_empire }
			}
		}
		name = {
			text = action.1.ad
			trigger = {
				is_authoritarian = yes
			}
		}
		name = {
			text = action.1.d
			trigger = {
				NOT = { is_same_species = event_target:contact_empire }
				is_xenophobe = yes
			}
		}
		name = {
			text = action.1.i
			trigger = {
				is_egalitarian = yes
			}
		}
		name = {
			text = action.1.m
			trigger = {
				is_pacifist = yes
			}
		}
		name = {
			text = action.1.r
			trigger = {
				is_spiritualist = yes
				event_target:contact_empire = { has_authority = auth_machine_intelligence }
			}
		}
		name = {
			text = action.1.aa
			trigger = {
				is_materialist = yes
			}
		}
		name = {
			text = action.1.ao
			trigger = {
				is_militarist = yes
			}
		}
		name = {
			text = action.1.aaa
			trigger = {
				is_authoritarian = yes
			}
		}
		name = {
			text = action.1.aae
			trigger = {
				is_authoritarian = yes
			}
		}
		name = {
			text = action.1.t1
			trigger = {
				is_xenophile = yes
			}
		}
		name = {
			text = action.1.t2
			trigger = {
				is_spiritualist = yes
			}
		}
		name = {
			text = action.1.t3
			trigger = {
				is_hive_empire = yes
			}
		}
		name = {
			text = action.1.t4
			trigger = {
				is_machine_empire = yes
				NOR = {
					has_valid_civic = civic_machine_assimilator
					has_valid_civic = civic_machine_terminator
				}
			}
		}
		name = {
			text = action.1.t5
			trigger = {
				has_valid_civic = civic_machine_assimilator
			}
		}
		name = {
			text = action.1.t6
			trigger = {
				has_valid_civic = civic_machine_terminator
			}
		}

		icon = {
			icon = GFX_option_icon_isolationist
			text = seek_isolation_tt_short
		}

		if = {
			limit = {
				OR = {
					NOT = { is_country_type = default }
					event_target:contact_empire = { NOT = { is_country_type = default } }
				}
			}
			custom_tooltip = action.1.fe_option
		}
		else = {
			custom_tooltip = seek_isolation_tt

			hidden_effect = {
				event_target:contact_empire = {
					random_spynetwork = {
						limit = { target = { is_same_value = root } }
						add_modifier = {
							modifier = first_comms_defensive
							years = 15
						}
					}
				}
			}
		}

		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				is_xenophobe = yes
				is_militarist = no
			}
			modifier = {
				factor = 2
				has_valid_civic = civic_inwards_perfection
			}
		}
	}
	option = { #hostile - expansionist
		name = {
			text = action.1.ae
			trigger = {
				OR = {
					is_xenophobe = yes
					is_militarist = yes
				}
			}
		}
		name = {
			text = action.1.ds
			trigger = {
				has_valid_civic = civic_hive_devouring_swarm
			}
		}
		name = {
			text = action.1.mt
			trigger = {
				is_machine_empire = yes
			}
		}
		name = {
			text = action.1.aac
			trigger = {
				is_militarist = yes
				OR = {
					is_spiritualist = yes
					is_authoritarian = yes
				}
			}
		}
		name = {
			text = action.1.aad
			trigger = {
				is_spiritualist = yes
				NOT = { is_same_species = event_target:contact_empire }
			}
		}
		name = {
			text = action.1.b
			trigger = {
				NOT = { is_same_species = event_target:contact_empire }
				is_xenophobe = yes
			}
		}
		name = {
			text = action.1.s
			trigger = {
				is_spiritualist = yes
				event_target:contact_empire = { has_authority = auth_machine_intelligence }
			}
		}
		name = {
			text = action.1.ab
			trigger = {
				is_spiritualist = yes
				NOT = { is_same_species = event_target:contact_empire }
			}
		}
		name = {
			text = action.1.an
			trigger = {
				is_militarist = yes
			}
		}
		name = {
			text = action.1.at
			trigger = {
				is_militarist = yes
			}
		}
		name = {
			text = action.1.au
			trigger = {
				is_spiritualist = yes
				is_militarist = yes
			}
		}
		name = {
			text = action.1.k
			trigger = {
				OR = {
					is_militarist = yes
					is_authoritarian = yes
				}
			}
		}
		name = {
			text = action.1.ax
			trigger = {
				OR = {
					is_materialist = yes
					is_egalitarian = yes
					is_pacifist = yes
				}
			}
		}
		name = {
			text = action.1.u1
			trigger = {
				is_xenophile = yes
			}
		}
		name = {
			text = action.1.u2
			trigger = {
				is_authoritarian = yes
			}
		}
		name = {
			text = action.1.u3
			trigger = {
				is_gestalt = yes
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
			}
		}

		icon = {
			icon = GFX_option_icon_hostile
			text = seek_enemies_tt_short
		}

		if = {
			limit = {
				OR = {
					NOT = { is_country_type = default }
					event_target:contact_empire = { NOT = { is_country_type = default } }
				}
			}
			custom_tooltip = action.1.fe_option
		}
		else = {
			custom_tooltip = seek_enemies_tt

			event_target:contact_empire = {
				add_opinion_modifier = {
					who = root
					modifier = opinion_hostile_first_comms_greeting
				}
			}
			hidden_effect = {
				random_spynetwork = {
					limit = {
						owner = { is_same_value = root }
						target = { is_same_value = event_target:contact_empire }
					}
					add_modifier = {
						modifier = first_comms_hostility_preparations
						years = 15
					}
				}
			}
		}

		trigger = {
			NOR = {
				has_ethic = ethic_fanatic_pacifist
				has_valid_civic = civic_inwards_perfection
			}
		}

		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				is_homicidal = yes
			}
			modifier = {
				factor = 2
				is_militarist = yes
			}
			modifier = {
				factor = 0.5
				is_pacifist = yes
			}
			modifier = {
				factor = 2
				first_contact_custom_greeting = yes #basically, various hostility
			}
			modifier = {
				factor = 0.1
				is_in_federation_with = event_target:contact_empire #just in case
			}
		}
	}

	after = {
		if = {
			limit = {
				NOT = {
					event_target:contact_empire = { has_relation_flag = { flag = no_coms who = root } }
				}
			}
			hidden_effect = {
				country_event = { id = progress.4 }
				country_event = { id = progress.5 }
				country_event = { id = progress.6 }
				#country_event = { id = story.7 days = 30 } REMOVED DUE TO ON_ACTIONS ALSO TRIGGERING THIS, CAUSING SCOPING ISSUES
				if = {
					limit = {
						event_target:contact_empire = {
							OR = {
								is_country_type = fallen_empire
								is_country_type = awakened_fallen_empire
							}
						}
					}
					set_country_flag = Story7
					set_country_flag = has_encountered_other_empire
					if = {
						limit = { NOT = { has_country_flag = StoryFirst } }
						set_country_flag = StoryFirst
					}
				}
			}
		}
	}
}

# Primitive Medieval Civilization Encountered
country_event = {
	id = action.5
	title = "action.5.name"
	picture = GFX_evt_medieval_alien_civilization
	location = FROMFROM
	show_sound = event_primitive_civilization

	desc = { # Stone Age
		text = action.5.desc_00
		trigger = { event_target:primitive_civ = { has_country_flag = stone_age } }
	}
	desc = { # Bronze Age
		text = action.5.desc_01
		trigger = { event_target:primitive_civ = { has_country_flag = bronze_age } }
	}
	desc = { # Iron Age
		text = action.5.desc_02
		trigger = { event_target:primitive_civ = { has_country_flag = iron_age } }
	}
	desc = { # Late Medieval Age
		text = action.5.desc_03
		trigger = { event_target:primitive_civ = { has_country_flag = late_medieval_age } }
	}
	desc = { # Renaissance
		text = action.5.desc_04
		trigger = { event_target:primitive_civ = { has_country_flag = renaissance_age } }
	}
	desc = { # Steam Age
		text = action.5.desc_05
		trigger = { event_target:primitive_civ = { has_country_flag = steam_age } }
	}

	is_triggered_only = yes

	trigger = {
		is_ai = no
		event_target:primitive_civ = {
			NOT = { has_country_flag = humans_late_medieval_age }
			NOT = { has_country_flag = benefactor_empire }
			OR = {
				has_country_flag = stone_age
				has_country_flag = bronze_age
				has_country_flag = iron_age
				has_country_flag = late_medieval_age
				has_country_flag = renaissance_age
				has_country_flag = steam_age
			}
		}
	}

	option = {
		name = INTERESTING
		hidden_effect = { country_event = { id = story.6 days = 30 } }
	}
}

# Primitive Industrial Civilization Encountered
country_event = {
	id = action.6
	title = "action.5.name"
	picture = GFX_evt_metropolis
	location = FROMFROM
	show_sound = event_scanner

	desc = { # Industrial Age
		text = action.6.desc_01
		trigger = { event_target:primitive_civ = { has_country_flag = industrial_age } }
	}
	desc = { # Machine Age
		text = action.6.desc_02
		trigger = { event_target:primitive_civ = { has_country_flag = machine_age } }
	}
	desc = { # Atomic Age
		text = action.6.desc_03
		trigger = { event_target:primitive_civ = { has_country_flag = atomic_age } }
	}
	desc = { # Early Space Age
		text = action.6.desc_04
		trigger = { event_target:primitive_civ = { has_country_flag = early_space_age } }
	}

	is_triggered_only = yes

	trigger = {
		is_ai = no
		event_target:primitive_civ = {
			NOR = {
				has_country_flag = humans_machine_age
				has_country_flag = humans_early_space_age
				has_country_flag = benefactor_empire
			}
			OR = {
				has_country_flag = industrial_age
				has_country_flag = machine_age
				has_country_flag = atomic_age
				has_country_flag = early_space_age
			}
		}
	}

	option = {
		name = INTERESTING
		hidden_effect = { country_event = { id = story.6 days = 30 } }
	}
}

# Add a opinion modifier if we are hostile when communications are established
country_event = {
	id = action.7
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_country_type = default
		is_hostile = from
	}

	immediate = {
		if = {
			limit = {
				num_killed_ships = {
					target = from
					value < 10
				}
				num_taken_planets = {
					target = from
					value = 0
				}
			}
			add_opinion_modifier = {
				modifier = opinion_first_contact_hostility
				who = from
			}
		}
		if = {
			limit = {
				OR = {
					num_killed_ships = {
						target = from
						value > 9
					}
					num_taken_planets = {
						target = from
						value > 0
					}
				}
			}
			add_opinion_modifier = {
				modifier = opinion_first_contact_war
				who = from
			}
			set_country_flag = shoot_to_kill_achievement
		}
	}
}

# Conquest
country_event = {
	id = action.8
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_country_type = default
		FROM = { is_country_type = default }
		NOT = { has_communications = from }
		is_hostile = from
	}

	immediate = {
		establish_communications = from
		fromfrom = {
			conquer = root
			set_controller = root
		}
	}
}

# Communication Established
country_event = {
	id = action.11
	title = "action.11.name"
	desc = {
		text = "action.11.desc"
		trigger = {
			NOT = { fromfrom = { has_relation_flag = { who = root flag = AbandonedRefugees } } }
		}
	}
	desc = {
		text = action.11.abandoned.desc
		trigger = {
			fromfrom = { has_relation_flag = { who = root flag = AbandonedRefugees } }
		}
	}
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = day_0
		}
		fromfrom = {
			NOT = {
				has_country_flag = day_0
			}
			OR = {
				is_country_type = default
				is_country_type = enclave
			}
		}
		NOT = { has_country_flag = first_contact_completed@fromfrom }
	}

	immediate = {
		fromfrom = {
			country_event = { id = action.13 }
			save_event_target_as = contact_empire
		}
		country_event = { id = distar.238 days = 1 }
	}

	after = {
		hidden_effect = {
			if = {
				limit = {
					fromfrom = {
						is_country_type = enclave
					}
				}
				fromfrom = {
					switch = {
						trigger = has_country_flag
						trader_enclave_country = { country_event = { id = leviathans.101 } }
						artist_enclave_country = { country_event = { id = leviathans.301 } }
						curator_enclave_country = { country_event = { id = leviathans.501 } }
						default = { log_error = "Unexpected enclave type or missing script flag" }
					}
				}
			}
		}
	}

	option = {
		trigger = {
			fromfrom = { NOT = { has_relation_flag = { who = root flag = AbandonedRefugees } } }
		}
		name = "action.11.a"
		if = {
			limit = {
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
			}
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencecontactxenophile
				min = @tier2influencecontactmin
				max = @tier2influencecontactmax
			}
		}
		else = {
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencecontact
				min = @tier2influencecontactmin
				max = @tier2influencecontactmax
			}
		}
		hidden_effect = {
			country_event = { id = action.1 }
			#from = { country_event = { id = action.100 } }
		}
	}
	option = {
		trigger = {
			fromfrom = { has_relation_flag = { who = root flag = AbandonedRefugees } }
			NOR = {
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
			}
		}
		name = WORRYING
		if = {
			limit = {
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
			}
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencecontactxenophile
				min = @tier2influencecontactmin
				max = @tier2influencecontactmax
			}
		}
		else = {
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencecontact
				min = @tier2influencecontactmin
				max = @tier2influencecontactmax
			}
		}
		hidden_effect = {
			country_event = { id = action.1 }
			#from = { country_event = { id = action.100 } }
		}
	}
	option = {
		trigger = {
			fromfrom = { has_relation_flag = { who = root flag = AbandonedRefugees } }
			OR = {
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
			}
		}
		name = OK
		if = {
			limit = {
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
			}
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencecontactxenophile
				min = @tier2influencecontactmin
				max = @tier2influencecontactmax
			}
		}
		else = {
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencecontact
				min = @tier2influencecontactmin
				max = @tier2influencecontactmax
			}
		}
		hidden_effect = {
			country_event = { id = action.1 }
			#from = { country_event = { id = action.100 } }
		}
	}
}

# Primitive planet surveyed
ship_event = {
	id = action.12
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		FROM = {
			AND = {
				has_owner = yes
				owner = { is_country_type = primitive }
			}
		}
	}

	immediate = {
		owner = {
			save_event_target_as = ship_owner
			if = {
				limit = {
					NOT = { has_country_flag = encountered_first_primitive }
				}
				set_country_flag = encountered_first_primitive
			}
		}
		FROM = {
			if = {
				limit = {
					exists = owner
				}
				owner = {
					establish_contact = { who = event_target:ship_owner }
					establish_communications = event_target:ship_owner
					save_event_target_as = primitive_civ
				}
				save_event_target_as = primitive_planet
			}
		}
		if = {
			limit = {
				exists = event_target:primitive_civ
				event_target:primitive_civ = {
					NOT = { has_country_flag = humans_late_medieval_age }
					NOT = { has_country_flag = benefactor_empire }
					OR = {
						has_country_flag = stone_age
						has_country_flag = bronze_age
						has_country_flag = iron_age
						has_country_flag = late_medieval_age
						has_country_flag = renaissance_age
						has_country_flag = steam_age
					}
				}
			}
			owner = { country_event = { id = action.5 } }
			break = yes
		}
		if = {
			limit = {
				exists = event_target:primitive_civ
				event_target:primitive_civ = {
					NOR = {
						has_country_flag = humans_machine_age
						has_country_flag = humans_early_space_age
						has_country_flag = benefactor_empire
					}
					OR = {
						has_country_flag = industrial_age
						has_country_flag = machine_age
						has_country_flag = atomic_age
						has_country_flag = early_space_age
					}
				}
			}
			owner = { country_event = { id = action.6 } }
			break = yes
		}
		if = {
			limit = {
				exists = event_target:primitive_civ
				event_target:primitive_civ = { has_country_flag = humans_late_medieval_age }
			}
			owner = { country_event = { id = galactic_features.101 } }
			break = yes
		}
		if = {
			limit = {
				exists = event_target:primitive_civ
				event_target:primitive_civ = { has_country_flag = humans_machine_age }
			}
			owner = { country_event = { id = galactic_features.102 } }
			break = yes
		}
		if = {
			limit = {
				exists = event_target:primitive_civ
				event_target:primitive_civ = { has_country_flag = humans_early_space_age }
			}
			owner = { country_event = { id = galactic_features.103 } }
			break = yes
		}
		if = {
			limit = {
				exists = event_target:primitive_civ
				event_target:primitive_civ = { has_country_flag = benefactor_empire }
			}
			owner = { country_event = { id = origin.1355 } }
			break = yes
		}
	}
}

# Aliens Establish Communications
country_event = {
	id = action.13
	title = "action.13.name"
	desc = {
		text = "action.13.desc"
		trigger = {
			from = {
				NOT = { has_relation_flag = { who = root flag = AbandonedRefugees } }
			}
		}
	}
	desc = {
		text = "action.13.abandoned.desc"
		trigger = {
			from = { has_relation_flag = { who = root flag = AbandonedRefugees } }
		}
	}
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = day_0
		}
		from = {
			NOT = {
				has_country_flag = day_0
			}
			OR = {
				is_country_type = default
				is_country_type = enclave
			}
		}
	}

	immediate = {
		from = {
			save_event_target_as = contact_empire
		}
		country_event = { id = distar.239 days = 1 }
	}

	option = {
		trigger = {
			from = { NOT = { has_relation_flag = { who = root flag = AbandonedRefugees } } }
		}
		name = "action.13.a"
		hidden_effect = {
			country_event = { id = action.100 }
		}
	}
	option = {
		trigger = {
			from = { has_relation_flag = { who = root flag = AbandonedRefugees } }
		}
		name = WORRYING
		hidden_effect = {
			country_event = { id = action.100 }
		}
	}
	option = {
		trigger = {
			from = { has_relation_flag = { who = root flag = AbandonedRefugees } }
			OR = {
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
			}
		}
		name = "action.13.c"
		hidden_effect = {
			country_event = { id = action.100 }
		}
	}
}

# Primitive Civilization Conquered - HIDDEN
country_event = {
	id = action.14
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		FROM = { is_country_type = primitive }
		is_country_type = default
	}

	immediate = {
		if = {
				limit = {
					is_regular_empire = yes
				}
			FROMFROM = {
				add_modifier = {
					modifier = planet_culture_shock
					years = 10
				}
				set_owner = ROOT
			}
		}
		else = {
			FROMFROM = {
				set_owner = ROOT
			}
		}

		every_country = {
			limit = {
				has_communications = root
				is_country_type = default
				NOT = { is_same_value = root }
			}
			add_opinion_modifier = {
				who = root
				modifier = opinion_primitive_violation
			}
		}

		if = {
			limit = {
				is_ai = no
			}
			fromfrom = {
				save_event_target_as = conquered_primitive_country
			}
			from = {
				owner_species = {
					save_event_target_as = conquered_primitive_species
				}
			}
			country_event = { id = action.140 }
		}

		reset_years_of_peace = yes
	}
}

# Primitive Civilization Conquered - Player info
country_event = {
	id = action.140
	title = action.14.name
	desc = { #Non-Purge Policy Regular Empires
		text = action.14.desc
		trigger = {
			NOR = {
				has_ethic = ethic_gestalt_consciousness
				event_target:conquered_primitive_species = {
					has_citizenship_type = { country = root type = citizenship_purge }
				}
			}
		}
	}
	desc = { #Purge Policy Regular Empires
		text = action.14.desc.purge
		trigger = {
			NOT = { has_ethic = ethic_gestalt_consciousness }
			event_target:conquered_primitive_species = {
				has_citizenship_type = { country = root type = citizenship_purge }
			}
		}
	}
	desc = { #Servitors
		text = action.14.desc.serv
		trigger = {
			has_civic = civic_machine_servitor
		}
	}
	desc = { #Assimilators
		text = action.14.desc.assim
		trigger = {
			has_civic = civic_machine_assimilator
		}
	}
	desc = { #Exterminators
		text = action.14.desc.term
		trigger = {
			has_civic = civic_machine_terminator
		}
	}
	desc = { #Purge Policy MIs
		text = action.14.desc.mach.purge
		trigger = {
			has_authority = auth_machine_intelligence
			event_target:conquered_primitive_species = {
				has_citizenship_type = { country = root type = citizenship_purge }
			}
			NOR = {
				has_civic = civic_machine_servitor
				has_civic = civic_machine_assimilator
				has_civic = civic_machine_terminator
			}
		}
	}
	desc = { #Enslave Policy MIs
		text = action.14.desc.mach.slave
		trigger = {
			has_authority = auth_machine_intelligence
			event_target:conquered_primitive_species = {
				has_citizenship_type = { country = root type = citizenship_slavery }
			}
			NOR = {
				has_civic = civic_machine_servitor
				has_civic = civic_machine_assimilator
				has_civic = civic_machine_terminator
			}
		}
	}
	desc = { #Purge Policy Hiveminds
		text = action.14.desc.hive.purge
		trigger = {
			has_authority = auth_hive_mind
			event_target:conquered_primitive_species = {
				has_citizenship_type = { country = root type = citizenship_purge }
			}
		}
	}
	desc = { #Enslave Policy Hiveminds
		text = action.14.desc.hive.slave
		trigger = {
			has_authority = auth_hive_mind
			event_target:conquered_primitive_species = {
				has_citizenship_type = { country = root type = citizenship_slavery }
			}
		}
	}

	picture = GFX_evt_ground_combat
	show_sound = event_alien_signal
	location = event_target:conquered_primitive_country

	is_triggered_only = yes

	immediate = {
		event_target:conquered_primitive_country = {
			if = {
				limit = { is_planet_class = pc_ringworld_habitable }
				add_district = district_rw_city
				break = yes
			}
			if = {
				limit = { num_pops <= 5 }
				add_district = district_city
				add_district = district_farming
				break = yes
			}
			if = {
				limit = {
					num_pops >= 5
					num_pops <= 10
				}
				add_district = district_city
				add_district = district_farming
				break = yes
			}
			if = {
				limit = {
					num_pops >= 10
					num_pops <= 15
				}
				add_district = district_city
				add_district = district_city
				add_district = district_farming
				add_district = district_mining
				break = yes
			}
			if = {
				limit = {
					num_pops >= 15
					num_pops <= 20
				}
				add_district = district_city
				add_district = district_city
				add_district = district_farming
				add_district = district_farming
				add_district = district_mining
				add_district = district_mining
				break = yes
			}
			if = {
				limit = {
					num_pops >= 20
					num_pops <= 25
				}
				add_district = district_city
				add_district = district_city
				add_district = district_city
				add_district = district_farming
				add_district = district_farming
				add_district = district_mining
				add_district = district_mining
				break = yes
			}
			if = {
				limit = {
					num_pops >= 25
					num_pops <= 30
				}
				add_district = district_city
				add_district = district_city
				add_district = district_city
				add_district = district_city
				add_district = district_farming
				add_district = district_farming
				add_district = district_mining
				add_district = district_mining
				add_district = district_generator
				break = yes
			}
			if = {
				limit = {
					num_pops >= 30
					num_pops <= 35
				}
				add_district = district_city
				add_district = district_city
				add_district = district_city
				add_district = district_city
				add_district = district_city
				add_district = district_farming
				add_district = district_farming
				add_district = district_mining
				add_district = district_mining
				add_district = district_generator
				break = yes
			}
		}
	}

	option = {
		name = action.14.a.phobe
		custom_tooltip = action.14.a.tooltip
		trigger = {
			OR = {
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
			}
		}
	}
	option = {
		name = action.14.a.military
		custom_tooltip = action.14.a.tooltip
		trigger = {
			OR = {
				has_ethic = ethic_fanatic_militarist
				has_ethic = ethic_militarist
			}
			NOR = {
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
			}
		}
	}
	option = {
		name = action.14.a.spirit
		custom_tooltip = action.14.a.tooltip
		trigger = {
			OR = {
				has_ethic = ethic_fanatic_spiritualist
				has_ethic = ethic_spiritualist
			}
			NOR = {
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_militarist
				has_ethic = ethic_militarist
			}
		}
	}
	option = {
		name = action.14.a.material
		custom_tooltip = action.14.a.tooltip
		trigger = {
			OR = {
				has_ethic = ethic_fanatic_materialist
				has_ethic = ethic_materialist
			}
			NOR = {
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_militarist
				has_ethic = ethic_militarist
			}
		}
	}
	option = {
		name = action.14.a
		custom_tooltip = action.14.a.tooltip
		trigger = {
			NOR = {
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_militarist
				has_ethic = ethic_militarist
				has_ethic = ethic_fanatic_spiritualist
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_materialist
				has_ethic = ethic_materialist
				has_authority = auth_machine_intelligence
				has_authority = auth_hive_mind
			}
		}
	}
	option = {
		name = action.14.a
		trigger = {
			has_authority = auth_hive_mind
		}
	}
	option = {
		name = action.14.a.serv
		trigger = {
			has_civic = civic_machine_servitor
		}
	}
	option = {
		name = action.14.a.assim
		trigger = {
			has_civic = civic_machine_assimilator
		}
	}
	option = {
		name = action.14.a.term
		trigger = {
			has_civic = civic_machine_terminator
		}
	}
	option = {
		name = action.14.a.mach
		trigger = {
			has_authority = auth_machine_intelligence
			NOR = {
				has_civic = civic_machine_servitor
				has_civic = civic_machine_assimilator
				has_civic = civic_machine_terminator
			}
		}
	}
}

# New Contact opinion modifier added
country_event = {
	id = action.19
	hide_window = yes

	is_triggered_only = yes

	trigger = { is_country_type = default }

	immediate = {
		if = {
			limit = {
				NOR = {
					exists = overlord
					AND = {
						exists = overlord
						overlord = {
							is_same_value = from
						}
					}
				}
			}
			add_opinion_modifier = {
				modifier = opinion_new_contact
				who = from
			}
			from = {
				add_opinion_modifier = {
					modifier = opinion_new_contact
					who = root
				}
			}
		}
	}
}

# Other Empires react to a Pop dying in a purge
planet_event = {
	id = action.21

	hide_window = yes

	is_triggered_only = yes

	trigger = {
		FROMFROM = {
			is_robot_pop = no
			is_sapient = yes
			NOT = { has_trait = "trait_hive_mind" }
			NAND = {
				has_citizenship_type = { country = from type = citizenship_purge }
				has_purge_type = { country = from type = purge_neutering }
			}
			NOT = { has_purge_type = { country = from type = purge_necrophage } }
		}
		is_controlled_by = FROM
	}

	immediate = {
		every_country = {
			limit = {
				has_communications = FROM
				NOR = {
					is_country = FROM
					is_same_species = FROMFROM
					has_ai_personality_behaviour = purger
				}
				OR = {
					is_country_type = default
					has_ai_personality = awakened_fallen_empire_xenophile
				}
				has_intel_level = {
					who = FROM
					category = economy
					level >= 1
				}
			}
			add_opinion_modifier = { who = FROM modifier = opinion_genocidal }
		}
		every_country = {
			limit = {
				has_communications = FROM
				NOT = { is_country = FROM }
				is_same_species = FROMFROM
				has_intel_level = {
					who = FROM
					category = economy
					level >= 1
				}
			}
			add_opinion_modifier = { who = FROM modifier = opinion_genocidal_our_species }
		}
	}
}

# Purging: Gain resources from forced labor etc
planet_event = {
	id = action.22
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		fromfrom = {
			OR = {
				has_purge_type = { country = from type = purge_labor_camps }
				has_purge_type = { country = from type = purge_matrix }
				has_purge_type = { country = from type = purge_processing }
			}
		}
		is_controlled_by = FROM
	}

	immediate = {
		# Values are monthly amount * 4
		if = {
			limit = {
				fromfrom = { has_purge_type = { country = from type = purge_labor_camps }  }
			}
			if = {
				limit = {
					fromfrom = {
						is_robotic_species = no
						is_lithoid = no
					}
				}
				from = {
					add_resource = {
						food = 24
					}
				}
			}
			else_if = {
				limit = {
					fromfrom = { is_lithoid = yes }
				}
				from = {
					add_resource = {
						minerals = 16
					}
				}
			}
			else_if = {
				limit = {
					fromfrom = { is_robotic_species = yes }
				}
				from = {
					add_resource = {
						alloys = 12
					}
				}
			}
		}
		else_if = {
			limit = {
				fromfrom = { has_purge_type = { country = from type = purge_matrix }  }
			}
			from = {
				add_resource = {
					energy = 24
				}
			}
		}
		else_if = {
			limit = {
				fromfrom = { has_purge_type = { country = from type = purge_processing }  }
			}
			from = {
				add_resource = {
					food = 12
					minerals = 12
				}
			}
		}
	}
}

# Sets <planet_class>_surveyed country flag
ship_event = {
	id = action.24
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				from = { is_planet_class = pc_desert }
				owner = { NOT = { has_country_flag = desert_surveyed } }
			}
			owner = { set_country_flag = desert_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_tropical }
				owner = { NOT = { has_country_flag = tropical_surveyed } }
			}
			owner = { set_country_flag = tropical_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_arid }
				owner = { NOT = { has_country_flag = arid_surveyed } }
			}
			owner = { set_country_flag = arid_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_continental }
				owner = { NOT = { has_country_flag = continental_surveyed } }
			}
			owner = { set_country_flag = continental_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_ocean }
				owner = { NOT = { has_country_flag = ocean_surveyed } }
			}
			owner = { set_country_flag = ocean_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_tundra }
				owner = { NOT = { has_country_flag = tundra_surveyed } }
			}
			owner = { set_country_flag = tundra_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_arctic }
				owner = { NOT = { has_country_flag = arctic_surveyed } }
			}
			owner = { set_country_flag = arctic_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_alpine }
				owner = { NOT = { has_country_flag = alpine_surveyed } }
			}
			owner = { set_country_flag = alpine_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_savannah }
				owner = { NOT = { has_country_flag = savannah_surveyed } }
			}
			owner = { set_country_flag = savannah_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_gas_giant }
				owner = { NOT = { has_country_flag = gas_giant_surveyed } }
			}
			owner = { set_country_flag = gas_giant_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_asteroid }
				owner = { NOT = { has_country_flag = asteroid_surveyed } }
			}
			owner = { set_country_flag = asteroid_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_molten }
				owner = { NOT = { has_country_flag = molten_surveyed } }
			}
			owner = { set_country_flag = molten_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_barren }
				owner = { NOT = { has_country_flag = barren_surveyed } }
			}
			owner = { set_country_flag = barren_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_barren_cold }
				owner = { NOT = { has_country_flag = barren_cold_surveyed } }
			}
			owner = { set_country_flag = barren_cold_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_nuked }
				owner = { NOT = { has_country_flag = nuked_surveyed } }
			}
			owner = { set_country_flag = nuked_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_toxic }
				owner = { NOT = { has_country_flag = toxic_surveyed } }
			}
			owner = { set_country_flag = toxic_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_frozen }
				owner = { NOT = { has_country_flag = frozen_surveyed } }
			}
			owner = { set_country_flag = frozen_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_shielded }
				owner = { NOT = { has_country_flag = shielded_surveyed } }
			}
			owner = { set_country_flag = shielded_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_ai }
				owner = { NOT = { has_country_flag = ai_surveyed } }
			}
			owner = { set_country_flag = ai_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_infested }
				owner = { NOT = { has_country_flag = infested_surveyed } }
			}
			owner = { set_country_flag = infested_surveyed }
		}
		if = {
			limit = {
				from = { is_planet_class = pc_gaia }
				owner = { NOT = { has_country_flag = gaia_surveyed } }
			}
			owner = { set_country_flag = gaia_surveyed }
		}
	}
}

# A rebel country has taken their initial planet, switch their country type.
country_event = {
	id = action.30
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_country_type = rebel
	}

	immediate = {
		set_country_type = default
		# rebels are already created with ethos, no need to add again.
		# But somehow some rebel remain ethos-less...
		if = {
			limit = {
				has_country_flag = slave_rebels
				num_ethics < 1
			}
			random_playable_country = {
				limit = {
					reverse_has_relation_flag = {
						flag = rebelling_slaves_former_owner
						who = root
					}
				}
				save_event_target_as = rsfo
			}
			random_list = {
				1 = { country_add_ethic = ethic_fanatic_materialist		modifier = { factor = 0 event_target:rsfo = { has_ethic = ethic_fanatic_materialist } } }
				1 = { country_add_ethic = ethic_fanatic_spiritualist	modifier = { factor = 0 event_target:rsfo = { has_ethic = ethic_fanatic_spiritualist } } }
				1 = { country_add_ethic = ethic_fanatic_militarist		modifier = { factor = 0 event_target:rsfo = { has_ethic = ethic_fanatic_militarist } } }
				1 = { country_add_ethic = ethic_fanatic_pacifist		modifier = { factor = 0 event_target:rsfo = { has_ethic = ethic_fanatic_pacifist } } }
				1 = { country_add_ethic = ethic_fanatic_xenophile		modifier = { factor = 0 event_target:rsfo = { has_ethic = ethic_fanatic_xenophile } } }
				1 = { country_add_ethic = ethic_fanatic_xenophobe		modifier = { factor = 0 event_target:rsfo = { has_ethic = ethic_fanatic_xenophobe } } }
				1 = { country_add_ethic = ethic_fanatic_egalitarian		modifier = { factor = 0 event_target:rsfo = { has_ethic = ethic_fanatic_egalitarian } } }
				1 = { country_add_ethic = ethic_fanatic_authoritarian	modifier = { factor = 0 event_target:rsfo = { has_ethic = ethic_fanatic_authoritarian } } }
			}
			random_list = {
				1 = { country_add_ethic = ethic_materialist modifier = { factor = 0
				OR = { has_ethic = ethic_fanatic_materialist has_ethic = ethic_fanatic_spiritualist event_target:rsfo = { has_ethic = ethic_fanatic_materialist } } } }

				1 = { country_add_ethic = ethic_spiritualist modifier = { factor = 0
				OR = { has_ethic = ethic_fanatic_spiritualist has_ethic = ethic_fanatic_materialist event_target:rsfo = { has_ethic = ethic_fanatic_spiritualist } } } }

				1 = { country_add_ethic = ethic_militarist modifier = { factor = 0
				OR = { has_ethic = ethic_fanatic_militarist has_ethic = ethic_fanatic_pacifist event_target:rsfo = { has_ethic = ethic_fanatic_militarist } } } }

				1 = { country_add_ethic = ethic_pacifist modifier = { factor = 0
				OR = { has_ethic = ethic_fanatic_pacifist has_ethic = ethic_fanatic_militarist event_target:rsfo = { has_ethic = ethic_fanatic_pacifist } } } }

				1 = { country_add_ethic = ethic_xenophile modifier = { factor = 0
				OR = { has_ethic = ethic_fanatic_xenophile has_ethic = ethic_fanatic_xenophobe event_target:rsfo = { has_ethic = ethic_fanatic_xenophile } } } }

				1 = { country_add_ethic = ethic_xenophobe modifier = { factor = 0
				OR = { has_ethic = ethic_fanatic_xenophobe has_ethic = ethic_fanatic_xenophile event_target:rsfo = { has_ethic = ethic_fanatic_xenophobe } } } }

				1 = { country_add_ethic = ethic_egalitarian modifier = { factor = 0
				OR = { has_ethic = ethic_fanatic_egalitarian has_ethic = ethic_fanatic_authoritarian event_target:rsfo = { has_ethic = ethic_fanatic_egalitarian } } } }

				1 = { country_add_ethic = ethic_authoritarian modifier = { factor = 0
				OR = { has_ethic = ethic_fanatic_authoritarian has_ethic = ethic_fanatic_egalitarian event_target:rsfo = { has_ethic = ethic_fanatic_authoritarian } } } }
			}
		}
		else_if = {
			limit = {
				has_country_flag = standard_unrest_rebels
				num_ethics < 1
			}
			random_list = {
				70 = { # fanatic and non-fanatic
					random_list = {
						1 = { country_add_ethic = ethic_fanatic_materialist }
						1 = { country_add_ethic = ethic_fanatic_spiritualist }
						1 = { country_add_ethic = ethic_fanatic_militarist }
						1 = { country_add_ethic = ethic_fanatic_pacifist }
						1 = { country_add_ethic = ethic_fanatic_xenophile }
						1 = { country_add_ethic = ethic_fanatic_xenophobe }
						1 = { country_add_ethic = ethic_fanatic_egalitarian }
						1 = { country_add_ethic = ethic_fanatic_authoritarian }
					}
					random_list = {
						1 = { country_add_ethic = ethic_materialist 	modifier = { factor = 0 OR = { has_ethic = ethic_fanatic_materialist   has_ethic = ethic_fanatic_spiritualist } } }
						1 = { country_add_ethic = ethic_spiritualist 	modifier = { factor = 0 OR = { has_ethic = ethic_fanatic_spiritualist  has_ethic = ethic_fanatic_materialist } } }
						1 = { country_add_ethic = ethic_militarist 		modifier = { factor = 0 OR = { has_ethic = ethic_fanatic_militarist    has_ethic = ethic_fanatic_pacifist } } }
						1 = { country_add_ethic = ethic_pacifist 		modifier = { factor = 0 OR = { has_ethic = ethic_fanatic_pacifist      has_ethic = ethic_fanatic_militarist } } }
						1 = { country_add_ethic = ethic_xenophile 		modifier = { factor = 0 OR = { has_ethic = ethic_fanatic_xenophile     has_ethic = ethic_fanatic_xenophobe } } }
						1 = { country_add_ethic = ethic_xenophobe 		modifier = { factor = 0 OR = { has_ethic = ethic_fanatic_xenophobe     has_ethic = ethic_fanatic_xenophile } } }
						1 = { country_add_ethic = ethic_egalitarian 	modifier = { factor = 0 OR = { has_ethic = ethic_fanatic_egalitarian   has_ethic = ethic_fanatic_authoritarian} } }
						1 = { country_add_ethic = ethic_authoritarian 	modifier = { factor = 0 OR = { has_ethic = ethic_fanatic_authoritarian has_ethic = ethic_fanatic_egalitarian} } }
					}
				}
				30 = { # only non-fanatic
					random_list = {
						1 = { country_add_ethic = ethic_materialist }
						1 = { country_add_ethic = ethic_spiritualist }
						1 = { country_add_ethic = ethic_militarist }
						1 = { country_add_ethic = ethic_pacifist }
						1 = { country_add_ethic = ethic_xenophile }
						1 = { country_add_ethic = ethic_xenophobe }
						1 = { country_add_ethic = ethic_egalitarian }
						1 = { country_add_ethic = ethic_authoritarian }
					}
					random_list = {
						1 = { country_add_ethic = ethic_materialist 	modifier = { factor = 0 OR = { has_ethic = ethic_materialist   has_ethic = ethic_spiritualist } } }
						1 = { country_add_ethic = ethic_spiritualist 	modifier = { factor = 0 OR = { has_ethic = ethic_spiritualist  has_ethic = ethic_materialist } } }
						1 = { country_add_ethic = ethic_militarist 		modifier = { factor = 0 OR = { has_ethic = ethic_militarist    has_ethic = ethic_pacifist } } }
						1 = { country_add_ethic = ethic_pacifist 		modifier = { factor = 0 OR = { has_ethic = ethic_pacifist      has_ethic = ethic_militarist } } }
						1 = { country_add_ethic = ethic_xenophile 		modifier = { factor = 0 OR = { has_ethic = ethic_xenophile     has_ethic = ethic_xenophobe } } }
						1 = { country_add_ethic = ethic_xenophobe 		modifier = { factor = 0 OR = { has_ethic = ethic_xenophobe     has_ethic = ethic_xenophile } } }
						1 = { country_add_ethic = ethic_egalitarian 	modifier = { factor = 0 OR = { has_ethic = ethic_egalitarian   has_ethic = ethic_authoritarian } } }
						1 = { country_add_ethic = ethic_authoritarian 	modifier = { factor = 0 OR = { has_ethic = ethic_authoritarian has_ethic = ethic_egalitarian } } }
					}
					random_list = {
						1 = { country_add_ethic = ethic_materialist 	modifier = { factor = 0 OR = { has_ethic = ethic_materialist   has_ethic = ethic_spiritualist } } }
						1 = { country_add_ethic = ethic_spiritualist 	modifier = { factor = 0 OR = { has_ethic = ethic_spiritualist  has_ethic = ethic_materialist } } }
						1 = { country_add_ethic = ethic_militarist 		modifier = { factor = 0 OR = { has_ethic = ethic_militarist    has_ethic = ethic_pacifist } } }
						1 = { country_add_ethic = ethic_pacifist 		modifier = { factor = 0 OR = { has_ethic = ethic_pacifist      has_ethic = ethic_militarist } } }
						1 = { country_add_ethic = ethic_xenophile 		modifier = { factor = 0 OR = { has_ethic = ethic_xenophile     has_ethic = ethic_xenophobe } } }
						1 = { country_add_ethic = ethic_xenophobe 		modifier = { factor = 0 OR = { has_ethic = ethic_xenophobe     has_ethic = ethic_xenophile } } }
						1 = { country_add_ethic = ethic_egalitarian 	modifier = { factor = 0 OR = { has_ethic = ethic_egalitarian   has_ethic = ethic_authoritarian } } }
						1 = { country_add_ethic = ethic_authoritarian 	modifier = { factor = 0 OR = { has_ethic = ethic_authoritarian has_ethic = ethic_egalitarian } } }
					}
				}
			}
		}
		from = {
			solar_system = {
				every_fleet_in_system = {
					limit = {
						is_ship_class = shipclass_military_station
						#owner = { is_same_empire = prevprevprev.owner }
					}
					set_owner = root
				}
				if = {
					limit = { exists = starbase }
					starbase = {
						set_owner = root
					}
				}
			}
		}
		add_resource = {
			minerals = 200 # Should be atleast the required amount for a spaceport
			alloys = 200 # Spaceports cost alloys, now.
			energy = 200
			influence = 250
		}
	}
}

# Encountered Fallen Empire, comms established
#country_event = {
#	id = action.31
#	hide_window = yes
#	is_triggered_only = yes
#
#	trigger = {
#		is_country_type = default
#		from = { is_country_type = fallen_empire }
#	}
#
#	immediate = {
#		establish_communications = from
#		from = { save_event_target_as = contact_empire }
#		country_event = { id = action.1 }
#	}
#}

# Won war
country_event = {
	id = action.32
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		set_country_flag = has_won_war
	}
}

# Observation Posts set to Passive study when policy is downgraded to Passive
country_event = {
	id = action.35
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		last_changed_policy = interference
		has_policy_flag = interference_passive
	}
	immediate = {
		every_owned_ship = {
			limit = {
				fleet = {
					is_ship_size = observation_station
				}
			}

			fleet = {
				if = {
					limit = {
						OR = {
							has_mission = covert_infiltration
							has_mission = specimen_collection
						}
					}
					set_mission = passive_observation
				}
			}
		}
	}
}

# Post owner switch for on_rebels_take_planet
country_event = {
	id = action.36
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		from = {
			every_owned_pop = {
				remove_modifier = "pop_recently_conquered"
			}
		}
	}
}

# Won War
country_event = {
	id = action.37
	title = action.37.name
	message_desc = action.37.message

	picture_event_data = {
		portrait = FROM
		planet_background = FROM
		graphical_culture = FROM
		city_level = FROM
		room = FROM.ruler
	}

	desc = {
		trigger = {
			hidden:from = {
				exists = event_target:ratling_country
				is_same_empire = event_target:ratling_country
			}
		}
		text = action.37.desc.ketlings
	}

	desc = {
		trigger = {
			hidden:from = {
				has_authority = auth_corporate
			}
		}
		text = action.37.desc.corporate
	}

	desc = {
		trigger = {
			hidden:from = {
				switch = {
					trigger = has_ai_personality
					honorbound_warriors = { text = action.37.desc.hw }
					ruthless_capitalists = { text = action.37.desc.rc }
					peaceful_traders = { text = action.37.desc.pt }
					hegemonic_imperialists = { text = action.37.desc.hi }
					federation_builders = { text = action.37.desc.fb }
					xenophobic_isolationists = { text = action.37.desc.xi }
					hive_mind = { text = action.37.desc.hm }
					migrating_flock = { text = action.37.desc.mf }
					evangelising_zealots = { text = action.37.desc.ez }
					fanatic_purifiers = { text = action.37.desc.fp }
					democratic_crusaders = { text = action.37.desc.dc }
					slaving_despots = { text = action.37.desc.sd }
					decadent_hierarchy = { text = action.37.desc.dh }
					erudite_explorers = { text = action.37.desc.ee }
					spiritual_seekers = { text = action.37.desc.ss }
					harmonious_hierarchy = { text = action.37.desc.hc }
					fallen_empire_spiritualist = { text = action.37.desc.hg }
					fallen_empire_materialist = { text = action.37.desc.kk }
					fallen_empire_xenophobe = { text = action.37.desc.mi }
					fallen_empire_xenophile = { text = action.37.desc.eo }
					fallen_empire_machine = { text = action.37.desc.fme }
					awakened_fallen_empire_machine = { text = action.37.desc.fme }
					berserk_fallen_empire_machine = { text = action.37.desc.bme }
					metalhead = { text = action.37.desc.mh }
					default = { text = action.37.desc.default }
				}
			}
		}
	}

	diplomatic = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no

		# These war goals have separate events
		fromfrom = {
			NOR = {
				using_war_goal = {
        	   	    type = wg_imperial_crusade
        	   	    owner = root
        	   	}
				using_war_goal = {
        	   	    type = wg_galactic_civil_war_loyalists
        	   	    owner = root
        	   	}
        	   	using_war_goal = {
        	   	    type = wg_galactic_civil_war_rebels
        	   	    owner = root
        	   	}
        	   	#using_war_goal = {
        	   	#    type = wg_seize_imperial_throne
        	   	#    owner = root
        	   	#}
        	   	using_war_goal = {
        	   	    type = wg_restore_the_community
        	   	    owner = root
        	   	}
			}
		}

		# If all of loser's systems are claimed, action.48 is fired instead
		AND = {
			fromfrom = {
				OR = {
					using_war_goal = {
           			    type = wg_conquest
           			    owner = root
           			}
           			using_war_goal = {
           			    type = wg_counterattack
           			    owner = root
           			}
           			using_war_goal = {
           			    type = wg_independence
           			    owner = root
           			}
           		}
			}
			OR = {
        	    AND = {
        	        fromfrom = {
        	            any_attacker = { is_same_value = root }
        	        }
        	        from = {
        	            any_owned_planet = {
							is_colony = yes
        	                NOT = {
        	                    fromfrom = {
        	                        any_attacker = { has_claim = prevprev.solar_system }
        	                    }
        	                }
        	            }
        	        }
        	    }
        	    AND = {
        	        fromfrom = {
        	            any_defender = { is_same_value = root }
        	        }
        	        from = {
        	            any_owned_planet = {
							is_colony = yes
        	                NOT = {
        	                    fromfrom = {
        	                        any_defender = { has_claim = prevprev.solar_system }
        	                    }
        	                }
        	            }
        	        }
        	    }
        	}
        }
	}

	option = {
		name = action.37.a
	}
}

# Lost War
country_event = {
	id = action.38
	title = action.38.name
	message_desc = action.38.message

	picture_event_data = {
		portrait = FROM
		planet_background = FROM
		graphical_culture = FROM
		city_level = FROM
		room = FROM.ruler
	}

	desc = {
		trigger = {
			hidden:from = {
				exists = event_target:ratling_country
				is_same_empire = event_target:ratling_country
			}
		}
		text = action.38.desc.ketlings
	}

	desc = {
		trigger = {
			hidden:from = {
				has_authority = auth_corporate
			}
		}
		text = action.38.desc.corporate
	}

	desc = {
		trigger = {
			hidden:from = {
				switch = {
					trigger = has_ai_personality
					honorbound_warriors = { text = action.38.desc.hw }
					ruthless_capitalists = { text = action.38.desc.rc }
					peaceful_traders = { text = action.38.desc.pt }
					hegemonic_imperialists = { text = action.38.desc.hi }
					federation_builders = { text = action.38.desc.fb }
					xenophobic_isolationists = { text = action.38.desc.xi }
					hive_mind = { text = action.38.desc.hm }
					migrating_flock = { text = action.38.desc.mf }
					evangelising_zealots = { text = action.38.desc.ez }
					fanatic_purifiers = { text = action.38.desc.fp }
					democratic_crusaders = { text = action.38.desc.dc }
					slaving_despots = { text = action.38.desc.sd }
					decadent_hierarchy = { text = action.38.desc.dh }
					erudite_explorers = { text = action.38.desc.ee }
					spiritual_seekers = { text = action.38.desc.ss }
					harmonious_hierarchy = { text = action.38.desc.hc }
					fallen_empire_spiritualist = { text = action.38.desc.hg }
					fallen_empire_materialist = { text = action.38.desc.kk }
					fallen_empire_xenophobe = { text = action.38.desc.mi }
					fallen_empire_xenophile = { text = action.38.desc.eo }
					fallen_empire_machine = { text = action.38.desc.fme }
					awakened_fallen_empire_spiritualist = { text = action.38.desc.hg }
					awakened_fallen_empire_materialist = { text = action.38.desc.kk }
					awakened_fallen_empire_xenophobe = { text = action.38.desc.mi }
					awakened_fallen_empire_xenophile = { text = action.38.desc.eo }
					fallen_empire_machine = { text = action.38.desc.fme }
					awakened_fallen_empire_machine = { text = action.38.desc.fme }
					berserk_fallen_empire_machine = { text = action.38.desc.bme }
					metalhead = { text = action.38.desc.mh }
					default = { text = action.38.desc.default }
				}
			}
		}
	}

	diplomatic = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no

		# These war goals have separate events
		fromfrom = {
			NOR = {
				using_war_goal = {
        	   	    type = wg_imperial_crusade
        	   	    owner = root.from
        	   	}
				using_war_goal = {
        	   	    type = wg_galactic_civil_war_loyalists
        	   	    owner = root.from
        	   	}
        	   	using_war_goal = {
        	   	    type = wg_galactic_civil_war_rebels
        	   	    owner = root.from
        	   	}
        	   	#using_war_goal = {
        	   	#    type = wg_seize_imperial_throne
        	   	#    owner = root.from
        	   	#}
        	   	using_war_goal = {
        	   	    type = wg_restore_the_community
        	   	    owner = root.from
        	   	}
        	}
		}
	}

	option = {
		name = action.38.a
	}
}

# White Peace
country_event = {
	id = action.39
	title = action.39.name
	message_desc = action.39.message

	picture_event_data = {
		portrait = FROM
		planet_background = FROM
		graphical_culture = FROM
		city_level = FROM
		room = FROM.ruler
	}

	desc = {
		trigger = {
			hidden:from = {
				exists = event_target:ratling_country
				is_same_empire = event_target:ratling_country
			}
		}
		text = action.39.desc.ketlings
	}

	desc = {
		trigger = {
			hidden:from = {
				switch = {
					trigger = has_ai_personality
					honorbound_warriors = { text = action.39.desc.hw }
					ruthless_capitalists = { text = action.39.desc.rc }
					peaceful_traders = { text = action.39.desc.pt }
					hegemonic_imperialists = { text = action.39.desc.hi }
					federation_builders = { text = action.39.desc.fb }
					xenophobic_isolationists = { text = action.39.desc.xi }
					hive_mind = { text = action.39.desc.hm }
					migrating_flock = { text = action.39.desc.mf }
					evangelising_zealots = { text = action.39.desc.ez }
					fanatic_purifiers = { text = action.39.desc.fp }
					democratic_crusaders = { text = action.39.desc.dc }
					slaving_despots = { text = action.39.desc.sd }
					decadent_hierarchy = { text = action.39.desc.dh }
					erudite_explorers = { text = action.39.desc.ee }
					spiritual_seekers = { text = action.39.desc.ss }
					harmonious_hierarchy = { text = action.39.desc.hc }
					fallen_empire_spiritualist = { text = action.39.desc.hg }
					fallen_empire_materialist = { text = action.39.desc.kk }
					fallen_empire_xenophobe = { text = action.39.desc.mi }
					fallen_empire_xenophile = { text = action.39.desc.eo }
					awakened_fallen_empire_spiritualist = { text = action.39.desc.hg }
					awakened_fallen_empire_materialist = { text = action.39.desc.kk }
					awakened_fallen_empire_xenophobe = { text = action.39.desc.mi }
					awakened_fallen_empire_xenophile = { text = action.39.desc.eo }
					fallen_empire_machine = { text = action.39.desc.fme }
					awakened_fallen_empire_machine = { text = action.39.desc.fme }
					berserk_fallen_empire_machine = { text = action.39.desc.bme }
					metalhead = { text = action.39.desc.mh }
					default = { text = action.39.desc.default }
				}
			}
		}
	}

	diplomatic = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
	}

	option = {
		name = action.39.a
	}
}

# Establish comms when entering Fallen Empire borders
fleet_event = {
	id = action.40
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		owner = { is_country_type = default }
		from = {
			OR = {
				AND = {
					exists = space_owner
					space_owner = {
						OR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
						NOT = { has_communications = root.owner }
					}
				}
				any_neighbor_system = {
					exists = space_owner
					space_owner = {
						OR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
						NOT = { has_communications = root.owner }
					}
				}
			}
		}
	}

	immediate = {
		from = {
			if = {
				limit = {
					exists = space_owner
					space_owner = {
						OR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
						NOT = { has_communications = root.owner }
					}
				}
				space_owner = {
					save_event_target_as = contact_empire
				}
			}
			else = {
				random_neighbor_system = {
					limit = {
						exists = space_owner
						space_owner = {
							OR = {
								is_country_type = fallen_empire
								is_country_type = awakened_fallen_empire
							}
							NOT = { has_communications = root.owner }
						}
					}
					space_owner = {
						save_event_target_as = contact_empire
					}
				}
			}
		}
		owner = {
			establish_communications_no_message = event_target:contact_empire
			country_event = { id = action.1 }
		}
	}
}

# War is starting, notify people why their ships have gone MIA or why their wormhole stations got destroyed
country_event = {
	id = "action.41"
	title = "action.41.name"
	picture = "GFX_evt_federation_fleet"
	is_triggered_only = yes

	trigger = {
		from = {
			OR = {
				war_begun_num_fleets_gone_mia = {
					who = prev
					value > 0
				}
			}
		}
	}

	desc = {
		trigger = {
			text = "action.41.desc.a"
			text = "newline"
			hidden:from = {
				success_text = {
					text = "action.41.desc.b.1"
					war_begun_num_fleets_gone_mia = {
						who = prev
						value = 1
					}
				}
				success_text = {
					text = "action.41.desc.b"
					war_begun_num_fleets_gone_mia = {
						who = prev
						value > 1
					}
				}
			}
		}
	}

	option = {
		name = "OK"
	}
}


# Land appropriation
planet_event = {
	id = action.42
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		owner = {
			OR = {
				has_policy_flag = appropriation_allowed
				has_ethic = ethic_gestalt_consciousness
			}
		}
	}

	immediate = {
		random_list = {
			25 = {
				while = {
					count = 5
					if = {
						limit = {
							OR = {
								num_pops > 10
								AND = {
									num_pops > 3
									free_housing < 1
								}
							}
						}
						random_owned_pop = {
							limit = {
								is_sapient = yes
								has_citizenship_rights = no
								NOT = { has_citizenship_type = { type = citizenship_assimilation } }
							}
							pop_event = { id = refugees.4 }
							root = {
								change_variable = {
									which = land_appropriated
									value = 1
								}
							}
						}
					}
				}
			}
			25 = {
				while = {
					count = 4
					if = {
						limit = {
							OR = {
								num_pops > 10
								AND = {
									num_pops > 3
									free_housing < 1
								}
							}
						}
						random_owned_pop = {
							limit = {
								is_sapient = yes
								has_citizenship_rights = no
								NOT = { has_citizenship_type = { type = citizenship_assimilation } }
							}
							pop_event = { id = refugees.4 }
							root = {
								change_variable = {
									which = land_appropriated
									value = 1
								}
							}
						}
					}
				}
			}
			25 = {
				while = {
					count = 3
					if = {
						limit = {
							OR = {
								num_pops > 10
								AND = {
									num_pops > 3
									free_housing < 1
								}
							}
						}
						random_owned_pop = {
							limit = {
								is_sapient = yes
								has_citizenship_rights = no
								NOT = { has_citizenship_type = { type = citizenship_assimilation } }
							}
							pop_event = { id = refugees.4 }
							root = {
								change_variable = {
									which = land_appropriated
									value = 1
								}
							}
						}
					}
				}
			}
		}

		while = {
			limit = {
				check_variable = {
					which = land_appropriated
					value > 0
				}
			}

			change_variable = {
				which = land_appropriated
				value = -1
			}

			owner = {
				if = {
					limit = {
						any_owned_planet = {
							free_housing < 1
							any_owned_pop = {
								is_sapient = yes
								has_citizenship_rights = yes
								OR = {
									is_pop_category = worker
									is_pop_category = simple_drone
								}
							}
						}
					}

					random_owned_planet = {
						limit = {
							free_housing < 1
							any_owned_pop = {
								is_sapient = yes
								has_citizenship_rights = yes
								OR = {
									is_pop_category = worker
									is_pop_category = simple_drone
								}
							}
						}

						random_owned_pop = {
							limit = {
								is_sapient = yes
								has_citizenship_rights = yes
								OR = {
									is_pop_category = worker
									is_pop_category = simple_drone
								}
							}

							resettle_pop = {
								pop = this
								planet = root
							}
						}
					}
				}
				else_if = {
					limit = {
						any_owned_planet = {
							any_owned_pop = {
								is_sapient = yes
								has_citizenship_rights = yes
								OR = {
									is_pop_category = worker
									is_pop_category = simple_drone
								}
							}
						}
					}

					random_owned_planet = {
						limit = {
							any_owned_pop = {
								is_sapient = yes
								has_citizenship_rights = yes
								OR = {
									is_pop_category = worker
									is_pop_category = simple_drone
								}
							}
						}

						random_owned_pop = {
							limit = {
								is_sapient = yes
								has_citizenship_rights = yes
								OR = {
									is_pop_category = worker
									is_pop_category = simple_drone
								}
							}

							resettle_pop = {
								pop = this
								planet = root
							}
						}
					}
				}
			}
		}

		if = {
			limit = {
				owner = { NOT = { has_ethic = ethic_gestalt_consciousness } }
			}
			add_modifier = {
				modifier = "land_appropriation"
				years = 5
			}
		}
	}
}

# A war has ended, give war participants of opposite side forced open borders.
# Root = Winner Warleader
# From = Loser Warleader
# FromFrom = War
country_event = {
	id = action.44
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		fromfrom = {
			every_war_participant = {
				limit = {
					fromfrom = {
						is_war_participant = {
							who = prev
							side = Root
						}
					}
				}
				fromfrom = {
					every_war_participant = {
						limit = {
							fromfrom = {
								is_war_participant = {
									who = prev
									side = Root.from
								}
							}
						}
						set_closed_borders = {
							who = prevprev
							status = no
							forced = 5
						}
						if = {
							# Automatically close borders on truce end, if default policy is to close borders.
							limit = { has_policy_flag = border_policy_closed }
							country_event = {
								id = ariphaos_patch.44
								days = 3600
								scopes = {
									from = prevprev
								}
							}
						}
					}
				}
			}
		}
	}
}

# A white peace has been signed, give both sides forced open borders towards the opponents.
# Root = Recipient
# From = Actor
# FromFrom = Main Attacker
# FromFromFrom = Main Defender
# FromFromFromFrom = War
country_event = {
	id = action.45
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		# First Country
		country_event = {
			id = action.44
			scopes = {
				from = from
				fromfrom = fromfromfromfrom
			}
		}
		# Second Country
		from = {
			country_event = {
				id = action.44
				scopes = {
					from = root
					fromfrom = fromfromfromfrom
				}
			}
		}
	}
}

# Star Charts have been traded
planet_event = {
	id = action.46
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_owner = yes
		NOT = { exists = fromfrom }
		owner = {
			OR = {
				is_country_type = default
				is_country_type = fallen_empire
			}
		}
	}

	immediate = {
		if = {
			limit = {
				owner = {
					NOT = {
						has_established_contact = from
					}
				}
			}
			owner = {
				from = {
					establish_contact = { who = prev location = prevprev }
				}
			}
		}
	}
}

# Remove election-filler leaders when ruler is set
country_event = {
	id = action.47
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		every_owned_leader = {
			limit = {
				has_leader_flag = temp_election_leader
				NOT = {
					leader_class = ruler
				}
			}
			kill_leader = {
				show_notification = no
			}
		}
	}
}

# Country is destroyed after losing war
country_event = {
	id = action.48
	title = action.37.name
	message_desc = action.37.message

	picture_event_data = {
		portrait = FROM
		planet_background = FROM
		graphical_culture = FROM
		city_level = FROM
		room = FROM.ruler
	}

	desc = {
		trigger = {
			from = {
				has_generic_government = yes
				is_galactic_emperor = no
			}
		}
		text = action.48.desc.generic.1
		text = action.48.desc.generic.2
		text = action.48.desc.generic.3
	}
	desc = {
		trigger = {
			from = {
				has_spiritualist_government = yes
				is_galactic_emperor = no
			}
		}
		text = action.48.desc.spiritualist.1
		text = action.48.desc.spiritualist.2
		text = action.48.desc.spiritualist.3
	}
	desc = {
		trigger = {
			from = {
				has_militarist_government = yes
				is_galactic_emperor = no
			}
		}
		text = action.48.desc.militarist.1
		text = action.48.desc.militarist.2
		text = action.48.desc.militarist.3
	}
	desc = {
		trigger = {
			from = {
				has_pacifist_government = yes
				is_galactic_emperor = no
			}
		}
		text = action.48.desc.pacifist.1
		text = action.48.desc.pacifist.2
		text = action.48.desc.pacifist.3
	}
	desc = {
		trigger = {
			from = {
				has_materialist_government = yes
				is_galactic_emperor = no
			}
		}
		text = action.48.desc.materialist.1
		text = action.48.desc.materialist.2
		text = action.48.desc.materialist.3
	}
	desc = {
		trigger = {
			from = {
				is_megacorp = yes
				is_galactic_emperor = no
			}
		}
		text = action.48.desc.megacorp.1
		text = action.48.desc.megacorp.2
		text = action.48.desc.megacorp.3
	}
	desc = {
		trigger = {
			from = {
				is_hive_empire = yes
				is_galactic_emperor = no
			}
		}
		text = action.48.desc.hive.1
		text = action.48.desc.hive.2
		text = action.48.desc.hive.3
	}
	desc = {
		trigger = {
			from = {
				is_machine_empire = yes
				is_galactic_emperor = no
			}
		}
		text = action.48.desc.machine.1
		text = action.48.desc.machine.2
		text = action.48.desc.machine.3
	}
	desc = {
		trigger = {
			from = { has_ai_personality = fallen_empire_spiritualist }
		}
		text = action.48.desc.fe_spiritualist
	}
	desc = {
		trigger = {
			from = { has_ai_personality = fallen_empire_materialist }
		}
		text = action.48.desc.fe_materialist
	}
	desc = {
		trigger = {
			from = { has_ai_personality = fallen_empire_xenophobe }
		}
		text = action.48.desc.fe_xenophobe
	}
	desc = {
		trigger = {
			from = { has_ai_personality = fallen_empire_xenophile }
		}
		text = action.48.desc.fe_xenophile
	}
	desc = {
		trigger = {
			from = {
				OR = {
					has_ai_personality = fallen_empire_machine
					has_ai_personality = awakened_fallen_empire_machine
					has_ai_personality = berserk_fallen_empire_machine
				}
			}
		}
		text = action.37.desc.fme
	}
	desc = {
		trigger = {
			from = { is_galactic_emperor = yes }
		}
		text = action.48.desc.gal_emperor
	}
	desc = { # Fallback
		trigger = {
			from = {
				has_generic_government = no
				has_spiritualist_government = no
				has_militarist_government = no
				has_pacifist_government = no
				has_materialist_government = no
				is_megacorp = no
				is_hive_empire = no
				is_machine_empire = no
				is_galactic_emperor = no
				NOR = {
					has_ai_personality = fallen_empire_spiritualist
					has_ai_personality = fallen_empire_materialist
					has_ai_personality = fallen_empire_xenophobe
					has_ai_personality = fallen_empire_xenophile
					has_ai_personality = fallen_empire_machine
					has_ai_personality = awakened_fallen_empire_machine
					has_ai_personality = berserk_fallen_empire_machine
				}
			}
		}
		text = action.37.desc.default
	}

	diplomatic = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
		fromfrom = {
			OR = {
				using_war_goal = {
           		    type = wg_conquest
           		    owner = root
           		}
           		using_war_goal = {
           		    type = wg_counterattack
           		    owner = root
           		}
           		using_war_goal = {
           		    type = wg_independence
           		    owner = root
           		}
           	}
		}
		OR = {
            AND = {
                fromfrom = {
                    any_attacker = { is_same_value = root }
                }
                NOT = {
                    from = {
                        any_owned_planet = {
							is_colony = yes
                            NOT = {
                                fromfrom = {
                                    any_attacker = { has_claim = prevprev.solar_system }
                                }
                            }
                        }
                    }
                }
            }
            AND = {
                fromfrom = {
                    any_defender = { is_same_value = root }
                }
                NOT = {
                    from = {
                        any_owned_planet = {
							is_colony = yes
                            NOT = {
                                fromfrom = {
                                    any_defender = { has_claim = prevprev.solar_system }
                                }
                            }
                        }
                    }
                }
            }
        }
	}

	option = {
		name = action.48.a
		trigger = { has_generic_government = yes }
	}
	option = {
		name = action.48.b
		trigger = { has_spiritualist_government = yes }
	}
	option = {
		name = action.48.c
		trigger = { has_militarist_government = yes }
	}
	option = {
		name = action.48.d
		trigger = { has_pacifist_government = yes }
	}
	option = {
		name = action.48.e
		trigger = { has_materialist_government = yes }
	}
	option = {
		name = action.48.f
		trigger = { is_megacorp = yes }
	}
	option = {
		name = action.48.g
		trigger = { is_hive_empire = yes }
	}
	option = {
		name = action.48.h
		trigger = { is_machine_empire = yes }
	}
	option = { # Fallback
		name = action.48.i
		trigger = {
			has_generic_government = no
			has_spiritualist_government = no
			has_militarist_government = no
			has_pacifist_government = no
			has_materialist_government = no
			is_megacorp = no
			is_hive_empire = no
			is_machine_empire = no
		}
	}
}

# Outside Context
country_event = {
	id = action.51
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
		#fromfrom = {
		#	has_planet_flag = wwii
		#}
		from = {
			is_country_type = primitive
			has_country_flag = humans_machine_age
			has_country_flag = machine_age
		}
	}

	immediate = {
		set_country_flag = outsidecontext
	}
}

# If robots are unlocked, create built species
country_event = {
	id = action.56
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_built_species = no
		has_technology = tech_robotic_workers
	}

	immediate = {
		create_built_robot_species = yes
	}
}

# Country Destroyed Notification Gatekeeper
country_event = {
	id = action.61
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		every_subject = {
			set_subject_of = {
				who = none
			}
		}
		if = {
			limit = {
				any_war = {
					using_war_goal = {
						owner = root
						type = wg_leave_hegemony
					}
				}
			}
			random_country = {
				limit = {
					is_at_war_with = root
					any_war = {
						using_war_goal = {
							owner = root
							type = wg_leave_hegemony
						}
						is_war_participant = { who = prev side = defenders }
						is_war_participant = { who = root side = attackers }
					}
				}
				federation = {
					change_variable = {
						which = federation_secession_war
						value = -1
					}
				}
			}
		}
		if = {
			limit = {
				is_subject = no
				OR = {
					is_country_type = default
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
				NOT = { has_country_flag = silence_destroy_event }
			}
			if = {
				limit = { is_country_type = default }
				every_playable_country = {
					limit = {
						has_communications = root
						NOT = { is_same_value = root }
					}
					country_event = { id = action.62 }
				}
				random_playable_country = {
					observer_event = { id = observer.2 }
				}
			}
			else = {
				every_playable_country = {
					limit = {
						has_communications = root
						NOT = { is_same_value = root }
					}
					country_event = { id = action.63 }
				}
				random_playable_country = {
					observer_event = { id = observer.3 }
				}
			}
		}
	}
}

# Country Destroyed Notification (default countries)
country_event = {
	id = "action.62"
	title = "action.62.name"
	desc = "action.62.desc"
	show_sound = event_default
	picture = "GFX_evt_city_ruins"
	is_triggered_only = yes

	option = {
		name = OK
	}

	option = {
		name = "action.62.memorialist.a"
		exclusive_trigger = {
			OR = {
				has_valid_civic = civic_memorialist
				has_valid_civic = civic_hive_memorialist
				has_valid_civic = civic_machine_memorialist
			}
		}
	}
}

# Country Destroyed Notification (fallen/awakened empires)
country_event = {
	id = "action.63"
	title = "action.63.name"
	desc = "action.63.desc"
	show_sound = event_default
	picture = "GFX_evt_city_ruins"
	is_triggered_only = yes

	option = {
		name = OK
	}

	option = {
		name = "action.62.memorialist.a"
		exclusive_trigger = {
			OR = {
				has_valid_civic = civic_memorialist
				has_valid_civic = civic_hive_memorialist
				has_valid_civic = civic_machine_memorialist
			}
		}
	}
}

# Assimilate Pops on Yearly Pulse
event = {
	id = action.64
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_playable_country = {
			num_unique_species > 1
			any_owned_species = {
				has_citizenship_type = {
					type = citizenship_assimilation
					country = prev
				}
			}
		}
	}

	immediate = {
		log = "action.64"
		set_update_modifiers_batch = begin
        every_playable_country = {
            limit = {
                num_unique_species > 1
                any_owned_species = {
                    has_citizenship_type = {
						type = citizenship_assimilation
						country = prev
                    }
                }
            }
			log = "action.64.epc"

			if = { # ascended synths
				limit = {
					NOT = { has_country_flag = synthetic_empire }
				}
				every_owned_species = {
					limit = {
						has_citizenship_type = {
							type = citizenship_assimilation
							country = prev
						}
					}
					if = { # assimilator empire or cyborg empire
						limit = {
							prev = {
								OR = {
									has_country_flag = flesh_weakened
									AND = {
										has_authority = auth_machine_intelligence
										has_civic = civic_machine_assimilator
									}
								}
							}
						}
						if = {
							limit = { NOT = { has_trait = trait_cybernetic } }
							if = {
								limit = {
									has_trait = trait_hive_mind
									has_trait = trait_self_modified
								}
								modify_species = {
									species = this
									add_trait = trait_cybernetic
									add_traits_at_start_of_list = yes
									remove_trait = trait_hive_mind
									remove_trait = trait_self_modified
									change_scoped_species = no

									effect = {
										set_timed_species_flag = {
											flag = assimilation_species_of_species@prev
											days = 30
										}
										set_timed_species_flag = {
											flag = assimilation_species_of_empire@prevprev
											days = 30
										}
									}
								}
							}
							else_if = {
								limit = {
									has_trait = trait_hive_mind
								}
								modify_species = {
									species = this
									add_trait = trait_cybernetic
									add_traits_at_start_of_list = yes
									remove_trait = trait_hive_mind
									change_scoped_species = no

									effect = {
										set_timed_species_flag = {
											flag = assimilation_species_of_species@prev
											days = 30
										}
										set_timed_species_flag = {
											flag = assimilation_species_of_empire@prevprev
											days = 30
										}
									}
								}
							}
							else_if = {
								limit = {
									has_trait = trait_self_modified
								}
								modify_species = {
									species = this
									add_trait = trait_cybernetic
									add_traits_at_start_of_list = yes
									remove_trait = trait_self_modified
									change_scoped_species = no

									effect = {
										set_timed_species_flag = {
											flag = assimilation_species_of_species@prev
											days = 30
										}
										set_timed_species_flag = {
											flag = assimilation_species_of_empire@prevprev
											days = 30
										}
									}
								}
							}
							else = {
								modify_species = {
									species = this
									add_trait = trait_cybernetic
									add_traits_at_start_of_list = yes
									change_scoped_species = no

									effect = {
										set_timed_species_flag = {
											flag = assimilation_species_of_species@prev
											days = 30
										}
										set_timed_species_flag = {
											flag = assimilation_species_of_empire@prevprev
											days = 30
										}
									}
								}
							}
						}
					}
					else_if = { # hive mind
						limit = {
							prev = {
								has_authority = auth_hive_mind
								NOT = { has_civic = civic_hive_devouring_swarm }
							}
						}
						if = {
							limit = {
								has_trait = trait_self_modified
							}
							modify_species = {
								species = this
								add_trait = trait_hive_mind
								remove_trait = trait_self_modified
								change_scoped_species = no

								effect = {
									set_timed_species_flag = {
										flag = assimilation_species_of_species@prev
										days = 30
									}
									set_timed_species_flag = {
										flag = assimilation_species_of_empire@prevprev
										days = 30
									}
								}
							}
						}
						else = {
							modify_species = {
								species = this
								add_trait = trait_hive_mind
								change_scoped_species = no

								effect = {
									set_timed_species_flag = {
										flag = assimilation_species_of_species@prev
										days = 30
									}
									set_timed_species_flag = {
										flag = assimilation_species_of_empire@prevprev
										days = 30
									}
								}
							}
						}
					}
					else_if = {
						limit = {
							prev = {
								NOR = {
									has_ethic = ethic_gestalt_consciousness
									has_country_flag = synthetic_empire
									has_country_flag = flesh_weakened
								}
							}
							has_trait = trait_hive_mind
						}
						modify_species = {
							species = this
							remove_trait = trait_hive_mind
							change_scoped_species = no

							effect = {
								set_timed_species_flag = {
									flag = assimilation_species_of_species@prev
									days = 30
								}
								set_timed_species_flag = {
									flag = assimilation_species_of_empire@prevprev
									days = 30
								}
							}
						}
					}
					else_if = { #### Psionic Assimilation ADD OTHER RANDOM OPTIONS TOO
						limit = {
							prev = {
								has_ascension_perk = ap_transcendence
							}
						}
						if = {
							limit = {
								NOR = {
									has_trait = trait_psionic
									has_trait = trait_latent_psionic
								}
							}
							modify_species = {
								species = this
								add_trait = trait_psionic
								add_traits_at_start_of_list = yes
								change_scoped_species = no

								effect = {
									set_timed_species_flag = {
										flag = assimilation_species_of_species@prev
										days = 30
									}
									set_timed_species_flag = {
										flag = assimilation_species_of_empire@prevprev
										days = 30
									}
								}
							}
						}
						else_if = {
							limit = {
								NOT = { has_trait = trait_psionic}
								has_trait = trait_latent_psionic
							}
							modify_species = {
								species = this
								remove_trait = trait_latent_psionic
								add_trait = trait_psionic
								add_traits_at_start_of_list = yes
								change_scoped_species = no

								effect = {
									set_timed_species_flag = {
										flag = assimilation_species_of_species@prev
										days = 30
									}
									set_timed_species_flag = {
										flag = assimilation_species_of_empire@prevprev
										days = 30
									}
								}
							}
						}
					}
				}
			}

            every_owned_planet = {
                planet_event = { id = action.65 }
            }
        }
		set_update_modifiers_batch = end
    }
}

# Assimilate Pops
planet_event = {
	id = action.65
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_owned_species = {
			has_citizenship_type = {
				type = citizenship_assimilation
				country = root.owner
			}
		}
	}

	immediate = {
		random_list = {
			1 = { # 3 pops
				set_variable = {
					which = assimilation_counter
					value = 3
				}
				while = {
					count = 3
					limit = {
						any_owned_pop = {
							has_citizenship_type = {
								type = citizenship_assimilation
								country = root.owner
							}
						}
						check_variable = {
							which = assimilation_counter
							value > 0
						}
					}
					assimilation_effect = yes
				}
			}

			1 = { # 6 pops
				set_variable = {
					which = assimilation_counter
					value = 6
				}
				while = {
					count = 6
					limit = {
						any_owned_pop = {
							has_citizenship_type = {
								type = citizenship_assimilation
								country = root.owner
							}
						}
						check_variable = {
							which = assimilation_counter
							value > 0
						}
					}
					assimilation_effect = yes
				}
			}

			1 = { # 12 pops
				set_variable = {
					which = assimilation_counter
					value = 12
				}
				while = {
					count = 12
					limit = {
						any_owned_pop = {
							has_citizenship_type = {
								type = citizenship_assimilation
								country = root.owner
							}
						}
						check_variable = {
							which = assimilation_counter
							value > 0
						}
					}
					assimilation_effect = yes
				}
			}
		}
		set_variable = {
			which = assimilation_counter
			value = 0
		}
	}
}

# Clear deposits after some terraforming actions
planet_event = {
	id = action.68
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = {
				is_planet_class = pc_machine
			}
			#clear_deposits = yes
			every_deposit = {
				limit = {
					NOR = { # rare non-event deposits should not be cleared
						is_deposit_type = d_dust_caverns
						is_deposit_type = d_dust_desert
						is_deposit_type = d_bubbling_swamp
						is_deposit_type = d_fuming_bog
						is_deposit_type = d_crystalline_caverns
						is_deposit_type = d_crystal_forest
						is_deposit_type = d_crystal_reef
						is_deposit_type = d_betharian_deposit
						is_deposit_type = d_alien_pets_deposit
					}
				}
				remove_deposit = yes
			}
			remove_modifier = "natural_beauty"
			remove_modifier = "atmospheric_aphrodisiac"
			remove_modifier = "atmospheric_hallucinogen"
			remove_modifier = "lush_planet"
			if = {
				limit = {
					any_owned_pop = {
						NOR = {
							has_trait = trait_cybernetic
							has_trait = trait_machine_unit
							has_trait = trait_mechanical
						}
					}
				}
				add_deposit = d_organic_slurry
				every_owned_pop = {
					limit = {
						NOR = {
							has_trait = trait_cybernetic
							has_trait = trait_machine_unit
							has_trait = trait_mechanical
						}
					}
					if = {
						limit = {
							planet.owner = { has_valid_civic = civic_machine_terminator }
						}
						planet.owner = {
							add_resource = { unity = 100 }
						}
					}
					kill_pop = yes
				}
			}
		}
		if = {
			limit = {
				is_planet_class = pc_hive
			}
			#clear_deposits = yes
			every_deposit = {
				limit = {
					NOR = { # rare non-event deposits should not be cleared
						is_deposit_type = d_dust_caverns
						is_deposit_type = d_dust_desert
						is_deposit_type = d_bubbling_swamp
						is_deposit_type = d_fuming_bog
						is_deposit_type = d_crystalline_caverns
						is_deposit_type = d_crystal_forest
						is_deposit_type = d_crystal_reef
						is_deposit_type = d_betharian_deposit
						is_deposit_type = d_alien_pets_deposit
						is_deposit_type = d_tree_of_life_home
						is_deposit_type = d_tree_of_life_colony
					}
				}
				remove_deposit = yes
			}
			remove_modifier = "natural_beauty"
			remove_modifier = "atmospheric_aphrodisiac"
			remove_modifier = "atmospheric_hallucinogen"
			remove_modifier = "lush_planet"
		}

		remove_modifier = "bleak_planet"
		remove_modifier = "dangerous_wildlife"
		remove_modifier = "hazardous_weather"
		remove_modifier = "wild_storms"
		remove_modifier = "irradiated_planet"

		if = {
			limit = {
				NOT = {
					is_planet_class = pc_gaia
				}
				OR = {
					is_active_resolution = "resolution_ecology_environmental_control_board"
					is_active_resolution = "resolution_ecology_paradise_initiative"
				}
			}
			from.owner = {
				set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
			}
		}
		if = {
			limit = {
				exists = mining_station
			}
			mining_station = {
				delete_fleet = this
			}
		}
		if = {
			limit = {
				exists = research_station
			}
			research_station = {
				delete_fleet = this
			}
		}
	}
}

# Synth leaders die
# surveying scientist dies
country_event = {
	id = action.71
	title = action.71.name
	desc = action.71.desc
	picture = GFX_evt_ship_in_orbit
	show_sound = event_ship_bridge
	location = event_target:malfunctioning_leader.Fleet

	is_triggered_only = yes

	immediate = {
		event_target:malfunctioning_leader = {
			kill_leader = { type = scientist show_notification = no }
		}
	}

	option = {
		name = UNFORTUNATE
	}
}

# engineering scientist dies
country_event = {
	id = action.72
	title = action.72.name
	desc = action.72.desc
	picture = GFX_evt_news_room
	show_sound = event_ship_bridge
	location = capital_scope

	is_triggered_only = yes

	immediate = {
		event_target:malfunctioning_leader = {
			kill_leader = { type = scientist show_notification = no }
		}
	}

	option = {
		name = UNFORTUNATE
	}
}

# society scientist dies
country_event = {
	id = action.73
	title = action.73.name
	desc = action.73.desc
	picture = GFX_evt_news_room
	show_sound = event_ship_bridge
	location = capital_scope

	is_triggered_only = yes

	immediate = {
		event_target:malfunctioning_leader = {
			kill_leader = { type = scientist show_notification = no }
		}
	}

	option = {
		name = UNFORTUNATE
	}
}

# physics scientist dies
country_event = {
	id = action.74
	title = action.74.name
	desc = action.74.desc
	picture = GFX_evt_news_room
	show_sound = event_ship_bridge
	location = capital_scope

	is_triggered_only = yes

	immediate = {
		event_target:malfunctioning_leader = {
			kill_leader = { type = scientist show_notification = no }
		}
	}

	option = {
		name = UNFORTUNATE
	}
}

# admiral dies
country_event = {
	id = action.75
	title = action.75.name
	desc = action.75.desc
	picture = GFX_evt_space_debris
	show_sound = event_ship_bridge
	location = event_target:malfunctioning_leader.Fleet

	is_triggered_only = yes

	immediate = {
		event_target:malfunctioning_leader = {
			kill_leader = { type = admiral show_notification = no }
		}
	}

	option = {
		name = UNFORTUNATE
	}
}

# governor dies
country_event = {
	id = action.76
	title = action.76.name
	desc = action.76.desc
	picture = GFX_evt_throne_room
	show_sound = event_ship_bridge

	is_triggered_only = yes

	immediate = {
		event_target:malfunctioning_leader = {
			kill_leader = { type = governor show_notification = no }
		}
	}

	option = {
		name = UNFORTUNATE
	}
}


# Removes existing Android Armies when AI is Outlawed, and Robotic Armies when Robot Workers are Outlawed
# AI doesn't grant special armies, no need to remove them.
country_event = {
	id = action.80
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		last_changed_policy = robot_pop_policy
		has_policy_flag = robots_outlawed
		any_owned_army = {
			OR = {
				army_type = robotic_army
				army_type = robotic_defense_army
			}
		}
	}

	immediate = {
		if = {
			limit = { last_changed_policy = robot_pop_policy has_policy_flag = robots_outlawed }
			every_owned_army = {
				limit = {
					OR = {
						army_type = robotic_army
						army_type = robotic_defense_army
					}
				}
				remove_army = yes
			}
		}
	}
}

# Planet is turned into tomb world by special bombing stance
planet_event = {
	id = action.81
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		OR = {
			has_orbital_bombardment_stance = armageddon
			has_orbital_bombardment_stance = pox
			has_planet_flag = ariphaos_patch_flag_tomb_bombardment
		}
		from = {
			OR = {
				is_country_type = default
				is_country_type = fallen_empire
				is_country_type = awakened_fallen_empire
				is_country_type = vol
			}
		}
		habitable_planet = yes
	}

	immediate = {
		owner = {
			add_static_war_exhaustion = {
				attacker = from
				location = root
				value_for_planet_destruction = 0.5
			}
			country_event = { id = action.82 }
		}
		from = { country_event = { id = action.83 } }
		change_pc = pc_nuked
		set_planet_flag = nuked_planet_anomalies_disabled
		remove_all_buildings = yes
		remove_all_districts = yes
		reroll_deposits = yes
		remove_modifier = "natural_beauty"
		remove_modifier = "atmospheric_aphrodisiac"
		remove_modifier = "atmospheric_hallucinogen"
		remove_modifier = "lush_planet"
		remove_modifier = "dangerous_wildlife"
		set_planet_flag = armageddon_nuked
	}
}

# Planet is turned into tomb world by Armageddon bombing stance (former owner)
country_event = {
	id = action.82
	title = "action.82.name"
	picture = GFX_evt_nuclear_explosion
	desc = action.82.desc
	show_sound = event_super_explosion
	location = from

	is_triggered_only = yes

	option = {
		name = action.82.a
		custom_tooltip = bombed_to_tomb_world
	}
}

# Planet is turned into tomb world by Armageddon bombing stance (bombarder)
country_event = {
	id = action.83
	title = "action.82.name"
	picture = GFX_evt_nuclear_explosion
	desc = action.83.desc
	show_sound = event_super_explosion
	location = from

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		custom_tooltip = bombed_to_tomb_world
	}
}

# Planet conquered
planet_event = {
	id = action.84
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		owner = {
			set_timed_country_flag = { flag = imperialist_conquest_timed_flag days = 3600 }
		}
	}
}

# Planets in mixed-ownership systems fall to starbase owner
event = {
	id = action.85
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_country = {
			NOT = { is_country_type = primitive }
			any_owned_planet = {
				exists = starbase
				starbase = {
					owner = {
						NOR = {
							is_same_value = prevprevprev
							is_at_war_with = prevprevprev
						}
					}
				}
			}
		}
	}

	immediate = {
		every_galaxy_planet = {
			limit = {
				exists = owner
				owner = {
					OR = {
						is_country_type = default
						is_country_type = fallen_empire
						is_country_type = awakened_fallen_empire
					}
				}
				exists = starbase
				starbase = {
					exists = owner
					owner = {
						OR = {
							is_country_type = default
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
						NOR = {
							is_same_value = prevprev.owner
							is_at_war_with = prevprev.owner
						}
						NOT = {
							has_active_event = {
								primitive.180 #event to decide fate of primitive civ
							}
						}
					}
				}
			}
			planet_event = { id = action.86 } # planet flips to starbase owner
		}
	}
}

planet_event = {
	id = action.86
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		owner = { save_event_target_as = former_planet_owner }
		starbase.owner = { save_event_target_as = new_planet_owner }

		set_owner = event_target:new_planet_owner # flip planet

		event_target:former_planet_owner = {
			country_event = { id = action.87 } # notification to former owner
		}

		#owner = {
		#	country_event = { id = action.87 } # notification to former owner
		#}

		event_target:new_planet_owner = {
			country_event = { id = action.88 } # notification to new owner
		}

		#starbase.owner = {
		#	country_event = { id = action.88 } # notification to new owner
		#}

		#set_owner = event_target:new_planet_owner # flip planet
	}
}

country_event = {
	id = action.87
	title = action.87.name
	desc = action.87.desc
	picture = GFX_evt_star_chart
	show_sound = event_default
	location = from

	is_triggered_only = yes

	option = {
		name = UNFORTUNATE
		tooltip = {
			from = {
				set_owner = event_target:new_planet_owner
			}
		}
	}
}

country_event = {
	id = action.88
	title = action.88.name
	desc = action.88.desc
	picture = GFX_evt_star_chart
	show_sound = event_default
	location = from

	is_triggered_only = yes

	option = {
		name = OK
		tooltip = {
			from = {
				set_owner = event_target:new_planet_owner
			}
		}
	}
}

# Remove modifiers on owner change
planet_event = {
	id = action.89
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_modifier = planet_population_control
		remove_modifier = planet_growth_discouraged
		remove_modifier = hunter_killer_drones
		remove_modifier = compliance_protocols
		remove_modifier = martial_law
		remove_modifier = crime_lord_deal
		remove_modifier = crime_lord_deal_broken
		remove_modifier = anticrime_campaign
		remove_modifier = penal_colony
		remove_modifier = resort_colony
		remove_modifier = slave_colony
		remove_modifier = gang_wars
		remove_modifier = drone_corruption
		remove_modifier = drone_deviancy
		remove_modifier = criminal_underworld
		remove_modifier = center_of_drug_trade
		remove_modifier = mob_rule
		remove_modifier = crime_wave
		remove_modifier = smuggler_activity
		remove_modifier = substance_abuse
		remove_modifier = bribed_officials
		remove_modifier = cartel_war
		remove_modifier = travel_advisory
		remove_modifier = trade_pilfering
		remove_modifier = protection_racket
		remove_modifier = cartel_war
		remove_modifier = ringleader_killed
		remove_modifier = corrupt_network_terminated
		remove_modifier = unemployment_benefits
		remove_modifier = activity_program
		remove_modifier = standby_mode
	}
}

event = {
	id = action.90
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		any_playable_country = {
			any_owned_planet = {
				is_controlled_by = PREV
				solar_system = {
					NOT = {
						exists = starbase
					}
				}
			}
		}
	}
	immediate = {
		every_system = {
			limit = {
				NOT = { exists = starbase }
				any_system_planet = {
					is_colony = yes
					exists = owner
					has_ground_combat = no
					owner = {
						OR = {
							is_country_type = default
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
					solar_system = {
						NOR = {
							any_fleet_in_system = {
								exists = owner
								owner = {
									NOT = { is_same_value = prevprevprev.owner }
									OR = {
										is_hostile = prevprevprev.owner
										is_at_war_with = prevprevprev.owner
									}
								}
							}
							any_system_planet = {
								exists = owner
								NOT = { is_same_value = prevprev }
								owner = {
									NOT = { is_same_value = prevprevprev.owner }
									OR = {
										is_country_type = default
										is_country_type = fallen_empire
										is_country_type = awakened_fallen_empire
									}
								}
							}
						}
					}
				}
			}
			random_system_planet = {
				limit = {
					is_colony = yes
					exists = owner
					has_ground_combat = no
					owner = {
						OR = {
							is_country_type = default
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
					solar_system = {
						NOR = {
							any_fleet_in_system = {
								exists = owner
								owner = {
									NOT = { is_same_value = prevprevprev.owner }
									OR = {
										is_hostile = prevprevprev.owner
										is_at_war_with = prevprevprev.owner
									}
								}
							}
							any_system_planet = {
								exists = owner
								owner = {
									NOT = { is_same_value = prevprev.owner }
									OR = {
										is_country_type = default
										is_country_type = fallen_empire
										is_country_type = awakened_fallen_empire
									}
								}
							}
						}
					}
				}
				planet_event = { id = action.91 }
			}
		}
	}
}

planet_event = {
	id = action.91
	title = action.91.name
	desc = action.91.desc
	picture = GFX_evt_star_chart
	show_sound = event_default
	location = root

	is_triggered_only = yes

	immediate = {
		solar_system = {
			create_starbase = {
				size = starbase_outpost
				owner = root.owner
			}
		}
	}

	option = {
		name = OK
		tooltip = {
			solar_system = {
				create_starbase = {
					size = starbase_outpost
					owner = root.owner
				}
			}
		}
	}
}

# Make sure Swarm-owned planets are Infested and megastructures wiped
event = {
	id = action.92
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		any_country = { is_country_type = swarm }
	}

	immediate = {
		every_galaxy_planet = {
			limit = {
				exists = owner
				owner = { is_country_type = swarm }
				NOT = { is_planet_class = pc_infested }
			}
			if = {
				limit = {
					is_under_colonization = no
					is_planet_class = pc_habitat
				}
				destroy_colony = yes
				remove_planet = yes
			}
			else_if = {
				limit = {
					is_under_colonization = no
					is_planet_class = pc_ringworld_habitable
				}
				destroy_colony = yes
				change_pc = pc_ringworld_habitable_damaged
				reset_planet = yes
			}
			else_if = {
				limit = {
					NOR = {
						is_under_colonization = no
						is_planet_class = pc_habitat
						is_planet_class = pc_ringworld_habitable
					}
				}
				change_pc = pc_infested
			}
		}
	}
}

# Make sure Extradimensionals own no planets or megastructures
event = {
	id = action.93
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		any_country = {
			OR = {
				is_country_type = extradimensional
				is_country_type = extradimensional_2
				is_country_type = extradimensional_3
			}
		}
	}

	immediate = {
		every_galaxy_planet = {
			limit = {
				exists = owner
				owner = {
					OR = {
						is_country_type = extradimensional
						is_country_type = extradimensional_2
						is_country_type = extradimensional_3
					}
				}
			}
			if = {
				limit = {
					OR = {
						is_planet_class = pc_habitat
						is_planet_class = pc_ringworld_habitable
					}
				}
				destroy_colony = yes
			}
			else = {
				random_list = {
					50 = { change_pc = pc_barren }
					50 = { change_pc = pc_barren_cold }
				}
				add_modifier = {
					modifier = "terraforming_candidate"
					days = -1
				}
			}
		}
	}
}

ship_event = {
	id = action.94
	title = action.92.name
	desc = {
		trigger = {
			success_text = {
				text =					         action.92.rare_crystals
				hidden:from = { has_resource = { type = rare_crystals amount > 0 } }
			}
			success_text = {
				text =					         action.92.exotic_gases
				hidden:from = { has_resource = { type = exotic_gases amount > 0 } }
			}
			success_text = {
				text =					         action.92.volatile_motes
				hidden:from = { has_resource = { type = volatile_motes amount > 0 } }
			}
			success_text = {
				text =					         action.92.zro
				hidden:from = { has_resource = { type = sr_zro amount > 0 } }
			}
			success_text = {
				text =					         action.92.dark_matter
				hidden:from = { has_resource = { type = sr_dark_matter amount > 0 } }
			}
			success_text = {
				text =						     action.92.living_metal
				hidden:from = { has_resource = { type = sr_living_metal amount > 0 } }
			}
			success_text = {
				text = action.92.has_tech
				OR = {
					hidden:from = { has_resource = { type = alloys amount > 0 } }
					AND = {
						hidden:from = { has_resource = { type = rare_crystals amount > 0 } }
						hidden:owner = { has_technology = tech_rare_crystals}
					}
					AND = {
						hidden:from = { has_resource = { type = exotic_gases amount > 0 } }
						hidden:owner = { has_technology = tech_exotic_gases }
					}
					AND = {
						hidden:from = { has_resource = { type = volatile_motes amount > 0 } }
						hidden:owner = { has_technology = tech_volatile_motes }
					}
					AND = {
						hidden:from = { has_resource = { type = sr_zro amount > 0 } }
						hidden:owner = { has_technology = tech_mine_zro }
					}
					AND = {
						hidden:from = { has_resource = { type = sr_dark_matter amount > 0 } }
						hidden:owner = { has_technology = tech_mine_dark_matter }
					}
					AND = {
						hidden:from = { has_resource = { type = sr_living_metal amount > 0 } }
						hidden:owner = { has_technology = tech_mine_living_metal }
					}
				}
			}
			success_text = {
				text = action.92.no_tech
				# same trigger as above
				NOR = {
					AND = {
						hidden:from = { has_resource = { type = rare_crystals amount > 0 } }
						hidden:owner = { has_technology = tech_rare_crystals}
					}
					AND = {
						hidden:from = { has_resource = { type = exotic_gases amount > 0 } }
						hidden:owner = { has_technology = tech_exotic_gases }
					}
					AND = {
						hidden:from = { has_resource = { type = volatile_motes amount > 0 } }
						hidden:owner = { has_technology = tech_volatile_motes }
					}
					AND = {
						hidden:from = { has_resource = { type = sr_zro amount > 0 } }
						hidden:owner = { has_technology = tech_mine_zro }
					}
					AND = {
						hidden:from = { has_resource = { type = sr_dark_matter amount > 0 } }
						hidden:owner = { has_technology = tech_mine_dark_matter }
					}
					AND = {
						hidden:from = { has_resource = { type = sr_living_metal amount > 0 } }
						hidden:owner = { has_technology = tech_mine_living_metal }
					}
				}
			}
		}
	}
	picture = GFX_evt_surreal_visions
	show_sound = event_default
	location = from

	is_triggered_only = yes

	trigger = {
		from = { # basically a pre-trigger
			has_strategic_resource = yes
			has_anomaly = no
		}
		owner = {
			OR = {
				AND = {
					root.from = {
						has_resource = {
							amount > 0
							type = 	volatile_motes
						}
					}
					NOT = {
						has_country_flag = 	   volatile_motes_found
					}
				}
				AND = {
					root.from = {
						has_resource = {
							amount > 0
							type = 	exotic_gases
						}
					}
					NOT = {
						has_country_flag = 	   exotic_gases_found
					}
				}
				AND = {
					root.from = {
						has_resource = {
							amount > 0
							type = 	rare_crystals
						}
					}
					NOT = {
						has_country_flag = 	   rare_crystals_found
					}
				}
				AND = {
					root.from = {
						has_resource = {
							amount > 0
							type = 	sr_living_metal
						}
					}
					NOT = {
						has_country_flag = 	   living_metal_found
					}
				}
				AND = {
					root.from = {
						has_resource = {
							amount > 0
							type = 	sr_zro
						}
					}
					NOT = {
						has_country_flag = 	   zro_found
					}
				}
				AND = {
					root.from = {
						has_resource = {
							amount > 0
							type = 	sr_dark_matter
						}
					}
					NOT = {
						has_country_flag = 	   dark_matter_found
					}
				}
			}
		}
	}

	immediate = {
		from = {
			if = {
				limit = { has_resource = { type = rare_crystals amount > 0 } }
				root.owner = { set_country_flag =    rare_crystals_found }
			}
			else_if = {
				limit = { has_resource = { type = exotic_gases amount > 0 } }
				root.owner = { set_country_flag =    exotic_gases_found }
			}
			else_if = {
				limit = { has_resource = { type = volatile_motes amount > 0 } }
				root.owner = { set_country_flag =    volatile_motes_found }
			}
			else_if = {
				limit = { has_resource = { type = sr_zro amount > 0 } }
				root.owner = { set_country_flag =    zro_found }
			}
			else_if = {
				limit = { has_resource = { type = sr_dark_matter amount > 0 } }
				root.owner = { set_country_flag =    dark_matter_found }
			}
			else_if = {
				limit = { has_resource = { type = sr_living_metal amount > 0 } }
				root.owner = { set_country_flag =    living_metal_found }
			}
		}
	}

	option = {
		name = OK
		from = {
			hidden_effect = {
				if = {
					limit = { has_resource = { type = rare_crystals amount > 0 } }
					custom_tooltip = action.92.rare_crystals.tooltip
				}
				else_if = {
					limit = { has_resource = { type = exotic_gases amount > 0 } }
					custom_tooltip = action.92.exotic_gases.tooltip
				}
				else_if = {
					limit = { has_resource = { type = volatile_motes amount > 0 } }
					custom_tooltip = action.92.volatile_motes.tooltip
				}
				else_if = {
					limit = { has_resource = { type = sr_zro amount > 0 } }
					custom_tooltip = action.92.zro.tooltip
				}
				else_if = {
					limit = { has_resource = { type = sr_dark_matter amount > 0 } }
					custom_tooltip = action.92.dark_matter.tooltip
				}
				else_if = {
					limit = { has_resource = { type = sr_living_metal amount > 0 } }
					custom_tooltip = action.92.living_metal.tooltip
				}
			}
		}
	}
}

## Founding the galactic market
## on_yearly_pulse
#event = {
#	id = action.95
#	hide_window = yes
#	is_triggered_only = yes
#
#	trigger = {
#		years_passed >= 50
#		NOR = {
#			has_global_flag = galactic_market_founded
#			has_global_flag = ongoing_market_nomination
#		}
#		count_country = { # minimum 3 countries
#			limit = { is_country_type = default }
#			count >= 3
#		}
#		any_playable_country = {
#			perc_communications_with_playable >= 0.5
#			is_homicidal = no
#			is_gestalt = no
#			# gestalts can use but not found the market
#		}
#	}
#
#	immediate = {
#		random_playable_country = {
#			limit = {
#				perc_communications_with_playable >= 0.5
#				is_homicidal = no
#				is_gestalt = no
#			}
#			country_event = { id = action.96 }
#		}
#	}
#}

# Market Founder event
country_event = {
	id = action.96
	title = action.96.name
	desc = {
		text = action.96.desc
		trigger = { is_xenophobe = no }
	}
	desc = {
		text = action.96.desc.phobe
		trigger = { is_xenophobe = yes }
	}
	picture = GFX_evt_financial_instruments
	show_sound = event_galactic_market

	is_triggered_only = yes

	fire_only_once = yes # failsafe

	immediate = {
		set_global_flag = ongoing_market_nomination
		set_country_flag = market_nomination_eligible
		event_target:global_event_country = {
			country_event = { id = action.98 days = 1800 }
		}
		begin_event_chain = {
			event_chain = market_founding_chain
			target = this
		}
		every_playable_country = {
			limit = {
				NOT = { is_same_value = root }
				is_galactic_community_member = yes
			}
			begin_event_chain = {
				event_chain = market_founding_chain
				target = this
			}
			country_event = { id = action.97 }
		}
	}

	after = {
		custom_tooltip = enable_decision_market_nomination
		# Notification
		tooltip = {
			begin_event_chain = {
				event_chain = market_founding_chain
				target = this
			}
		}
	}

	option = {
		name = action.96.a
		trigger = { has_authority = auth_corporate }
	}

	option = {
		name = action.96.b
		trigger = { NOT = { has_authority = auth_corporate } }
	}
}

# Market Nomination started notification event
country_event = {
	id = action.97
	title = action.97.name
	desc = {
		text = action.97.desc
		trigger = {
			NOR = {
				is_xenophobe = yes
				has_authority = auth_corporate
			}
		}
	}
	desc = {
		text = action.97.desc.phobe
		trigger = { is_xenophobe = yes }
	}
	desc = {
		text = action.97.desc.corp
		trigger = { has_authority = auth_corporate }
	}
	picture = GFX_evt_financial_instruments
	show_sound = event_galactic_market

	is_triggered_only = yes

	immediate = {
		set_country_flag = market_nomination_eligible
	}

	after = {
		tooltip = {
			begin_event_chain = {
				event_chain = market_founding_chain
				target = this
			}
		}
	}

	option = {
		name = action.96.a
		trigger = { has_authority = auth_corporate }
		custom_tooltip = enable_decision_market_nomination
	}

	option = {
		name = action.96.b
		trigger = { NOT = { has_authority = auth_corporate } }
		custom_tooltip = enable_decision_market_nomination
	}
}


# Market Founder luck-of-the-draw
country_event = {
	id = action.98
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_playable_country = {
			limit = { has_event_chain = market_founding_chain }
			end_event_chain = market_founding_chain
		}
		remove_global_flag = ongoing_market_nomination
		# nominees start equal, modifiers improve chances
		random_country = {
			limit = {
				is_country_type = default
				has_country_flag = market_nomination_eligible
			}
			weights = {
				# can use add or mult
				base = 1
				modifier = {
					add = 75
					check_variable = {
						which = market_rating
						value = 5
					}
				}
				modifier = {
					add = 50
					check_variable = {
						which = market_rating
						value = 4
					}
				}
				modifier = {
					add = 30
					check_variable = {
						which = market_rating
						value = 3
					}
				}
				modifier = {
					add = 20
					check_variable = {
						which = market_rating
						value = 2
					}
				}
				modifier = {
					add = 10
					check_variable = {
						which = market_rating
						value = 1
					}
				}
				modifier = {
					mult = 0.5
					NOT = {
						any_owned_planet = {
							OR = {
								has_modifier = market_nominee_level_1
								has_modifier = market_nominee_level_2
								has_modifier = market_nominee_level_3
								has_modifier = market_nominee_level_4
								has_modifier = market_nominee_level_5
							}
						}
					}
				}
			}
			save_global_event_target_as = market_founder
			random_owned_planet = {
				weights = {
					base = 1
					modifier = {
						mult = 9999
						OR = {
							has_modifier = market_nominee_level_1
							has_modifier = market_nominee_level_2
							has_modifier = market_nominee_level_3
							has_modifier = market_nominee_level_4
							has_modifier = market_nominee_level_5
						}
					}
				}
				save_global_event_target_as = market_founder_planet
			}
			country_event = { id = action.99 }
		}
		every_playable_country = {
			limit = { has_country_flag = market_nomination_eligible }
			every_owned_planet = {
				limit = {
					OR = {
						has_modifier = market_nominee_level_1
						has_modifier = market_nominee_level_2
						has_modifier = market_nominee_level_3
						has_modifier = market_nominee_level_4
						has_modifier = market_nominee_level_5
					}
				}
				# remove boosted flags
				if = {
					limit = { has_planet_flag = boosted_once }
					remove_planet_flag = boosted_once
				}
				if = {
					limit = { has_planet_flag = boosted_twice }
					remove_planet_flag = boosted_twice
				}
				# remove modifiers
				if = {
					limit = { has_modifier = market_nominee_level_1 }
					remove_modifier = market_nominee_level_1
				}
				else_if = {
					limit = { has_modifier = market_nominee_level_2 }
					remove_modifier = market_nominee_level_2
				}
				else_if = {
					limit = { has_modifier = market_nominee_level_3 }
					remove_modifier = market_nominee_level_3
				}
				else_if = {
					limit = { has_modifier = market_nominee_level_4 }
					remove_modifier = market_nominee_level_4
				}
				else_if = {
					limit = { has_modifier = market_nominee_level_5 }
					remove_modifier = market_nominee_level_5
				}
			}
			set_variable = {
				which = market_rating
				value = 0
			}
		}
	}
}

# Founder selected port
country_event = {
	id = action.99
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		set_global_flag = galactic_market_founded
		# code listens for this flag to create market
		country_event = { id = action.104 days = 5 }
	}
}

country_event = {
	id = action.104
	title = action.99.name
	desc = {
		text = action.99.desc
		trigger = { is_xenophobe = no }
	}
	desc = {
		text = action.99.desc.phobe
		trigger = { is_xenophobe = yes }
	}
	picture = GFX_evt_financial_instruments
	location = event_target:galactic_market_station
	show_sound = event_galactic_market

	is_triggered_only = yes

	immediate = {
		set_country_flag = has_market_access
		enable_galactic_market = yes
		enable_on_market = energy
		enable_on_market = minerals
		enable_on_market = food
		enable_on_market = consumer_goods
		enable_on_market = alloys
		if = {
			limit = {
				any_country = {
					is_galactic_community_member = yes
					resource_income_compare = {
						resource = volatile_motes
						value > 0
					}
				}
			}
			enable_on_market = volatile_motes
		}
		if = {
			limit = {
				any_country = {
					is_galactic_community_member = yes
					resource_income_compare = {
						resource = rare_crystals
						value > 0
					}
				}
			}
			enable_on_market = rare_crystals
		}
		if = {
			limit = {
				any_country = {
					is_galactic_community_member = yes
					resource_income_compare = {
						resource = exotic_gases
						value > 0
					}
				}
			}
			enable_on_market = exotic_gases
		}
		if = {
			limit = {
				any_country = {
					is_galactic_community_member = yes
					resource_income_compare = {
						resource = sr_dark_matter
						value > 0
					}
				}
			}
			enable_on_market = sr_dark_matter
		}
		if = {
			limit = {
				any_country = {
					is_galactic_community_member = yes
					resource_income_compare = {
						resource = sr_zro
						value > 0
					}
				}
			}
			enable_on_market = sr_zro
		}
		if = {
			limit = {
				any_country = {
					is_galactic_community_member = yes
					resource_income_compare = {
						resource = sr_living_metal
						value > 0
					}
				}
			}
			enable_on_market = sr_living_metal
		}
		add_modifier = {
			modifier = galactic_market_founder
			days = -1
		}
		set_market_leader = yes # Update who owns the market station

		set_timed_global_flag = { flag = resolution_galactic_market_relocated_recently days = 18000 }

		event_target:market_founder_planet.solar_system.star = {
			create_ambient_object = {
				type = galactic_market_station
				location = this
			}
			last_created_ambient_object = {
				save_global_event_target_as = galactic_market_station
				set_ambient_object_flag = galactic_market_station_flag
				set_location = {
					target = event_target:market_founder_planet.solar_system.star
					angle = random
					distance = 40
				}
			}
		}
		every_playable_country = {
			limit = {
				is_galactic_community_member = yes
				NOT = { is_same_value = root }
			}
			country_event = { id = action.101 }
		}
	}

	option = {
		name = OK
		custom_tooltip = established_galactic_market_station
		tooltip = {
			end_event_chain = market_founding_chain
			add_modifier = {
				modifier = galactic_market_founder
				days = -1
			}
		}
	}
}

# Founder selected notification
country_event = {
	id = action.101
	title = action.101.name
	desc = {
		text = action.101.desc
		trigger = {
			NOT = { is_xenophobe = yes }
		}
	}
	desc = {
		text = action.101.desc.phobe
		trigger = { is_xenophobe = yes }
	}
	picture = GFX_evt_financial_instruments
	location = event_target:galactic_market_station

	immediate = {
		set_country_flag = has_market_access
		enable_galactic_market = yes
		event_target:galactic_market_station.solar_system = {
			every_system_planet = {
				set_surveyed = {
					surveyed = yes
					surveyor = root
				}
			}
		}
	}

	is_triggered_only = yes

	option = {
		name = OK
		tooltip = { end_event_chain = market_founding_chain }
	}
}

# Market station lost, is conquered or moved
country_event = {
	id = action.102
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		exists = event_target:galactic_market_station
		from = {
			any_system_ambient_object = {
				is_same_value = event_target:galactic_market_station
			}
		}
	}

	immediate = {
		if = { # no new owner or homicidal empire
			limit = {
				OR = {
					NOT = { exists = fromfrom }
					AND = {
						exists = fromfrom
						fromfrom = {
							OR = {
								is_homicidal = yes
								is_galactic_community_member = yes
							}
						}
					}
				}
			}
			# transfer to contact
			event_target:galactic_market_station = {
				destroy_ambient_object = this
			}
			clear_global_event_target = galactic_market_station
			clear_global_event_target = market_founder_planet
			remove_modifier = galactic_market_founder

			random_playable_country = {
				limit = {
					is_homicidal = no
					is_galactic_community_member = yes
				}
				weights = {
					base = 1
					modifier = {
						mult = 999
						has_communications = root
						has_country_flag = market_nomination_eligible
					}
					modifier = {
						mult = 20
						capital_scope = {
							is_planet_class = pc_city
						}
					}
					modifier = {
						mult = 9
						has_authority = auth_corporate
					}
					modifier = {
						mult = 2
						trade_income >= 120
					}
					modifier = {
						mult = 0.5
						trade_income <= 50
					}
					modifier = {
						mult = 0.75
						has_ethic = ethic_gestalt_consciousness
					}
				}
				capital_scope = {
					create_ambient_object = {
						type = "galactic_market_station"
						location = this
					}
					save_global_event_target_as = market_founder_planet
					last_created_ambient_object = {
						save_global_event_target_as = galactic_market_station
						set_ambient_object_flag = galactic_market_station_flag
						set_location = {
							target = event_target:market_founder_planet.solar_system.star
							angle = random
							distance = 40
						}
					}
				}
				add_modifier = {
					modifier = galactic_market_founder
					days = -1
				}
				set_market_leader = yes

				country_event = { id = action.103 }
			}
			create_message = {
				type = MESSAGE_TYPE_LOST_MARKET_STATION
				localization = MESSAGE_LOST_MARKET_STATION
				days = 30
				target = root.from # the Go To
				variable = {
					type = name
					localization = SYSTEM
					scope = root.from
				}
			}
		}
		else_if = { # lost to valid empire without market access (somehow)
			limit = {
				exists = fromfrom
				fromfrom = {
					is_country_type = default
					NOT = { has_country_flag = has_market_access }
				}
			}
			fromfrom = {
				set_country_flag = has_market_access
				enable_galactic_market = yes
				add_modifier = {
					modifier = galactic_market_founder
					days = -1
				}
				set_market_leader = yes
			}
			remove_modifier = galactic_market_founder
			create_message = {
				type = MESSAGE_TYPE_LOST_MARKET_STATION
				localization = MESSAGE_LOST_MARKET_STATION
				days = 30
				target = root.from # the Go To
				variable = {
					type = name
					localization = SYSTEM
					scope = root.from
				}
			}
		}
		else = {
			remove_modifier = galactic_market_founder
			fromfrom = {
				add_modifier = {
					modifier = galactic_market_founder
					days = -1
				}
				set_market_leader = yes
			}
			create_message = {
				type = MESSAGE_TYPE_LOST_MARKET_STATION
				localization = MESSAGE_LOST_MARKET_STATION
				days = 30
				target = root.from # the Go To
				variable = {
					type = name
					localization = SYSTEM
					scope = root.from
				}
			}
		}
	}
}

# Market station moved to my system
country_event = {
	id = action.103
	title = action.103.name
	desc = action.103.desc
	picture = GFX_evt_financial_instruments
	location = event_target:galactic_market_station

	is_triggered_only = yes

	option = {
		name = OK
		custom_tooltip = established_galactic_market_station
		tooltip = {
			add_modifier = {
				modifier = galactic_market_founder
				days = -1
			}
		}
	}
}

# Catch non-standard comms ending up outside the Market, on yearly pulse
event = {
	id = action.105
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_global_flag = galactic_market_founded
		any_playable_country = {
			is_homicidal = no
			NOT = { has_country_flag = has_market_access }
		}
	}

	immediate = {
		every_playable_country = {
			limit = {
				is_homicidal = no
				is_galactic_community_member = yes
				NOT = { has_country_flag = has_market_access }
				any_playable_country = {
					has_communications = prev
					has_country_flag = has_market_access
				}
			}
			country_event = { id = action.115 random = 40 }
		}
	}
}

country_event = {
	id = action.110
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_country_type = default
		from = { is_country_type = default }
		OR = {
			AND = {
				is_galactic_community_member = yes
				from = {
					is_galactic_community_member = no
					NOT = { has_country_flag = galcom_form_nay }
				}
			}
			AND = {
				NOT = { has_country_flag = galcom_form_nay }
				is_galactic_community_member = no
				from = { is_galactic_community_member = yes }
			}
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_country_flag = galcom_form_nay }
				is_galactic_community_member = no
				from = { is_galactic_community_member = yes }
			}
			country_event = { id = galcom.16 days = 15 }
		}
		else_if = {
			limit = {
				is_galactic_community_member = yes
				from = {
					is_galactic_community_member = no
					NOT = { has_country_flag = galcom_form_nay }
				}
			}
			from = { country_event = { id = galcom.16 days = 15 } }
		}
	}
}

# Enable market when having comms with market participant
country_event = {
	id = action.115
	title = action.106.name
	desc = {
		text = action.106.desc
		trigger = { is_xenophobe = no }
	}
	desc = {
		text = action.106.desc.phobe
		trigger = { is_xenophobe = yes }
	}
	picture = GFX_evt_financial_instruments

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = has_market_access }
	}

	immediate = {
		enable_galactic_market = yes
		set_country_flag = has_market_access
	}

	option = {
		name = OK
	}
}

# Enable resources for Galactic Market
event = {
	id = action.116
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_global_flag = galactic_market_founded

		OR = {
			NOT = { is_on_market = volatile_motes }
			NOT = { is_on_market = exotic_gases }
			NOT = { is_on_market = rare_crystals }
			NOT = { is_on_market = sr_living_metal }
			NOT = { is_on_market = sr_zro }
			NOT = { is_on_market = sr_dark_matter }
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { is_on_market = volatile_motes }
				any_playable_country = {
					is_galactic_community_member = yes
					resource_stockpile_compare = {  resource = volatile_motes value >= 1 }
				}
			}
			enable_on_market = volatile_motes
		}
		else_if = {
			limit = {
				NOT = { is_on_market = exotic_gases }
				any_playable_country = {
					is_galactic_community_member = yes
					resource_stockpile_compare = {  resource = exotic_gases value >= 1 }
				}
			}
			enable_on_market = exotic_gases
		}
		else_if = {
			limit = {
				NOT = { is_on_market = rare_crystals }
				any_playable_country = {
					is_galactic_community_member = yes
					resource_stockpile_compare = {  resource = rare_crystals value >= 1 }
				}
			}
			enable_on_market = rare_crystals
		}
		else_if = {
			limit = {
				NOT = { is_on_market = sr_living_metal }
				any_playable_country = {
					is_galactic_community_member = yes
					resource_stockpile_compare = {  resource = sr_living_metal value >= 1 }
				}
			}
			enable_on_market = sr_living_metal
		}
		else_if = {
			limit = {
				NOT = { is_on_market = sr_zro }
				any_playable_country = {
					is_galactic_community_member = yes
					resource_stockpile_compare = {  resource = sr_zro value >= 1 }
				}
			}
			enable_on_market = sr_zro
		}
		else_if = {
			limit = {
				NOT = { is_on_market = sr_dark_matter }
				any_playable_country = {
					is_galactic_community_member = yes
					resource_stockpile_compare = {  resource = sr_dark_matter value >= 1 }
				}
			}
			enable_on_market = sr_dark_matter
		}
	}
}

#  Megastructure completed notification for contacts
country_event = {
	id = action.120
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		from = {
			OR = {
				is_megastructure_type = dyson_sphere_5
				is_megastructure_type = dyson_sphere_restored
				is_megastructure_type = spy_orb_4
				is_megastructure_type = spy_orb_restored
				is_megastructure_type = think_tank_3
				is_megastructure_type = think_tank_restored
				is_megastructure_type = gateway_final
				is_megastructure_type = gateway_restored
				is_megastructure_type = matter_decompressor_4
				is_megastructure_type = strategic_coordination_center_3
				is_megastructure_type = mega_art_installation_3
				is_megastructure_type = interstellar_assembly_4
			}
		}
	}

	immediate = {
		every_relation = {
			limit = {
				is_country_type = default
				OR = {
					has_intel_level = {
						who = root
						category = economy
						level >= 1
					}
					has_intel_level = {
						who = root
						category = technology
						level >= 1
					}
				}
			}
			create_message = {
				type = ALIEN_MEGASTRUCTURE_BUILT
				localization = MESSAGE_ALIEN_MEGASTRUCTURE_BUILT
				days = 30
				target = root.from # the Go To
				variable = {
					type = name
					localization = COUNTRY
					scope = root
				}
				variable = {
					type = name
					localization = MEGASTRUCTURE
					scope = root.from
				}
				variable = {
					type = name
					localization = SYSTEM
					scope = root.fromfrom
				}
			}
		}
	}
}

# Pop Abducted
pop_event = {
	id = action.121
	title = OK
	desc = OK

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		create_message = {
			type = MESSAGE_TYPE_POP_ABDUCTED
			localization = MESSAGE_POP_ABDUCTED
			days = 30
			target = from
			variable = {
				type = name
				localization = SPECIES
				scope = root.species
			}
			variable = {
				type = name
				localization = TARGET_PLANET
				scope = root.planet
			}
			variable = {
				type = name
				localization = PLANET
				scope = from
			}
		}
		if = {
			limit = {
				exists = from.owner
			}
			from.owner = {
				create_message = {
					type = MESSAGE_TYPE_POP_ABDUCTED_FROM_US
					localization = MESSAGE_POP_ABDUCTED_FROM_US
					days = 30
					target = from
					variable = {
						type = name
						localization = SPECIES
						scope = root.species
					}
					variable = {
						type = name
						localization = ABDUCTER
						scope = root.planet.owner
					}
					variable = {
						type = name
						localization = PLANET
						scope = from
					}
				}
			}
		}
	}
}

# Last Primitive Pop Abducted (HIDDEN)
pop_event = {
	id = action.122
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		from = { num_pops = 0 }
	}

	immediate = {
		from = {
			if = {
				limit = { has_observation_outpost = yes }
				observation_outpost = {
					owner = {
						save_event_target_as = obsv_post_owner
						country_event = { id = action.123 }
					}
					dismantle = yes
				}
			}
		}
		owner = {
			if = {
				limit = {
					OR = {
						NOT = { exists = event_target:obsv_post_owner }
						NOT = { is_same_value = event_target:obsv_post_owner }
					}
				}
				save_event_target_as = abductor
				country_event = { id = action.123 }
			}
		}
		from = {
			solar_system = {
				if = {
					limit = { exists = space_owner }
					space_owner = {
						if = {
							limit = {
								NOT = { is_same_value = event_target:abductor }
								OR = {
									NOT = { exists = event_target:obsv_post_owner }
									NOT = { is_same_value = event_target:obsv_post_owner }
								}
							}
							country_event = { id = action.123 }
						}
					}
				}
			}
		}
	}
}

# Last Primitive Pop Abducted
country_event = {
	id = action.123
	title = "action.123.name"
	desc = "action.123.desc"
	picture = GFX_evt_surrender
	show_sound = event_screams
	location = fromfrom

	is_triggered_only = yes

	option = {
		trigger = {
			NOT = {
				from = {
					owner = { is_same_empire = root }
				}
			}
		}
		name = DISCONCERTING
	}
	option = {
		trigger = {
			from = {
				owner = { is_same_empire = root }
			}
		}
		name = action.123.a
	}
}

# Won War (Imperial Crusade)
country_event = {
	id = action.150
	title = action.37.name
	message_desc = action.37.message

	desc = {
		trigger = { is_gestalt = no }
		text = action.150.1.desc
		text = action.150.2.desc
		text = action.150.3.desc
	}
	desc = {
		trigger = { is_gestalt = yes }
		text = action.150.gestalt.1.desc
	}

	picture_event_data = {
		portrait = FROM
		planet_background = FROM
		graphical_culture = FROM
		city_level = FROM
		room = FROM.ruler
	}

	diplomatic = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
		fromfrom = {
			using_war_goal = {
           	    type = wg_imperial_crusade
           	    owner = root
           	}
		}
	}

	option = {
		name = action.37.a
	}
}

# Lost War (Imperial Crusade)
country_event = {
	id = action.151
	title = action.38.name
	message_desc = action.38.message

	desc = {
		text = action.151.1.desc
		text = action.151.2.desc
		text = action.151.3.desc
	}

	picture_event_data = {
		portrait = FROM
		planet_background = FROM
		graphical_culture = FROM
		city_level = FROM
		room = FROM.ruler
	}

	diplomatic = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
		fromfrom = {
			using_war_goal = {
           	    type = wg_imperial_crusade
           	    owner = root.from
           	}
		}
	}

	immediate = {
		random_playable_country = {
			limit = { is_galactic_emperor = yes }
			save_event_target_as = gal_emperor
		}
	}

	option = {
		name = action.38.a
	}
}

# Loyalists Won Civil War (Emperor)
country_event = {
	id = action.152
	title = action.37.name
	message_desc = action.37.message

	desc = {
		trigger = { is_gestalt = no }
		text = action.152.1.desc
		text = action.152.2.desc
		text = action.152.3.desc
	}
	desc = {
		trigger = { is_gestalt = yes }
		text = action.152.gestalt.1.desc
	}

	picture_event_data = {
		portrait = FROM
		planet_background = FROM
		graphical_culture = FROM
		city_level = FROM
		room = FROM.ruler
	}

	diplomatic = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
		fromfrom = {
			using_war_goal = {
           	    type = wg_galactic_civil_war_loyalists
           	    owner = root
           	}
		}
	}

	option = {
		name = action.37.a
	}
}

# Loyalists Won Civil War (Rebels)
country_event = {
	id = action.153
	title = action.38.name
	message_desc = action.38.message

	desc = {
		trigger = { is_gestalt = no }
		text = action.153.1.desc
		text = action.153.2.desc
		text = action.153.3.desc
	}
	desc = {
		trigger = { is_gestalt = yes }
		text = action.153.gestalt.1.desc
	}

	picture_event_data = {
		portrait = FROM
		planet_background = FROM
		graphical_culture = FROM
		city_level = FROM
		room = FROM.ruler
	}

	diplomatic = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
		fromfrom = {
			using_war_goal = {
           	    type = wg_galactic_civil_war_loyalists
           	    owner = root.from
           	}
		}
	}

	option = {
		name = action.38.a
	}
}

# Rebels Won Civil War (Rebels)
country_event = {
	id = action.154
	title = action.37.name
	message_desc = action.37.message

	desc = {
		trigger = { is_gestalt = no }
		text = action.154.1.desc
		text = action.154.2.desc
		text = action.154.3.desc
	}
	desc = {
		trigger = { is_gestalt = yes }
		text = action.154.gestalt.1.desc
	}

	picture_event_data = {
		portrait = FROM
		planet_background = FROM
		graphical_culture = FROM
		city_level = FROM
		room = FROM.ruler
	}

	diplomatic = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
		fromfrom = {
			using_war_goal = {
           	    type = wg_galactic_civil_war_rebels
           	    owner = root
           	}
		}
	}

	option = {
		name = action.37.a
	}
}

# Rebels Won Civil War & Dissolve Empire (Emperor)
country_event = {
	id = action.155
	title = action.38.name
	message_desc = action.38.message

	desc = {
		trigger = { is_gestalt = no }
		text = action.155.1.desc
		text = action.155.2.desc
		text = action.155.3.desc
	}
	desc = {
		trigger = { is_gestalt = yes }
		text = action.155.gestalt.1.desc
	}

	picture_event_data = {
		portrait = FROM
		planet_background = FROM
		graphical_culture = FROM
		city_level = FROM
		room = FROM.ruler
	}

	diplomatic = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
		fromfrom = {
			OR = {
				using_war_goal = {
           		    type = wg_galactic_civil_war_rebels
           		    owner = root.from
           		}
           		using_war_goal = {
           		    type = wg_restore_the_community
           		    owner = root.from
           		}
           	}
		}
	}

	option = {
		name = action.38.a
	}
}

## Seize Throne (Usurper)
#country_event = {
#	id = action.156
#	title = action.37.name
#	message_desc = action.37.message
#
#	desc = {
#		trigger = { is_gestalt = no }
#		text = action.156.1.desc
#		text = action.156.2.desc
#		text = action.156.3.desc
#	}
#	desc = {
#		trigger = { is_gestalt = yes }
#		text = action.156.gestalt.1.desc
#	}
#
#	picture_event_data = {
#		portrait = FROM
#		planet_background = FROM
#		graphical_culture = FROM
#		city_level = FROM
#		room = FROM.ruler
#	}
#
#	diplomatic = yes
#	is_triggered_only = yes
#
#	trigger = {
#		is_ai = no
#		fromfrom = {
#			using_war_goal = {
#           	    type = wg_seize_imperial_throne
#           	    owner = root
#           	}
#		}
#	}
#
#	option = {
#		name = action.37.a
#	}
#}
#
## Seize Throne (Former Emperor)
#country_event = {
#	id = action.157
#	title = action.38.name
#	message_desc = action.38.message
#
#	desc = {
#		trigger = { is_gestalt = no }
#		text = action.157.1.desc
#		text = action.157.2.desc
#		text = action.157.3.desc
#	}
#	desc = {
#		trigger = { is_gestalt = yes }
#		text = action.157.gestalt.1.desc
#	}
#
#	picture_event_data = {
#		portrait = FROM
#		planet_background = FROM
#		graphical_culture = FROM
#		city_level = FROM
#		room = FROM.ruler
#	}
#
#	diplomatic = yes
#	is_triggered_only = yes
#
#	trigger = {
#		is_ai = no
#		fromfrom = {
#			using_war_goal = {
#           	    type = wg_seize_imperial_throne
#           	    owner = root.from
#           	}
#		}
#	}
#
#	option = {
#		name = action.38.a
#	}
#}

# Dissolve Empire (Dissolver)
country_event = {
	id = action.158
	title = action.37.name
	message_desc = action.37.message

	desc = {
		trigger = { is_gestalt = no }
		text = action.158.1.desc
		text = action.158.2.desc
		text = action.158.3.desc
	}
	desc = {
		trigger = { is_gestalt = yes }
		text = action.158.gestalt.1.desc
	}

	picture_event_data = {
		portrait = FROM
		planet_background = FROM
		graphical_culture = FROM
		city_level = FROM
		room = FROM.ruler
	}

	diplomatic = yes
	is_triggered_only = yes

	trigger = {
		is_ai = no
		fromfrom = {
			using_war_goal = {
           	    type = wg_restore_the_community
           	    owner = root
           	}
		}
	}

	option = {
		name = action.37.a
	}
}



# Recalculate strategic data for attack/defense ( chokepoints etc. )
country_event = {
	id = action.200
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		from = { #So you don't have to survey a system you just lost again
			set_surveyed = {
				surveyor = root
				surveyed = yes
			}
		}
		run_ai_strategic_war_data = yes
	}
}

# Left a federation
country_event = {
	id = action.201
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		from = {
			set_country_flag = whatever_it_is_im_against_it_left_federation
		}
	}
}

# Hegemony Member's Request to Leave was Rejected
country_event = {
	id = action.205
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		set_timed_country_flag = {
			flag = asked_to_leave_hegemony
			days = 3600
		}
		add_opinion_modifier = {
			who = from
			modifier = opinion_denied_to_leave_hegemony
		}
		from = {
			add_opinion_modifier = {
				who = root
				modifier = opinion_wanted_to_leave_hegemony
			}
		}
	}
}

# Federation On Subjects Can Join Law Change
country_event = {
	id = action.212
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		federation = {
			any_member = {
				is_overlord = yes
				any_subject = {
					NOT = { is_in_federation_with = prev }
				}
			}
		}
	}

	immediate = {
		federation = {
			every_member = {
				limit = {
					is_overlord = yes
					any_subject = {
						NOT = { is_in_federation_with = prev }
					}
				}
				every_subject = {
					limit = {
						NOT = { is_in_federation_with = prev }
					}
					join_alliance = { who = root override_requirements = yes }
				}
			}
		}
	}
}

# Federation On Subjects Can NOT Join Law Change
country_event = {
	id = action.213
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		federation = {
			any_member = {
				is_overlord = yes
				any_subject = { is_in_federation_with = prev }
			}
		}
	}

	immediate = {
		federation = {
			every_member = {
				limit = {
					is_overlord = yes
					any_subject = { is_in_federation_with = prev }
				}
				every_subject = {
					limit = { is_in_federation_with = prev }
					leave_alliance = { override_requirements = yes }
				}
			}
		}
	}
}

# Federation Member Gains Subject
country_event = {
	id = action.214
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		from = {
			has_federation = yes
			federation = { has_federation_law = allow_subjects_to_join_yes }
		}
	}

	immediate = {
		join_alliance = { who = from override_requirements = yes }
	}
}

# Federation Clear Outside Treaties
country_event = {
	id = action.215
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		every_country = {
			limit = {
				has_communications = root
				NOT = { is_in_federation_with = root }
			}
			end_all_treaties_with = root
		}
	}
}

# Random pulse (set up the delay) - on_five_year_pulse_country
country_event = {
	id = action.220
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		country_event = { id = action.221 random = 360 }
	}
}

# Random pulse part 2 (fire the on action) - on_five_year_pulse_country
country_event = {
	id = action.221
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		fire_on_action = { on_action = on_five_year_random_pulse_country }
	}
}

# Random pulse part 3 (fire the on action for negative events) - on_five_year_random_pulse_country
country_event = {
	id = action.2211
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		fire_on_action = { on_action = on_five_year_random_pulse_country_negative_list }
	}
}

# Random pulse part 4 - null effect event if fired via espionage operation
country_event = {
	id = action.2212
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			NOT = { exists = from }
			from = {
				NOT = { is_scope_type = espionage_operation }
			}
		}
	}
}


# on_colony_5_year_pulse
planet_event = {
	id = action.222
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = { #save the AI from doomsday if it manages to colonise
			limit = {
				exists = owner
				owner = {
					has_origin = origin_doomsday
					is_ai = yes
					any_owned_planet = {
						has_planet_flag = doomed_planet_origin
					}
				}
				NOT = { has_planet_flag = doomed_planet_origin }
			}
			owner = {
				random_owned_planet = {
					limit = {
						has_planet_flag = doomed_planet_origin
						num_pops > 3
					}
					while = {
						count = 3
						random_owned_pop = {
							limit = {
								OR = {
									prev = { has_modifier = doomsday_5 }
									root = {
										habitability = {
											who = prev.species
											value > 0.3
										}
									}
								}
							}
							resettle_pop = {
								pop = this
								planet = root
							}
						}
					}
				}
			}
		}
	}
}


# Called when a Starbase changes owner
# THIS = Ship (Starbase)
# FROM = Former Owner (Country)
ship_event = {
	id = action.223
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		exists = starbase
	}

	immediate = {
		starbase = {
			if = {
				limit = {
					owner = {
						is_gestalt = yes
					}
				}
				remove_starbase_building = {
					building = offworld_trading_company
				}
				remove_starbase_module = {
					module = trading_hub
				}
			}
		}
	}
}

# This = starbase being destroyed
# From = fleet that destroyed the starbase
starbase_event = {
	id = action.225
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { exists = root.owner }
			solar_system = {
				set_surveyed = {
					surveyed = yes
					surveyor = root.owner
				}
			}
		}
		solar_system = {
			set_surveyed = {
				surveyed = yes
				surveyor = from.owner
			}
		}
		#remove leftovers
		solar_system = {
			every_fleet_in_system = {
				limit = {
					is_owned_by = root.owner
					OR = {
						is_ship_size = mining_station
						is_ship_size = research_station
						is_ship_size = observation_station
					}
				}
				destroy_fleet = this
			}
		}
	}
}


# on_released_as_vassal
# This = released vassal
# From = overlord
country_event = {
	id = action.229
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				has_trait = trait_necrophage
			}
			set_origin = origin_necrophage
		}
		else = {
			set_origin = origin_default
		}
		if = {
			limit = {
				has_civic = civic_galactic_sovereign
			}
			force_remove_civic = civic_galactic_sovereign
		}
		if = {
			limit = {
				has_civic = civic_galactic_sovereign_megacorp
			}
			force_remove_civic = civic_galactic_sovereign_megacorp
		}
	}
}

# on_decade_pulse_country
# Event for misc error logging of broken gamestates that probably can't be done better in code
country_event = {
	id = action.240
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = {
				is_country_type = default
			}
			every_country = {
				limit = {
					NOR = {
						is_same_value = root
						has_communications = root
						has_country_flag = suppress_first_contact_comms
					}
					root = {
						has_established_contact = prev
						NOR = {
							has_active_first_contact_with = prev
							has_relation_flag = {
								who = prev
								flag = has_logged_first_contact_error
							}
							has_relation_flag = {
								who = prev
								flag = just_encountered
							}
						}
						#matches game rule can_have_first_contact
						if = {
							limit = { prev = { is_amoeba_country_type = yes } }
							NOT = {
								any_active_first_contact = {
									contact_country = { is_amoeba_country_type = yes }
								}
							}
						}
						else_if = {
							limit = { prev = { is_tiyanki_country_type = yes } }
							NOT = {
								any_active_first_contact = {
									contact_country = { is_tiyanki_country_type = yes }
								}
							}
						}
						else_if = {
							limit = { prev = { is_crystal_country_type = yes } }
							NOT = {
								any_active_first_contact = {
									contact_country = { is_crystal_country_type = yes }
								}
							}
						}
						else_if = {
							limit = { prev = { is_drone_country_type = yes } }
							NOT = {
								any_active_first_contact = {
									contact_country = { is_drone_country_type = yes }
								}
							}
						}
						else_if = {
							limit = { prev = { is_country_type = cloud } }
							NOT = {
								any_active_first_contact = {
									contact_country = { is_country_type = cloud }
								}
							}
						}
						else_if = {
							limit = {
								prev = {
									OR = {
										is_country_type = caravaneer_fleet
										is_country_type = caravaneer_home
									}
								}
							}
							NOT = {
								any_active_first_contact = {
									contact_country = {
										OR = {
											is_country_type = caravaneer_fleet
											is_country_type = caravaneer_home
										}
									}
								}
							}
						}
					}
				}
				log_error = "[Root.GetRealName] has encountered [This.GetRealName] (country type: [This.GetCountryType]) but has neither communications with them nor an active First Contact site to do so."
				root = {
					set_relation_flag = {
						who = prev
						flag = has_logged_first_contact_error
					}
					establish_communications_no_message = prev
				}
			}
		}
	}
}

system_event = {
	id=action.301
	is_triggered_only=yes
	hide_window=yes
	immediate = {
		every_system_megastructure = {
			limit = {
				OR = {
					is_megastructure_type = gateway_ruined
					is_megastructure_type = gateway_restored
					is_megastructure_type = gateway_final
				}
			}
			set_owner = FROM
		}
	}
}

system_event = {
	id=action.300
	is_triggered_only=yes
	hide_window=yes
	immediate = {
		every_system_megastructure = {
			limit = {
				OR = {
					is_megastructure_type = gateway_ruined
					is_megastructure_type = gateway_restored
					is_megastructure_type = gateway_final
				}
			}
			set_owner = FROM
		}
	}
}


country_event = {
	id = action.310
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		federation = {
			every_member = {
				create_message = {
					type = MESSAGE_NEW_FEDERATION_PRESIDENT_CHOSEN
					localization = NEW_FEDERATION_PRESIDENT_CHOSEN
					days = 60
					target = root.capital_scope
					variable = {
						type = name
						localization = PRESIDENT
						scope = root
					}
					variable = {
						type = name
						localization = FEDERATION
						scope = root.federation
					}
				}
			}
		}
	}
}

# on_country_released_in_war
# Root = new country
# From = country forcing the release
# FromFrom = country they are released from
# FromFromFrom = war
country_event = {
	id = action.320
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = {
				has_civic = civic_galactic_sovereign
			}
			force_remove_civic = civic_galactic_sovereign
		}
		if = {
			limit = {
				has_civic = civic_galactic_sovereign_megacorp
			}
			force_remove_civic = civic_galactic_sovereign_megacorp
		}
	}
}
